
$msRoot.createNS("ColorPicker.ColorValuePicker");$msRoot.ColorPicker.ColorValuePicker=(function(b){function a(d){var c=this;this.id=d;this.onValuesChanged=null;this.onOpacityValuesChanged=null;this.hueInput=$ms.$(this.id+"hue-input");this.saturationInput=$ms.$(this.id+"saturation-input");this.valueInput=$ms.$(this.id+"brightness-input");this.redInput=$ms.$(this.id+"red-input");this.greenInput=$ms.$(this.id+"green-input");this.blueInput=$ms.$(this.id+"blue-input");this.hexInput=$ms.$(this.id+"hex-input");this.opacityInput=$ms.$(this.id+"opacity-input");this.hue2Input=$ms.$(this.id+"hue2-input");this.saturation2Input=$ms.$(this.id+"saturation2-input");this.lightnessInput=$ms.$(this.id+"lightness-input");this.colorNameInput=$ms.$(this.id+"color-name");this.hueInput.addEventListener("keyup",function(f){this.hsvKeyup(f)}.bind(this));this.saturationInput.addEventListener("keyup",function(f){this.hsvKeyup(f)}.bind(this));this.valueInput.addEventListener("keyup",function(f){this.hsvKeyup(f)}.bind(this));this.hueInput.addEventListener("blur",function(f){this.hsvBlur(f)}.bind(this));this.saturationInput.addEventListener("blur",function(f){this.hsvBlur(f)}.bind(this));this.valueInput.addEventListener("blur",function(f){this.hsvBlur(f)}.bind(this));this.hueInput.addEventListener("keydown",function(f){this.keydown(f,0,360,this.hsvKeyup)}.bind(this));this.saturationInput.addEventListener("keydown",function(f){this.keydown(f,0,100,this.hsvKeyup)}.bind(this));this.valueInput.addEventListener("keydown",function(f){this.keydown(f,0,100,this.hsvKeyup)}.bind(this));this.redInput.addEventListener("keyup",function(f){this.rgbKeyup(f)}.bind(this));this.greenInput.addEventListener("keyup",function(f){this.rgbKeyup(f)}.bind(this));this.blueInput.addEventListener("keyup",function(f){this.rgbKeyup(f)}.bind(this));this.redInput.addEventListener("blur",function(f){this.rgbBlur(f)}.bind(this));this.greenInput.addEventListener("blur",function(f){this.rgbBlur(f)}.bind(this));this.blueInput.addEventListener("blur",function(f){this.rgbBlur(f)}.bind(this));this.redInput.addEventListener("keydown",function(f){this.keydown(f,0,255,this.rgbKeyup)}.bind(this));this.greenInput.addEventListener("keydown",function(f){this.keydown(f,0,255,this.rgbKeyup)}.bind(this));this.blueInput.addEventListener("keydown",function(f){this.keydown(f,0,255,this.rgbKeyup)}.bind(this));this.hue2Input.addEventListener("keyup",function(f){this.hslKeyup(f)}.bind(this));this.saturation2Input.addEventListener("keyup",function(f){this.hslKeyup(f)}.bind(this));this.lightnessInput.addEventListener("keyup",function(f){this.hslKeyup(f)}.bind(this));this.hue2Input.addEventListener("blur",function(f){this.hslBlur(f)}.bind(this));this.saturation2Input.addEventListener("blur",function(f){this.hslBlur(f)}.bind(this));this.lightnessInput.addEventListener("blur",function(f){this.hslBlur(f)}.bind(this));this.hue2Input.addEventListener("keydown",function(f){this.keydown(f,0,360,this.hslKeyup)}.bind(this));this.saturation2Input.addEventListener("keydown",function(f){this.keydown(f,0,100,this.hslKeyup)}.bind(this));this.lightnessInput.addEventListener("keydown",function(f){this.keydown(f,0,100,this.hslKeyup)}.bind(this));this.hexInput.addEventListener("keyup",function(f){this.hexKeyup(f)}.bind(this));this.hexInput.addEventListener("keydown",function(f){this.keydown(f,0,255,this.hexKeyup)}.bind(this));this.opacityInput.addEventListener("blur",function(f){this.opacityBlur(f)}.bind(this));this.opacityInput.addEventListener("keydown",function(f){this.keydown(f,0,100,this.opacityKeyup)}.bind(this));this.opacityInput.addEventListener("keyup",function(f){this.keydown(f,0,100,this.opacityKeyup)}.bind(this));this.colorNameInput.addEventListener("keyup",function(f){this.setValuesFromName()}.bind(this));this.color=new $msRoot.ColorPicker.Color();if(this.hexInput.value!=""){this.color.setHex(this.hexInput.value)}this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v}a.prototype.hsvKeyup=function(c){if(c.target.value==""){return}this.validateHsv(c);this.setValuesFromHsv();if(this.onValuesChanged){this.onValuesChanged()}};a.prototype.rgbKeyup=function(c){if(c.target.value==""){return}this.validateRgb(c);this.setValuesFromRgb();if(this.onValuesChanged){this.onValuesChanged()}};a.prototype.hslKeyup=function(c){if(c.target.value==""){return}this.validateHsl(c);this.setValuesFromHsl();if(this.onValuesChanged){this.onValuesChanged()}};a.prototype.hexKeyup=function(c){if(c.target.value==""){return}this.validateHex(c);this.setValuesFromHex();if(this.onValuesChanged){this.onValuesChanged()}};a.prototype.opacityKeyup=function(c){if(c.target.value==""){return}this.opacityInputValueChanged(c.target)};a.prototype.hsvBlur=function(c){if(c.target.value==""){this.setValuesFromRgb()}};a.prototype.hslBlur=function(c){if(c.target.value==""){this.setValuesFromHsl()}};a.prototype.rgbBlur=function(c){if(c.target.value==""){this.setValuesFromHsv()}};a.prototype.hexBlur=function(c){if(c.target.value==""){this.setValuesFromHsv()}};a.prototype.opacityKeyup=function(){var c=parseInt(this.opacityInput.value);if(c==0&&c!==this.opacityInput.value){c=100}if(c<0||c>100){c=100}this.opacityInput.value=c;if(this.onOpacityValuesChanged){this.onOpacityValuesChanged()}};a.prototype.opacityBlur=function(c){if(c.target.value==""){this.opacityKeyup()}};a.prototype.keydown=function(g,f,d,c){if(g.keyCode==38){if(typeof f=="undefined"){return}g.target.value=Math.min(parseInt(g.target.value)+1,d);if(c){c.call(this,g)}g.stopPropagation()}else{if(g.keyCode==40){if(typeof f=="undefined"){return}g.target.value=Math.max(parseInt(g.target.value)-1,f);if(c){c.call(this,g)}g.stopPropagation()}else{if(c){c.call(this,g)}}}};a.prototype.validateRgb=function(c){if(!this._keyNeedsValidation(c)){return c}this.redInput.value=this._setValueInRange(this.redInput.value,0,255);this.greenInput.value=this._setValueInRange(this.greenInput.value,0,255);this.blueInput.value=this._setValueInRange(this.blueInput.value,0,255)};a.prototype.validateHsv=function(c){if(!this._keyNeedsValidation(c)){return c}this.hueInput.value=this._setValueInRange(this.hueInput.value,0,359);this.saturationInput.value=this._setValueInRange(this.saturationInput.value,0,100);this.valueInput.value=this._setValueInRange(this.valueInput.value,0,100)};a.prototype.validateHsl=function(c){if(!this._keyNeedsValidation(c)){return c}this.hue2Input.value=this._setValueInRange(this.hue2Input.value,0,359);this.saturation2Input.value=this._setValueInRange(this.saturation2Input.value,0,100);this.lightnessInput.value=this._setValueInRange(this.lightnessInput.value,0,100)};a.prototype.validateHex=function(d){if(!this._keyNeedsValidation(d)){return d}var c=new String(this.hexInput.value).toUpperCase();if(c.substr(0,1)=="#"){c=c.substr(1)}c=c.replace(/[^A-F0-9]/g,"0");if(c.length>6){c=c.substring(0,6)}this.hexInput.value="#"+c};a.prototype._keyNeedsValidation=function(c){if(c.keyCode==9||c.keyCode==16||c.keyCode==38||c.keyCode==29||c.keyCode==40||c.keyCode==37||(c.ctrlKey&&(c.keyCode=="c".charCodeAt()||c.keyCode=="v".charCodeAt()))){return false}return true};a.prototype._setValueInRange=function(e,d,c){if(e==""||isNaN(e)){return d}e=parseInt(e);if(e>c){return c}if(e<d){return d}return e};a.prototype.setValuesFromRgb=function(){this.color.setRgb(this.redInput.value,this.greenInput.value,this.blueInput.value,this.opacityInput.value);this.hexInput.value=this.color.hex;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v;this.hue2Input.value=this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l};a.prototype.setValuesFromHsv=function(){this.color.setHsv(parseInt(this.hueInput.value),parseInt(this.saturationInput.value),parseInt(this.valueInput.value),this.opacityInput.value);this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hue2Input.value=this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l};a.prototype.setValuesFromHsl=function(){this.color.setHsl(parseInt(this.hue2Input.value),parseInt(this.saturation2Input.value),parseInt(this.lightnessInput.value),this.opacityInput.value);this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v};a.prototype.setValuesFromHex=function(){this.color.setHex(this.hexInput.value,this.opacityInput.value);this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v;this.hue2Input.value=this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l},a.prototype.setValuesFromOpacity=function(){this.color.setOpacity(this.opacityInput.value)},a.prototype.setColorName=function(){var c=$msRoot.colorMethods.colorNameInfo(this.hexInput.value,"name");this.colorNameInput.value=c;this.validName=true},a.prototype.setValuesFromName=function(){if(this.colorNameInput.value.length==0){this.validName="empty"}else{this.validName=false;var c=$msRoot.colorMethods.colorNameInfo(this.colorNameInput.value,"hex");if(c.length>0){this.validName=true;this.hexInput.value=c;this.setValuesFromHex()}}if(this.onValuesChanged){this.onValuesChanged()}};return a})();