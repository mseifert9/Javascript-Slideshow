
$msRoot.createNS("LocalFile");$msRoot.LocalFile=(function(a){var c=function(e,d){window.requestAnimationFrame(function(){var f=new MouseEvent(d);e.dispatchEvent(f)})};function b(d){this.filename="temp.txt";this.href;this.text="";this.cbOnFileLoad;this.format="text";if(this.filename){this.filename=d}}b.prototype.saveFile=function(){this.create();this.download()};b.prototype.create=function(){var d=new Blob([this.text],{type:"text/plain"});if(this.href!==null){window.URL.revokeObjectURL(this.href)}this.href=window.URL.createObjectURL(d)};b.prototype.download=function(){var d=document.createElement("a");d.setAttribute("download",this.filename);d.href=this.href;document.body.appendChild(d);window.requestAnimationFrame(function(){c(d,"click");document.body.removeChild(d)})};b.prototype.loadFile=function(g){var h=this;var f=g.target.files;var e;if(f.length==1){e=f[0]}else{return false}var d=new FileReader();d.onload=(function(i){return function(j){i.text=j.target.result;i.cbOnFileLoad(i.text)}})(h);if(this.format=="binary"){d.readAsBinaryString(e)}else{if(this.format=="arrayBuffer"){d.readAsArrayBuffer(e)}else{d.readAsText(e)}}};return b})();