'use strict';$msRoot.createNS("ColorPicker");
$msRoot.ColorPicker=function(r){function h(d){this.keyupFn=function(c){this.keyup(c)}.bind(this);l.push(this);this.id="ms-colorpicker-"+p++ +"-";this.colorMap;this.colorBar;this.opacitySlider;this.cpLibrary;this.isPinned=this.previewOrigSet=!1;this.settings=$ms.cloneSettings(q,d);0<this.settings.imgPath.length&&"/"!==this.settings.imgPath.substr(-1)&&(this.settings.imgPath+="/");this.settings.container||(this.settings.container=document.body);d={cbSetColor:function(c){this.setColor(c)}.bind(this),saveLabel:"Save Color",
libSuffix:"cp",valueToSet:"rgbString",cbResize:function(c){"open"==c?$ms.addClass($ms.$(this+"name-label"),"display-none"):$ms.removeClass($ms.$(this+"name-label"),"display-none")}.bind(this)};this.cpLibrary=new $msRoot.ColorPicker.ColorLibrary(d);this.container=this.createForm();$ms.draggable(this.container,{scope:"default",handle:this.id+"title-bar",cbDrop:this.drop.bind(this)});this.settings.startPinned&&this.settings.gradient?this.pinToGradient():this.settings.startPos?(this.settings.startPos.top=
parseFloat(this.settings.startPos.top)+"px",this.settings.startPos.left=parseFloat(this.settings.startPos.left)+"px"):this.settings.source?(d=$ms.getOffset(this.settings.source),this.settings.startPos={},this.settings.startPos.top=d.top+d.height+"px",this.settings.startPos.left=d.left+(20+l.length)+"px"):this.settings.startPos={top:100+20*l.length+"px",left:100+20*l.length+"px"};$ms.windowSize();parseInt($ms.getPropertyValue(this.container,"width"));parseInt($ms.getPropertyValue(this.container,"height"));
this.container.style.top=Math.max(0,parseInt(this.settings.startPos.top))+"px";this.container.style.left=Math.max(0,parseInt(this.settings.startPos.left))+"px";this.hueRadio=$ms.$(this.id+"hue-radio");this.saturationRadio=$ms.$(this.id+"saturation-radio");this.valueRadio=$ms.$(this.id+"brightness-radio");this.redRadio=$ms.$(this.id+"red-radio");this.greenRadio=$ms.$(this.id+"green-radio");this.blueRadio=$ms.$(this.id+"blue-radio");this.notSetCheck=$ms.$(this.id+"not-set-check");this.opacityInput=
$ms.$(this.id+"opacity-input");this.hue2Radio=$ms.$(this.id+"hue2-radio");this.saturation2Radio=$ms.$(this.id+"saturation2-radio");this.lightnessRadio=$ms.$(this.id+"lightness-radio");this.colorNameInput=$ms.$(this.id+"color-name");this.hueRadio.value="h";this.saturationRadio.value="s";this.valueRadio.value="v";this.redRadio.value="r";this.greenRadio.value="g";this.blueRadio.value="b";this.hue2Radio.value="h2";this.saturation2Radio.value="s2";this.lightnessRadio.value="l";this.hueRadio.addEventListener("click",
function(c){this.radioClicked(c)}.bind(this));this.saturationRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.valueRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.redRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.greenRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.blueRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.blueRadio.addEventListener("click",
function(c){this.radioClicked(c)}.bind(this));this.hue2Radio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.saturation2Radio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.lightnessRadio.addEventListener("click",function(c){this.radioClicked(c)}.bind(this));this.notSetCheck.addEventListener("click",function(c){this.notSetCheckClicked(c)}.bind(this));window.addEventListener("keyup",this.keyupFn);this.preview=$ms.$(this.id+"preview");this.previewOrig=
$ms.$(this.id+"preview-orig");this.cssText=$ms.$(this.id+"css-text");this.cpLibrary.libraryNameCombo.setValue("Default");this.cpLibrary.libraryNameCombo.settings.cbChange({value:"Default"},!0);this.mapBase=this.colorMap;this.mapBase.style.width="256px";this.mapBase.style.height="256px";this.mapBase.style.padding=0;this.mapBase.style.margin=0;this.mapBase.style.border="solid 1px #000";this.mapL1=document.createElement("img");this.mapL1.src=this.settings.imgPath+"blank.gif";this.mapL1.width=256;this.mapL1.height=
256;this.mapL1.style.margin="0px";this.mapL1.className="ms-no-select";this.mapBase.appendChild(this.mapL1);this.mapL1b=document.createElement("img");this.mapL1b.src=this.settings.imgPath+"blank.gif";this.mapL1b.width=256;this.mapL1b.height=256;this.mapBase.appendChild(this.mapL1b);this.mapL1b.style.clear="both";this.mapL1b.style.margin="-256px 0px 0px 0px";this.mapL1b.style.opacity="0";this.mapL1b.className="ms-no-select";this.mapL2=document.createElement("img");this.mapL2.src=this.settings.imgPath+
"blank.gif";this.mapL2.width=256;this.mapL2.height=256;this.mapBase.appendChild(this.mapL2);this.mapL2.style.clear="both";this.mapL2.style.margin="-256px 0px 0px 0px";this.mapL2.style.opacity=".5";this.mapL2.className="ms-no-select";this._bar=this.colorBar;this._bar.style.width="20px";this._bar.style.height="256px";this._bar.style.padding=0;this._bar.style.margin="0px 10px";this._bar.style.border="solid 1px #000";this._bar.className="ms-no-select";this._barL1=document.createElement("img");this._barL1.src=
this.settings.imgPath+"blank.gif";this._barL1.width=20;this._barL1.height=256;this._barL1.style.margin="0px";this._bar.appendChild(this._barL1);this._barL2=document.createElement("img");this._barL2.src=this.settings.imgPath+"blank.gif";this._barL2.width=20;this._barL2.height=256;this._barL2.style.margin="-256px 0px 0px 0px";this._bar.appendChild(this._barL2);this._barL3=document.createElement("img");this._barL3.src=this.settings.imgPath+"blank.gif";this._barL3.width=20;this._barL3.height=256;this._barL3.style.margin=
"-256px 0px 0px 0px";this._barL3.style.backgroundColor="#ff0000";this._bar.appendChild(this._barL3);this._barL4=document.createElement("img");this._barL4.id=this.id+"color-bar-img";this._barL4.src=this.settings.imgPath+"blank.gif";this._barL4.width=20;this._barL4.height=256;this._barL4.style.margin="-256px 0px 0px 0px";this._bar.appendChild(this._barL4);this.cvp=new $msRoot.ColorPicker.ColorValuePicker(this.id);this.map=new $msRoot.Slider(this.mapL2,{xMinValue:0,xMaxValue:255,yMinValue:0,yMaxValue:255,
arrowImage:"mappoint.gif",imgPath:this.settings.imgPath,container:this.mapBase,direction:"both",parentNode:this.container,target:[this.cvp.hexInput,this.cvp.hueInput,this.cvp.saturationInput,this.cvp.valueInput,this.cvp.redInput,this.cvp.greenInput,this.cvp.blueInput,this.hueRadio,this.saturationRadio,this.valueRadio,this.redRadio,this.greenRadio,this.blueRadio],cbSliderMouseup:function(){this.sliderMouseup()}.bind(this),hideCursor:!0,throttle:30});this.slider=new $msRoot.Slider(this._barL4,{xMinValue:1,
xMaxValue:1,yMinValue:0,yMaxValue:255,arrowImage:"rangearrows.gif",imgPath:this.settings.imgPath,container:this.colorBar,direction:"vertical",bar2:this._bar,cbSliderMouseup:function(){this.sliderMouseup()}.bind(this)});this.slider.onValuesChanged=function(){this.sliderValueChanged()}.bind(this);this.map.onValuesChanged=function(){this.mapValueChanged()}.bind(this);this.cvp.onValuesChanged=function(){this.textValuesChanged()}.bind(this);this.cvp.onOpacityValuesChanged=function(){this.opacityValuesChanged()}.bind(this);
this.isLessThanIE7=!1;7>parseFloat(navigator.appVersion.split("MSIE")[1])&&document.body.filters&&(this.isLessThanIE7=!0);if(this.settings.allowGradient&&-1!==this.settings.startColor.indexOf("gradient")&&!this.settings.fromGradientStartColor)this.openGradient(this.settings.startColor,!0);else{d=this.settings.fromGradientStartColor?this.settings.fromGradientStartColor:this.settings.startColor;-1!==d.indexOf("transparent")&&(d="rgba(255,255,255,0)");d=d.trim();if(0<d.length&&"#"!==d.substr(0,1)&&"rgb"!==
d.substr(0,3)){var e=document.createElement("div");e.style.color=d;d=getComputedStyle(e).getPropertyValue("color")}d=$msRoot.colorMethods.colorInfo(d);this.cvp.hexInput.value=d.hex;this.opacityInput.value=parseInt(100*d.alpha);this.opacityInput.style.color=0==this.opacityInput.value?"red":"black";""==d.hex&&(this.notSetCheck.checked=!0);this.cvp.setValuesFromHex();this.setColorMode(this.settings.startMode);this.positionArrows();this.positionOpacityArrows();this.updateVisuals();if(this.settings.cbCreate)if(Array.isArray(this.settings.cbCreate))for(d=
0;d<this.settings.cbCreate.length;d++)this.settings.cbCreate[d](this);else this.settings.cbCreate(this)}}var l=[],p=0,q={imgPath:$ms.STATIC_JS_COMMON+"/colorpicker/img",startMode:"h",startColor:"",startPos:void 0,target:void 0,fontSize:75,zIndex:1E3,container:void 0,cbClose:void 0,cbChange:void 0,cbCreate:void 0,pin:!1,startPinned:!1,allowGradient:!0,gradient:void 0,fromGradient:!1,minimal:!1};$ms.sourceFiles.add([{file:"localdata.min.js",ns:"LocalData"},{file:"localfile.min.js",ns:"LocalFile"},{file:"editable-combo.min.js",
ns:"EditableCombo"},{file:"custom-dialog.min.js",ns:"CustomDialog"},{file:"dragdrop.min.js",ns:"DragDrop"},{file:"slider.min.js",ns:"Slider"},{file:"colorlibrary.min.js",ns:"ColorPicker.ColorLibrary",subDir:"colorpicker"},{file:"colormethods.min.js",ns:"ColorPicker.Color",subDir:"colorpicker"},{file:"colorvaluepicker.min.js",ns:"ColorPicker.ColorValuePicker",subDir:"colorpicker"},{file:"map-hue.png",baseDir:"js",subDir:"colorpicker/img",id:"cp-map-hue-png",dependencies:[{file:$ms.sourceFiles.onloadTest}]}]);
$ms.sourceFiles.load();h.getInstance=function(d){if("undefined"!==typeof d)for(var e=0;e<l.length;e++){if(l[e].id==d)return l[e]}else return l};h.prototype.show=function(d){this.container.style.zIndex=d;$ms.removeClass(this.container,"display-none");this.drop(!0)};h.prototype.hide=function(){$ms.addClass(this.container,"display-none")};h.prototype.radioClicked=function(d){this.setColorMode(d.target.value)};h.prototype._onWebSafeClicked=function(d){this.setColorMode(this.ColorMode)};h.prototype.textValuesChanged=
function(){"empty"===this.cvp.validName?(this.cssText.innerHTML=this.getCss(),this.cssText.title=this.cssText.innerHTML.replace(/<[^>]+>/g,"  "),this.cvp.validName=null):!1===this.cvp.validName?(this.cssText.innerHTML="<span style='color:red'>Color name not found.</span>",this.cssText.title="",this.cvp.validName=null):(this.cvp.setColorName(),this.positionArrows(),this.updateVisuals(),this.updateGradientFromInput())};h.prototype.opacityValuesChanged=function(){this.cvp.setValuesFromOpacity();this.positionOpacityArrows();
this.updateVisuals();this.updateGradientFromInput()};h.prototype.notSetCheckClicked=function(){this.notSetCheck.checked?(this.previousValue=Object.assign({},this.cvp.color),this.previousValue.rgb=this.previousValue.rgb.slice(0),this.previousValue.alpha=this.opacityInput.value/100,this.cvp.hexInput.value="",this.opacityInput.value=100):(this.previousValue||(this.previousValue=$msRoot.colorMethods.colorInfo(this.settings.startColor)),this.cvp.hexInput.value=this.previousValue.hex,this.opacityInput.value=
100*this.previousValue.alpha);this.cvp.setValuesFromHex();this.positionArrows();this.positionOpacityArrows();this.updateVisuals();this.updateGradientFromInput()};h.prototype.setColorMode=function(d){function e(c,g){c.setAlpha(g,100);g.style.backgroundColor="";g.src=c.settings.imgPath+"blank.gif";g.style.filter=""}this.color=this.cvp.color;e(this,this.mapL1);e(this,this.mapL1b);e(this,this.mapL2);e(this,this._barL1);e(this,this._barL2);e(this,this._barL3);e(this,this._barL4);this.hueRadio.checked=
!1;this.saturationRadio.checked=!1;this.valueRadio.checked=!1;this.redRadio.checked=!1;this.greenRadio.checked=!1;this.blueRadio.checked=!1;this.hue2Radio.checked=!1;this.saturation2Radio.checked=!1;this.lightnessRadio.checked=!1;switch(d){case "h":this.hueRadio.checked=!0;this.mapL1.style.backgroundColor=this.color.hex;this.mapL2.style.backgroundColor="transparent";this.setImg(this.mapL2,this.settings.imgPath+"map-hue.png");this.setAlpha(this.mapL2,100);this.setImg(this._barL4,this.settings.imgPath+
"bar-hue.png");this.map.settings.xMaxValue=100;this.map.settings.yMaxValue=100;this.slider.settings.yMaxValue=360;break;case "s":this.saturationRadio.checked=!0;this.setImg(this.mapL1,this.settings.imgPath+"map-saturation.png");this.setImg(this.mapL2,this.settings.imgPath+"map-saturation-overlay.png");this.setAlpha(this.mapL2,0);this.setBG(this._barL3,this.color.hex);this.setImg(this._barL4,this.settings.imgPath+"bar-saturation.png");this.map.settings.xMaxValue=360;this.map.settings.yMaxValue=100;
this.slider.settings.yMaxValue=100;break;case "v":this.valueRadio.checked=!0;this.setBG(this.mapL1,"000");this.setImg(this.mapL2,this.settings.imgPath+"map-brightness.png");this._barL3.style.backgroundColor=this.color.hex;this.setImg(this._barL4,this.settings.imgPath+"bar-brightness.png");this.map.settings.xMaxValue=360;this.map.settings.yMaxValue=100;this.slider.settings.yMaxValue=100;break;case "r":this.redRadio.checked=!0;this.setImg(this.mapL2,this.settings.imgPath+"map-red-max.png");this.setImg(this.mapL1,
this.settings.imgPath+"map-red-min.png");this.setImg(this._barL4,this.settings.imgPath+"bar-red-tl.png");this.setImg(this._barL3,this.settings.imgPath+"bar-red-tr.png");this.setImg(this._barL2,this.settings.imgPath+"bar-red-br.png");this.setImg(this._barL1,this.settings.imgPath+"bar-red-bl.png");break;case "g":this.greenRadio.checked=!0;this.setImg(this.mapL2,this.settings.imgPath+"map-green-max.png");this.setImg(this.mapL1,this.settings.imgPath+"map-green-min.png");this.setImg(this._barL4,this.settings.imgPath+
"bar-green-tl.png");this.setImg(this._barL3,this.settings.imgPath+"bar-green-tr.png");this.setImg(this._barL2,this.settings.imgPath+"bar-green-br.png");this.setImg(this._barL1,this.settings.imgPath+"bar-green-bl.png");break;case "b":this.blueRadio.checked=!0;this.setImg(this.mapL2,this.settings.imgPath+"map-blue-max.png");this.setImg(this.mapL1,this.settings.imgPath+"map-blue-min.png");this.setImg(this._barL4,this.settings.imgPath+"bar-blue-tl.png");this.setImg(this._barL3,this.settings.imgPath+"bar-blue-tr.png");
this.setImg(this._barL2,this.settings.imgPath+"bar-blue-br.png");this.setImg(this._barL1,this.settings.imgPath+"bar-blue-bl.png");break;case "h2":this.hue2Radio.checked=!0;this.mapL1.style.backgroundColor=this.color.hex;this.mapL2.style.backgroundColor="transparent";this.setImg(this.mapL2,this.settings.imgPath+"map-hsl-hue.png");this.setAlpha(this.mapL2,100);this.setImg(this._barL4,this.settings.imgPath+"bar-hue.png");this.map.settings.xMaxValue=100;this.map.settings.yMaxValue=100;this.slider.settings.yMaxValue=
360;break;case "s2":this.saturation2Radio.checked=!0;this.setImg(this.mapL1,this.settings.imgPath+"map-hsl-saturation.png");this.setAlpha(this.mapL2,99);this.setBG(this.map1b,"rgb(128,128,128)");this.setAlpha(this.mapL1b,0);this.setImg(this.mapL2,this.settings.imgPath+"map-hsl-saturation-overlay.png");this.setBG(this._barL3,this.color.hex);this.setImg(this._barL4,this.settings.imgPath+"bar-saturation.png");this.map.settings.xMaxValue=360;this.map.settings.yMaxValue=100;this.slider.settings.yMaxValue=
100;break;case "l":this.lightnessRadio.checked=!0;this.setImg(this.mapL1,this.settings.imgPath+"map-hsl-lightness.png");this.setBG(this.mapL2,"rgb(255,255,255)");this.setAlpha(this.mapL2,0);this._barL3.style.backgroundColor=this.color.hex;this.setImg(this._barL4,this.settings.imgPath+"bar-brightness.png");this.map.settings.xMaxValue=360;this.map.settings.yMaxValue=100;this.slider.settings.yMaxValue=100;break;default:alert("invalid mode")}switch(d){case "h":case "s":case "v":this.map.settings.xMinValue=
0;this.map.settings.yMinValue=0;this.slider.settings.yMinValue=0;break;case "r":case "g":case "b":this.map.settings.xMinValue=0;this.map.settings.yMinValue=0;this.slider.settings.yMinValue=0;this.map.settings.xMaxValue=255;this.map.settings.yMaxValue=255;this.slider.settings.yMaxValue=255;break;case "h2":case "s2":case "l":this.map.settings.xMinValue=0,this.map.settings.yMinValue=0,this.slider.settings.yMinValue=0}this.ColorMode=d;this.positionArrows();this.updateMapVisuals();this.updateSliderVisuals()};
h.prototype.mapValueChanged=function(){switch(this.ColorMode){case "h":this.cvp.saturationInput.value=$ms.round(this.map.xValue);this.cvp.valueInput.value=$ms.round(100-this.map.yValue);break;case "s":this.cvp.hueInput.value=$ms.round(this.map.xValue);this.cvp.valueInput.value=$ms.round(100-this.map.yValue);break;case "v":this.cvp.hueInput.value=$ms.round(this.map.xValue);this.cvp.saturationInput.value=$ms.round(100-this.map.yValue);break;case "r":this.cvp.blueInput.value=$ms.round(this.map.xValue);
this.cvp.greenInput.value=$ms.round(256-this.map.yValue);break;case "g":this.cvp.blueInput.value=$ms.round(this.map.xValue);this.cvp.redInput.value=$ms.round(256-this.map.yValue);break;case "b":this.cvp.redInput.value=$ms.round(this.map.xValue);this.cvp.greenInput.value=$ms.round(256-this.map.yValue);break;case "h2":this.cvp.saturation2Input.value=$ms.round(this.map.xValue);this.cvp.lightnessInput.value=$ms.round(100-this.map.yValue);break;case "s2":this.cvp.hue2Input.value=$ms.round(this.map.xValue);
this.cvp.lightnessInput.value=$ms.round(100-this.map.yValue);break;case "l":this.cvp.hue2Input.value=$ms.round(this.map.xValue),this.cvp.saturation2Input.value=$ms.round(100-this.map.yValue)}switch(this.ColorMode){case "h":case "s":case "v":this.cvp.setValuesFromHsv();break;case "r":case "g":case "b":this.cvp.setValuesFromRgb();break;case "h2":case "s2":case "l":this.cvp.setValuesFromHsl()}this.updateVisuals();this.updateGradientFromInput()};h.prototype.sliderValueChanged=function(){switch(this.ColorMode){case "h":this.cvp.hueInput.value=
Math.round(360-this.slider.yValue);360==this.cvp.hueInput.value&&(this.cvp.hueInput.value=0);break;case "s":this.cvp.saturationInput.value=Math.round(100-this.slider.yValue);break;case "v":this.cvp.valueInput.value=Math.round(100-this.slider.yValue);break;case "r":this.cvp.redInput.value=Math.round(255-this.slider.yValue);break;case "g":this.cvp.greenInput.value=Math.round(255-this.slider.yValue);break;case "b":this.cvp.blueInput.value=Math.round(255-this.slider.yValue);break;case "h2":this.cvp.hue2Input.value=
Math.round(360-this.slider.yValue);360==this.cvp.hue2Input.value&&(this.cvp.hue2Input.value=0);break;case "s2":this.cvp.saturation2Input.value=Math.round(100-this.slider.yValue);break;case "l":this.cvp.lightnessInput.value=Math.round(100-this.slider.yValue)}switch(this.ColorMode){case "h":case "s":case "v":this.cvp.setValuesFromHsv();break;case "r":case "g":case "b":this.cvp.setValuesFromRgb();break;case "h2":case "s2":case "l":this.cvp.setValuesFromHsl()}this.updateVisuals();this.updateGradientFromInput()};
h.prototype.opacitySliderValueChanged=function(){this.opacityInput.value=parseInt(this.opacitySlider.xValue);this.cvp.setValuesFromOpacity();this.updateVisuals();this.updateGradientFromInput()};h.prototype.positionArrows=function(){this.color=this.cvp.color;var d=0;switch(this.ColorMode){case "h":d=360-this.color.h;break;case "s":d=100-this.color.s;break;case "v":d=100-this.color.v;break;case "r":d=255-this.color.r;break;case "g":d=255-this.color.g;break;case "b":d=255-this.color.b;break;case "h2":d=
360-this.color.h2;break;case "s2":d=100-this.color.s2;break;case "l":d=100-this.color.l}this.slider.yValue=d;this.slider.setArrowPositionFromValues();var e=d=0;switch(this.ColorMode){case "h":d=this.color.s;e=100-this.color.v;break;case "s":d=this.color.h;e=100-this.color.v;break;case "v":d=this.color.h;e=100-this.color.s;break;case "r":d=this.color.b;e=256-this.color.g;break;case "g":d=this.color.b;e=256-this.color.r;break;case "b":d=this.color.r;e=256-this.color.g;break;case "h2":d=this.color.s2;
e=100-this.color.l;break;case "s2":d=this.color.h2;e=100-this.color.l;break;case "l":d=this.color.h2,e=100-this.color.s2}this.map.xValue=d;this.map.yValue=e;this.map.setArrowPositionFromValues()};h.prototype.positionOpacityArrows=function(){this.opacitySlider.xValue=parseInt(this.opacityInput.value);this.opacitySlider.setArrowPositionFromValues()};h.prototype.updateVisuals=function(d){this.updatePreview();this.updateMapVisuals();this.updateSliderVisuals();this.updateTarget();this.cpLibrary.color=
this.cvp.color;this.cssText.innerHTML=this.getCss();this.cssText.title=this.cssText.innerHTML.replace(/<[^>]+>/g,"  ");d||this.settings.gradient&&this.settings.gradient.updateVisuals()};h.prototype.updateTarget=function(d){if(this.settings.target&&!this.settings.gradient)try{for(d=0;d<this.settings.target.length;d++){var e=this.settings.target[d];if("undefined"!=typeof e.property&&(e.property&&(e.element.style["backgroundImage"==e.property?"background":e.property]=this.cvp.color.rgbString),e.valueAttribute)){e.element[e.valueAttribute]=
this.cvp.color.rgbString;var c="contrast"==e.textColor?$msRoot.colorMethods.highlightcolor(this.cvp.redInput.value,this.cvp.greenInput.value,this.cvp.blueInput.value):this.cvp.color.rgbString;e.element.style.color=c}}"undefined"!==typeof this.settings.cbChange&&this.settings.cbChange(this,this.cvp.color)}catch(g){console.log("ColorPicker.updateTarget: "+g.message)}};h.prototype.updatePreview=function(){try{0==this.cvp.color.hex.length?(this.notSetCheck.checked=!0,this.preview.style.removeProperty("background-color")):
(this.notSetCheck.checked=!1,this.preview.style.backgroundColor=this.cvp.color.rgbString),this.previewOrigSet||(this.previewOrigSet=!0,this.previewOrig.style.backgroundColor=this.preview.style.backgroundColor),this.opacityInput.style.color=0==this.opacityInput.value?"red":"black"}catch(d){}};h.prototype.updateMapVisuals=function(){this.color=this.cvp.color;switch(this.ColorMode){case "h":var d=new $msRoot.ColorPicker.Color({h:this.color.h,s:100,v:100});this.setBG(this.mapL1,d.hex);break;case "s":this.setAlpha(this.mapL2,
100-this.color.s);break;case "v":this.setAlpha(this.mapL2,this.color.v);break;case "r":this.setAlpha(this.mapL2,this.color.r/256*100);break;case "g":this.setAlpha(this.mapL2,this.color.g/256*100);break;case "b":this.setAlpha(this.mapL2,this.color.b/256*100);break;case "h2":d=new $msRoot.ColorPicker.Color({h2:this.color.h2,s2:100,l:50});this.setBG(this.mapL1,d.hex);break;case "s2":this.setBG(this.mapL1b,"rgb(128,128,128)");this.setAlpha(this.mapL1b,Math.min(99,100-this.color.s2));break;case "l":50<
this.color.l?this.setBG(this.mapL2,"white"):this.setBG(this.mapL2,"black"),this.setAlpha(this.mapL2,Math.min(99,2*Math.abs(this.color.l-50)))}};h.prototype.updateSliderVisuals=function(){this.color=this.cvp.color;switch(this.ColorMode){case "s":var d=new $msRoot.ColorPicker.Color({h:this.color.h,s:100,v:this.color.v});this.setBG(this._barL3,d.hex);break;case "v":d=new $msRoot.ColorPicker.Color({h:this.color.h,s:this.color.s,v:100});this.setBG(this._barL3,d.hex);break;case "r":case "g":case "b":var e=
0,c=0;"r"==this.ColorMode?(e=this.cvp.blueInput.value,c=this.cvp.greenInput.value):"g"==this.ColorMode?(e=this.cvp.blueInput.value,c=this.cvp.redInput.value):"b"==this.ColorMode&&(e=this.cvp.redInput.value,c=this.cvp.greenInput.value);d=e/256*100;var g=c/256*100;e=(256-e)/256*100;c=(256-c)/256*100;this.setAlpha(this._barL4,g>e?e:g);this.setAlpha(this._barL3,g>d?d:g);this.setAlpha(this._barL2,c>d?d:c);this.setAlpha(this._barL1,c>e?e:c);break;case "s2":d=new $msRoot.ColorPicker.Color({h:this.color.h2,
s:100,v:this.color.l});this.setBG(this._barL3,d.hex);break;case "l":d=new $msRoot.ColorPicker.Color({h2:this.color.h2,s2:this.color.s2,l:50}),this.setBG(this._barL3,d.hex)}};h.prototype.setBG=function(d,e){try{d.style.backgroundColor=e}catch(c){}};h.prototype.setImg=function(d,e){e.indexOf("png")&&this.isLessThanIE7?(d.pngSrc=e,d.src=this.settings.imgPath+"blank.gif",d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"');"):d.src=e};h.prototype.setAlpha=function(d,e){if(this.isLessThanIE7){var c=
d.pngSrc;null!=c&&-1==c.indexOf("map-hue")&&-1==c.indexOf("map-hsl-hue")&&(d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"') progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")}else d.style.opacity=e/100};h.prototype.save=function(){this.settings.gradient?this.hide():this.close()};h.prototype.cancel=function(d){this.settings.allowGradient&&-1!==this.settings.startColor.indexOf("gradient")?this.openGradient():this.setColor(this.settings.startColor);this.settings.gradient?
this.hide():this.close()};h.prototype.close=function(){window.removeEventListener("keyup",this.keyupFn);this.container.parentNode&&this.container.parentNode.removeChild(this.container);for(var d=0;d<l.length;d++)if(l[d].id==this.id){l.splice(d,1);break}this.map.close();this.slider.close();this.opacitySlider.close();this.cpLibrary.close();$msRoot.CustomDialog.closeDialogs(this.id);if(this.settings.cbClose)if(Array.isArray(this.settings.cbClose))for(d=0;d<this.settings.cbClose.length;d++)this.settings.cbClose[d](this);
else this.settings.cbClose(this)};h.prototype.bringToFront=function(){var d=0;if($msRoot.Gradient){for(var e=0;e<l.length;e++)l.id!==this.id&&(d=Math.max(d,parseInt(l[e].container.style.zIndex)));var c=$msRoot.Gradient.getInstance();for(e=0;e<c.length;e++)d=Math.max(d,parseInt(c[e].container.style.zIndex));this.container.style.zIndex=Math.max(parseInt(this.container.style.zIndex),d+1)}};h.prototype.createForm=function(){var d=this,e=document.createElement("div");e.id=this.id+"container";e.className=
"ms-colorpicker draggable";e.style.zIndex=this.settings.zIndex+l.length;var c=document.createElement("div");c.id=this.id+"title-bar";c.className="ms-title-bar";c.style.height="20px";c.style.lineHeight="20px";c.style.textAlign="center";c.addEventListener("mousedown",function(){this.bringToFront()}.bind(this));e.appendChild(c);var g=(new $msRoot.LocalData).getProperty("colorpicker","pin");if(this.settings.pin||g){var a=document.createElement("div");a.id=this.id+"pin-button";(this.settings.startPinned||
g)&&this.settings.gradient?(this.isPinned=!0,a.className="ms-pinned-button"):a.className="ms-unpinned-button";a.addEventListener("click",function(){this.pin()}.bind(this));c.appendChild(a)}a=$ms.createCloseButton(this.id,function(){this.settings.gradient?this.hide():this.close()}.bind(this));c.appendChild(a);this.settings.pin&&(a=document.createElement("div"),a.id=this.id+"pin-button",a.className="ms-pin-button display-none",a.addEventListener("click",function(){this.pin(!0)}.bind(this)),c.appendChild(a),
a=document.createElement("div"),a.id=this.id+"unpin-button",a.className="ms-unpin-button",a.addEventListener("click",function(){this.pin()}.bind(this)),c.appendChild(a));c=document.createElement("table");c.style.display="inline-block";c.style.verticalAlign="top";var b=[45,200];var f=document.createElement("colgroup");c.appendChild(f);for(a=0;a<b.length;a++){var k=document.createElement("col");f.appendChild(k);k.style.width=b[a]+"px"}g=document.createElement("tr");b=document.createElement("td");b.colSpan=
"2";b.style.verticalAlign="top";g.appendChild(b);this.colorMap=document.createElement("div");b.appendChild(this.colorMap);b=document.createElement("td");b.style.verticalAlign="top";g.appendChild(b);c.appendChild(g);this.colorBar=document.createElement("div");b.appendChild(this.colorBar);f=document.createElement("tr");b=document.createElement("td");b.colSpan="2";a=document.createElement("input");a.type="checkbox";a.style.verticalAlign="middle";a.id=this.id+"not-set-check";b.appendChild(a);a=document.createElement("label");
a.htmlFor=this.id+"not-set-check";a.innerText="Not Set";a.style.marginLeft="5px";b.appendChild(a);f.appendChild(b);c.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"opacity";a.className="ms-cp-label";b.appendChild(a);b.innerHTML="Opacity";f.appendChild(b);b=document.createElement("td");this.opacitySlider=new $msRoot.Slider(void 0,{min:0,max:100,snapX:1,sliderWidth:145,inputWidth:35,inputId:this.id+"opacity-input",textAfterInput:" %",
sliderInput:!0,parentNode:b,imgPath:this.settings.imgPath});this.opacitySlider.onValuesChanged=function(){d.opacitySliderValueChanged()};f.appendChild(b);c.appendChild(f);f=document.createElement("tr");b=document.createElement("td");b.colSpan="3";g=document.createElement("div");g.className="ms-cp-css";b.appendChild(g);f.appendChild(b);c.appendChild(f);var m=document.createElement("div");m.id=this.id+"css-text";m.className="ms-cp-css-text";g.appendChild(m);b=document.createElement("div");b.innerHTML=
"Copy";b.className="ms-gradient-button ms-cp-copy-button";b.addEventListener("click",function(n){n=m.innerHTML.replace(/<[^>]+>/g,"\n").replace(/\n\s*\n/g,"\n");$ms.copyToClipboard(n);$ms.removeClass($ms.$(this.id+"copy-status"),"display-none");setTimeout(function(){$ms.addClass($ms.$(this.id+"copy-status"),"display-none")}.bind(this),1E3)}.bind(this));g.appendChild(b);b=document.createElement("div");b.id=this.id+"copy-status";b.className="ms-gradient-copy-status display-none";b.innerHTML="Copied to Clipboard";
g.appendChild(b);g=document.createElement("table");g.style.display="inline-block";g.style.verticalAlign="top";b=[20,12,45];f=document.createElement("colgroup");g.appendChild(f);for(a=0;a<b.length;a++)k=document.createElement("col"),f.appendChild(k),k.style.width=b[a]+"px";f=document.createElement("tr");b=document.createElement("td");b.colSpan="3";a=document.createElement("div");a.style.width="80px";a.style.marginTop="5px";a.style.textAlign="center";a.innerHTML="New";b.appendChild(a);k=document.createElement("div");
k.style.width="80px";k.style.height="32px";k.style.borderTop="solid 1px #000";k.style.borderRight="solid 1px #000";k.style.borderLeft="solid 1px #000";k.className="ms-cp-transparent-grid";b.appendChild(k);a=document.createElement("div");a.id=this.id+"preview";a.style.width="100%";a.style.height="100%";k.appendChild(a);k=document.createElement("div");k.style.width="80px";k.style.height="32px";k.style.borderBottom="solid 1px #000";k.style.borderRight="solid 1px #000";k.style.borderLeft="solid 1px #000";
k.className="ms-cp-transparent-grid";k.addEventListener("click",function(){this.cvp.hexInput.value=$msRoot.colorMethods.colorInfo(this.settings.startColor).hex;this.opacityInput.value=parseInt(100*$msRoot.colorMethods.colorInfo(this.settings.startColor).alpha);this.cvp.setValuesFromHex();this.positionArrows();this.updateVisuals()}.bind(this));b.appendChild(k);a=document.createElement("div");a.id=this.id+"preview-orig";a.style.width="100%";a.style.height="100%";k.appendChild(a);a=document.createElement("div");
a.style.width="80px";a.style.textAlign="center";a.style.marginBottom="5px";a.innerHTML="Original";b.appendChild(a);f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"hue-radio";a.value="h";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"hue-radio";a.innerText="H:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");
a=document.createElement("input");a.type="text";a.id=this.id+"hue-input";a.value="0";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" \u00b0"));b.style.whiteSpace="nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"saturation-radio";a.value="s";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+
"saturation-radio";a.innerText="S:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+"saturation-input";a.value="100";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" %"));b.style.whiteSpace="nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"brightness-radio";a.value="v";b.appendChild(a);
f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"brightness-radio";a.innerText="B:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+"brightness-input";a.value="100";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" %"));b.style.whiteSpace="nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");
b.colSpan="3";b.style.height="5px";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"red-radio";a.value="r";b.appendChild(a);f.appendChild(b);g.appendChild(f);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"red-radio";b.appendChild(a);b.innerHTML="R:";f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+
"red-input";a.value="255";a.style.width="40px";b.appendChild(a);f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"green-radio";a.value="g";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"green-radio";b.appendChild(a);b.innerHTML="G:";f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type=
"text";a.id=this.id+"green-input";a.value="0";a.style.width="40px";b.appendChild(a);f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"blue-radio";a.value="b";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"blue-radio";b.appendChild(a);b.innerHTML="B:";f.appendChild(b);b=document.createElement("td");a=document.createElement("input");
a.type="text";a.id=this.id+"blue-input";a.value="0";a.style.width="40px";b.appendChild(a);f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");b.colSpan="3";b.style.height="5px";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"hue2-radio";a.value="h2";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");
a.htmlFor=this.id+"hue2-radio";a.innerText="H:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+"hue2-input";a.value="0";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" \u00b0"));b.style.whiteSpace="nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("input");a.type="radio";a.id=this.id+"saturation2-radio";a.value=
"s";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"saturation2-radio";a.innerText="S:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+"saturation2-input";a.value="100";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" %"));b.style.whiteSpace="nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");
a=document.createElement("input");a.type="radio";a.id=this.id+"lightness-radio";a.value="l";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("label");a.htmlFor=this.id+"lightness-radio";a.innerText="L:";b.appendChild(a);f.appendChild(b);b=document.createElement("td");a=document.createElement("input");a.type="text";a.id=this.id+"lightness-input";a.value="100";a.style.width="40px";b.appendChild(a);b.appendChild(document.createTextNode(" %"));b.style.whiteSpace=
"nowrap";f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");b.innerHTML="Hex:";f.appendChild(b);b=document.createElement("td");b.colSpan="2";a=document.createElement("input");a.type="text";a.id=this.id+"hex-input";a.value="";a.style.width="65px";b.appendChild(a);f.appendChild(b);g.appendChild(f);f=document.createElement("tr");b=document.createElement("td");a=document.createElement("label");a.innerText="Name:";a.id=this+"name-label";a.style.marginLeft="-12px";
b.appendChild(a);f.appendChild(b);b=document.createElement("td");b.colSpan="2";a=document.createElement("input");a.type="text";a.id=this.id+"color-name";a.value="";a.title="Enter the name of a color (e.g. blue)";a.style.width="65px";b.appendChild(a);f.appendChild(b);g.appendChild(f);e.appendChild(c);e.appendChild(g);c=document.createElement("div");c.className="ms-cp-right-outer";e.appendChild(c);g=document.createElement("div");g.style.height="110px";c.appendChild(g);b=document.createElement("div");
b.innerHTML="Ok";b.className="ms-gradient-button ms-cp-button";b.style.display="block";b.style.width="115px";b.addEventListener("click",function(n){this.save()}.bind(this));g.appendChild(b);b=document.createElement("div");b.innerHTML="Cancel";b.className="ms-gradient-button ms-cp-button";b.style.display="block";b.style.width="115px";b.addEventListener("click",function(n){this.cancel()}.bind(this));g.appendChild(b);this.settings.allowGradient&&!this.settings.gradient&&(b=document.createElement("div"),
b.type="button",b.id=this.id+"add-gradient",b.innerHTML="Add Gradient",b.className="ms-gradient-button ms-cp-button",b.title="Click to create a gradient",b.style.display="block",b.style.width="115px",b.addEventListener("click",function(){this.openGradient(void 0,!0)}.bind(this)),g.appendChild(b));c.appendChild(this.cpLibrary.createForm());a=document.createElement("div");a.style.display="none";a.id=this.id+"cpimages";c=document.createElement("img");c.src=this.settings.imgPath+"rangearrows.gif";a.appendChild(c);
c=document.createElement("img");c.src=this.settings.imgPath+"mappoint.gif";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-saturation.png";c=document.createElement("img");c.src=this.settings.imgPath+"bar-brightness.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-blue-tl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-blue-tr.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+
"bar-blue-bl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-blue-br.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-red-tl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-red-tr.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-red-bl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-red-br.png";a.appendChild(c);
c=document.createElement("img");c.src=this.settings.imgPath+"bar-green-tl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-green-tr.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-green-bl.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"bar-green-br.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-red-max.png";a.appendChild(c);c=document.createElement("img");
c.src=this.settings.imgPath+"map-red-min.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-green-max.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-green-min.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-blue-max.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-blue-min.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+
"map-saturation.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-saturation-overlay.png";a.appendChild(c);c=document.createElement("img");c.src=this.settings.imgPath+"map-brightness.png";a.appendChild(c);$ms.$("cp-map-hue-png")||(c=document.createElement("img"),c.src=this.settings.imgPath+"map-hue.png",c.id="cp-map-hue-png",a.appendChild(c),e.appendChild(a));c=document.createElement("img");c.src=this.settings.imgPath+"map-hsl-hue.png";a.appendChild(c);e.appendChild(a);
this.settings.container.appendChild(e);c=document.createElement("img");c.src=this.settings.imgPath+"map-hsl-saturation.png";a.appendChild(c);e.appendChild(a);this.settings.container.appendChild(e);c=document.createElement("img");c.src=this.settings.imgPath+"map-hsl-saturation-overlay.png";a.appendChild(c);e.appendChild(a);this.settings.container.appendChild(e);c=document.createElement("img");c.src=this.settings.imgPath+"map-hsl-lightness.png";a.appendChild(c);e.appendChild(a);this.settings.container.appendChild(e);
e.style.fontSize=$ms.targetFontSize(this.settings.fontSize,e);return e};h.prototype.pin=function(){var d=new $msRoot.LocalData;this.isPinned?(this.isPinned=!1,isNaN(parseInt(this.container.style.top))||(this.container.style.top=Math.max(0,parseInt(this.container.style.top)-4)+"px",$ms.removeClass($ms.$(this.id+"pin-button"),"ms-pinned-button"),$ms.addClass($ms.$(this.id+"pin-button"),"ms-unpinned-button"),d.setProperty("colorpicker","pin",!1))):this.settings.gradient&&(this.isPinned=!0,this.pinToGradient(),
d.setProperty("colorpicker","pin",!0))};h.prototype.pinToGradient=function(){if(this.settings.gradient){this.isPinned=!0;var d=$ms.getOffset(this.settings.gradient.container),e=$ms.getOffset(this.container);e=d.top-e.height+"px";var c=d.left+"px";0>parseInt(e)&&(this.settings.gradient.container.style.top=d.top+Math.abs(parseFloat(e))+"px",e="0px");this.container.style.top=e;this.container.style.left=c;$ms.addClass($ms.$(this.id+"pin-button"),"ms-pinned-button");$ms.removeClass($ms.$(this.id+"pin-button"),
"ms-unpinned-button")}};h.prototype.pinGradient=function(){if(this.settings.gradient){var d=$ms.getOffset(this.container),e=d.left+"px";this.settings.gradient.container.style.top=d.top+d.height+"px";this.settings.gradient.container.style.left=e;this.settings.gradient.drop(!0)}};h.prototype.drop=function(d){$ms.hasClass(this.container,"display-none")||(this.map.setPositioningVariables(),this.slider.setPositioningVariables(),this.opacitySlider.setPositioningVariables(),"boolean"==typeof d&&d?this.isPinned&&
this.pinToGradient():this.isPinned&&this.pinGradient())};h.prototype.disableOpacity=function(d){this.opacitySlider.disable();this.opacityInput.disable="disabled";$ms.addClass(this.opacityInput,"ms-disabled")};h.prototype.enableOpacity=function(d){this.opacitySlider.enable();this.opacityInput.removeAttribute("disabled");$ms.removeClass(this.opacityInput,"ms-disabled")};h.prototype.keyup=function(d){27==d.keyCode&&(this.close(),d.stopPropagation())};h.prototype.sliderMouseup=function(d){this.cvp.setColorName()};
h.prototype.getCss=function(){if(this.notSetCheck.checked)return"<span style='color:red'>Color is not set.</span>";var d="<span style='margin-right:5px'>"+this.cvp.color.rgbString+"</span>",e=100==this.opacityInput.value||0==this.opacityInput.value?"hsl("+this.cvp.color.h2+","+this.cvp.color.s2+","+this.cvp.color.l+")":"hsla("+this.cvp.color.h2+","+this.cvp.color.s2+","+this.cvp.color.l+","+$ms.round(this.opacityInput.value/100,2)+")";return d+("<span style='margin-right:5px'>"+e+"</span><span>hsv(")+
(this.cvp.color.h+","+this.cvp.color.s+","+this.cvp.color.v+")</span>")};h.prototype.setColor=function(d){if("undefined"!=typeof d){if("string"==typeof d){var e=$msRoot.colorMethods.colorInfo(d);if(0<d.length&&0==e.rgbString.length)return}else e=d,"undefined"==typeof e.alpha&&(e.alpha=1);this.settings.allowGradient&&"undefined"!==typeof e.gradient?this.openGradient(e.gradient,!0):(this.cvp.hexInput.value=e.hex,this.opacityInput.value=parseInt(100*e.alpha),this.cvp.setValuesFromHex(),this.cpLibrary.colorDeselect(),
this.positionArrows(),this.updateVisuals(),this.updateGradientFromInput())}};h.prototype.openGradient=function(d,e,c){var g="1";"undefined"==typeof d&&(0<this.opacityInput.value.length&&(g=$ms.round(parseFloat(this.opacityInput.value/100),2)),d=this.notSetCheck.checked||""==this.cvp.hexInput.value?$msRoot.colorMethods.rgbToRgba([255,255,255],g):this.cvp.color.rgbString);this.settings.gradient||(g=$ms.getOffset(this.container),g={startColor:this.settings.startColor,imgPath:this.settings.imgPath,target:this.settings.target,
cbChange:this.settings.cbChange,cbCreate:this.settings.cbCreate,cbClose:this.settings.cbClose,top:g.top+window.pageYOffset+"px",left:g.left+window.pageXOffset+"px",zIndex:this.settings.zIndex,cbUpdateColorPicker:this.cbUpdateColorPicker.bind(this),container:this.container.parentNode,colorPicker:e?void 0:this},this.settings.gradient=new $msRoot.Gradient(g));this.settings.gradient.showGradient(d);e?(this.settings.gradient.cbUpdateColorPicker=void 0,this.settings.gradient=void 0,this.close(),c&&this.settings.gradient.close()):
(this.cbUpdateColorPicker(d),this.hide())};h.prototype.cbUpdateColorPicker=function(d){$ms.hasClass(this.container,"display-none")||this.setColor(d)};h.prototype.updateGradientFromInput=function(){this.settings.gradient&&this.settings.cbUpdateGradientFromColor&&(isNaN(this.opacityInput.value)&&(this.opacityInput.value=100),$ms.round(this.opacityInput.value/100,2),this.settings.cbUpdateGradientFromColor(this.cvp.color))};$msRoot.getChildClasses(h,"ColorPicker");return h}();
