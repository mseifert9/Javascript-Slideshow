'use strict';$msRoot.createNS("ColorPicker.ColorValuePicker");
$msRoot.ColorPicker.ColorValuePicker=function(f){function c(a){this.id=a;this.onOpacityValuesChanged=this.onValuesChanged=null;this.hueInput=$ms.$(this.id+"hue-input");this.saturationInput=$ms.$(this.id+"saturation-input");this.valueInput=$ms.$(this.id+"brightness-input");this.redInput=$ms.$(this.id+"red-input");this.greenInput=$ms.$(this.id+"green-input");this.blueInput=$ms.$(this.id+"blue-input");this.hexInput=$ms.$(this.id+"hex-input");this.opacityInput=$ms.$(this.id+"opacity-input");this.hue2Input=
$ms.$(this.id+"hue2-input");this.saturation2Input=$ms.$(this.id+"saturation2-input");this.lightnessInput=$ms.$(this.id+"lightness-input");this.colorNameInput=$ms.$(this.id+"color-name");this.hueInput.addEventListener("keyup",function(b){this.hsvKeyup(b)}.bind(this));this.saturationInput.addEventListener("keyup",function(b){this.hsvKeyup(b)}.bind(this));this.valueInput.addEventListener("keyup",function(b){this.hsvKeyup(b)}.bind(this));this.hueInput.addEventListener("blur",function(b){this.hsvBlur(b)}.bind(this));
this.saturationInput.addEventListener("blur",function(b){this.hsvBlur(b)}.bind(this));this.valueInput.addEventListener("blur",function(b){this.hsvBlur(b)}.bind(this));this.hueInput.addEventListener("keydown",function(b){this.keydown(b,0,360,this.hsvKeyup)}.bind(this));this.saturationInput.addEventListener("keydown",function(b){this.keydown(b,0,100,this.hsvKeyup)}.bind(this));this.valueInput.addEventListener("keydown",function(b){this.keydown(b,0,100,this.hsvKeyup)}.bind(this));this.redInput.addEventListener("keyup",
function(b){this.rgbKeyup(b)}.bind(this));this.greenInput.addEventListener("keyup",function(b){this.rgbKeyup(b)}.bind(this));this.blueInput.addEventListener("keyup",function(b){this.rgbKeyup(b)}.bind(this));this.redInput.addEventListener("blur",function(b){this.rgbBlur(b)}.bind(this));this.greenInput.addEventListener("blur",function(b){this.rgbBlur(b)}.bind(this));this.blueInput.addEventListener("blur",function(b){this.rgbBlur(b)}.bind(this));this.redInput.addEventListener("keydown",function(b){this.keydown(b,
0,255,this.rgbKeyup)}.bind(this));this.greenInput.addEventListener("keydown",function(b){this.keydown(b,0,255,this.rgbKeyup)}.bind(this));this.blueInput.addEventListener("keydown",function(b){this.keydown(b,0,255,this.rgbKeyup)}.bind(this));this.hue2Input.addEventListener("keyup",function(b){this.hslKeyup(b)}.bind(this));this.saturation2Input.addEventListener("keyup",function(b){this.hslKeyup(b)}.bind(this));this.lightnessInput.addEventListener("keyup",function(b){this.hslKeyup(b)}.bind(this));this.hue2Input.addEventListener("blur",
function(b){this.hslBlur(b)}.bind(this));this.saturation2Input.addEventListener("blur",function(b){this.hslBlur(b)}.bind(this));this.lightnessInput.addEventListener("blur",function(b){this.hslBlur(b)}.bind(this));this.hue2Input.addEventListener("keydown",function(b){this.keydown(b,0,360,this.hslKeyup)}.bind(this));this.saturation2Input.addEventListener("keydown",function(b){this.keydown(b,0,100,this.hslKeyup)}.bind(this));this.lightnessInput.addEventListener("keydown",function(b){this.keydown(b,0,
100,this.hslKeyup)}.bind(this));this.hexInput.addEventListener("keyup",function(b){this.hexKeyup(b)}.bind(this));this.hexInput.addEventListener("keydown",function(b){this.keydown(b,0,255,this.hexKeyup)}.bind(this));this.opacityInput.addEventListener("blur",function(b){this.opacityBlur(b)}.bind(this));this.opacityInput.addEventListener("keydown",function(b){this.keydown(b,0,100,this.opacityKeyup)}.bind(this));this.opacityInput.addEventListener("keyup",function(b){this.keydown(b,0,100,this.opacityKeyup)}.bind(this));
this.colorNameInput.addEventListener("keyup",function(b){this.setValuesFromName()}.bind(this));this.color=new $msRoot.ColorPicker.Color;""!=this.hexInput.value&&this.color.setHex(this.hexInput.value);this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v}c.prototype.hsvKeyup=function(a){if(""!=a.target.value&&
(this.validateHsv(a),this.setValuesFromHsv(),this.onValuesChanged))this.onValuesChanged()};c.prototype.rgbKeyup=function(a){if(""!=a.target.value&&(this.validateRgb(a),this.setValuesFromRgb(),this.onValuesChanged))this.onValuesChanged()};c.prototype.hslKeyup=function(a){if(""!=a.target.value&&(this.validateHsl(a),this.setValuesFromHsl(),this.onValuesChanged))this.onValuesChanged()};c.prototype.hexKeyup=function(a){if(""!=a.target.value&&(this.validateHex(a),this.setValuesFromHex(),this.onValuesChanged))this.onValuesChanged()};
c.prototype.opacityKeyup=function(a){""!=a.target.value&&this.opacityInputValueChanged(a.target)};c.prototype.hsvBlur=function(a){""==a.target.value&&this.setValuesFromRgb()};c.prototype.hslBlur=function(a){""==a.target.value&&this.setValuesFromHsl()};c.prototype.rgbBlur=function(a){""==a.target.value&&this.setValuesFromHsv()};c.prototype.hexBlur=function(a){""==a.target.value&&this.setValuesFromHsv()};c.prototype.opacityKeyup=function(){var a=parseInt(this.opacityInput.value);0==a&&a!==this.opacityInput.value&&
(a=100);if(0>a||100<a)a=100;this.opacityInput.value=a;if(this.onOpacityValuesChanged)this.onOpacityValuesChanged()};c.prototype.opacityBlur=function(a){""==a.target.value&&this.opacityKeyup()};c.prototype.keydown=function(a,b,e,d){38==a.keyCode?"undefined"!=typeof b&&(a.target.value=Math.min(parseInt(a.target.value)+1,e),d&&d.call(this,a),a.stopPropagation()):40==a.keyCode?"undefined"!=typeof b&&(a.target.value=Math.max(parseInt(a.target.value)-1,b),d&&d.call(this,a),a.stopPropagation()):d&&d.call(this,
a)};c.prototype.validateRgb=function(a){if(!this._keyNeedsValidation(a))return a;this.redInput.value=this._setValueInRange(this.redInput.value,0,255);this.greenInput.value=this._setValueInRange(this.greenInput.value,0,255);this.blueInput.value=this._setValueInRange(this.blueInput.value,0,255)};c.prototype.validateHsv=function(a){if(!this._keyNeedsValidation(a))return a;this.hueInput.value=this._setValueInRange(this.hueInput.value,0,359);this.saturationInput.value=this._setValueInRange(this.saturationInput.value,
0,100);this.valueInput.value=this._setValueInRange(this.valueInput.value,0,100)};c.prototype.validateHsl=function(a){if(!this._keyNeedsValidation(a))return a;this.hue2Input.value=this._setValueInRange(this.hue2Input.value,0,359);this.saturation2Input.value=this._setValueInRange(this.saturation2Input.value,0,100);this.lightnessInput.value=this._setValueInRange(this.lightnessInput.value,0,100)};c.prototype.validateHex=function(a){if(!this._keyNeedsValidation(a))return a;a=(new String(this.hexInput.value)).toUpperCase();
"#"==a.substr(0,1)&&(a=a.substr(1));a=a.replace(/[^A-F0-9]/g,"0");6<a.length&&(a=a.substring(0,6));this.hexInput.value="#"+a};c.prototype._keyNeedsValidation=function(a){return 9==a.keyCode||16==a.keyCode||38==a.keyCode||29==a.keyCode||40==a.keyCode||37==a.keyCode||a.ctrlKey&&(a.keyCode=="c".charCodeAt()||a.keyCode=="v".charCodeAt())?!1:!0};c.prototype._setValueInRange=function(a,b,e){if(""==a||isNaN(a))return b;a=parseInt(a);return a>e?e:a<b?b:a};c.prototype.setValuesFromRgb=function(){this.color.setRgb(this.redInput.value,
this.greenInput.value,this.blueInput.value,this.opacityInput.value);this.hexInput.value=this.color.hex;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v;this.hue2Input.value=this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l};c.prototype.setValuesFromHsv=function(){this.color.setHsv(parseInt(this.hueInput.value),parseInt(this.saturationInput.value),parseInt(this.valueInput.value),this.opacityInput.value);
this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hue2Input.value=this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l};c.prototype.setValuesFromHsl=function(){this.color.setHsl(parseInt(this.hue2Input.value),parseInt(this.saturation2Input.value),parseInt(this.lightnessInput.value),this.opacityInput.value);this.hexInput.value=this.color.hex;this.redInput.value=this.color.r;
this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v};c.prototype.setValuesFromHex=function(){this.color.setHex(this.hexInput.value,this.opacityInput.value);this.redInput.value=this.color.r;this.greenInput.value=this.color.g;this.blueInput.value=this.color.b;this.hueInput.value=this.color.h;this.saturationInput.value=this.color.s;this.valueInput.value=this.color.v;this.hue2Input.value=
this.color.h2;this.saturation2Input.value=this.color.s2;this.lightnessInput.value=this.color.l};c.prototype.setValuesFromOpacity=function(){this.color.setOpacity(this.opacityInput.value)};c.prototype.setColorName=function(){var a=$msRoot.colorMethods.colorNameInfo(this.hexInput.value,"name");this.colorNameInput.value=a;this.validName=!0};c.prototype.setValuesFromName=function(){if(0==this.colorNameInput.value.length)this.validName="empty";else{this.validName=!1;var a=$msRoot.colorMethods.colorNameInfo(this.colorNameInput.value,
"hex");0<a.length&&(this.validName=!0,this.hexInput.value=a,this.setValuesFromHex())}if(this.onValuesChanged)this.onValuesChanged()};return c}();
