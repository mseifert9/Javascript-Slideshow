'use strict';$msRoot.createNS("Slideshow");
$msRoot.Slideshow=function(H){function e(a){this.id;this.divWrapper;this.divTop;this.divMiddle;this.divLarge=[];this.divSpanButtons;this.divButtons;this.divFilmstrip;this.divSettings;this.imgNextLarge;this.imgPrevLarge;this.imgCloseLarge;this.objMagnifier;this.keypressListener;this.wheelListener;this.mouseupListener;this.oldSlide=this.slide=-1;this.files=[];this.img=[];this.exif=[];this.anchor=[];this.thumbSize=[];this.largeSize=[];this.thumbLoaded=[];this.largeLoaded=[];this.count;this.buttonDivHeight;
this.orien="both";this.ssDivWidth=0;this.allLoaded=!1;this.preloadCount=3;this.slideShowRunning=!1;this.ssRafId;this.transitionRafId;this.animations=[];this.position={top:0,left:0};this.isFullScreen=!1;this.isTouch=$ms.isTouchDevice();this.touch;this.filmstripState="visible";this.$resizable;this.filmstripImageBorderWidth=0;this.dropped=!1;this.settings=$ms.cloneSettings(e.getDefaultSettings(),a);this.settings.filmstripImageHeight=parseInt(this.settings.filmstripImageHeight);this.magZoom=this.settings.initMagZoom;
this.zoom=1;this.id="ms-ss"+q++ +"-";u.push(this);this.settings.cbCreate&&this.settings.cbCreate(this)}var u=[],q=0,r,g,l,t,z,y,A,G="none fade h-move h-move-fade size size-fade".split(" "),M={title:"",slideshowHeight:void 0,slideshowWidth:void 0,slideshowTop:void 0,slideshowLeft:void 0,center:!0,slideshowInterval:4E3,slideshowWrap:!1,ssTransitionSeconds:1,ssTransitionEffect:1,paddingTop:5,container:void 0,zIndex:void 0,resizeWithWindow:!1,playOnEnter:!1,showFilmstrip:!0,showFilmstripToggle:!1,showButtons:!0,
showExitButton:!0,showZoomButtons:!0,showPlayPauseButton:!0,showFullScreenButton:!0,showDownloadButton:!1,showPrintButton:!1,showOtherButton:!1,showLocateButton:!1,showFirstLastButtons:!0,showText:!0,linesOfText:2,resizable:!1,draggable:!1,escapeKeyCloses:!1,arrowKeysNavigate:!1,zoomMode:"zoom",initMagZoom:4,magnifierSize:{height:200,width:200},divExternalMagnifier:void 0,magnifierStyles:void 0,cbCreate:void 0,cbClose:void 0,wrapperBackground:"rgb(70,70,70)",wrapperBorder:"1px solid grey",opaquePosition:"absolute",
opaqueBackground:"rgb(70,70,70,1)",imageBorder:"2px solid white",filmstripBackground:"rgb(170,170,170)",filmstripImageBorder:"2px solid white",filmstripImageHeight:90,waitAnimation:0,cbContextMenu:void 0};$ms.sourceFiles.add([{file:"dragdrop.min.js",ns:"DragDrop"},{file:"resizable.min.js",ns:"Resize"}]);$ms.sourceFiles.load();e.getDefaultSettings=function(){function a(b){if(null==b||"object"!==typeof b)return b;b=Object.assign({},b);for(var c in b)b[c]=a(b[c]);return b}return a(M)};if(CSSRule.KEYFRAMES_RULE)var k=
"";else CSSRule.WEBKIT_KEYFRAMES_RULE&&(k="-webkit-");e.getInstance=function(a){if("undefined"!==typeof a)for(var b=0;b<u.length;b++){if(u[b].id===a)return u[b]}else return u};e.prototype.resize=function(){var a=this.settings.resizable?6:0,b=Math.max(window.innerHeight,document.documentElement.clientHeight)-10,c=Math.max(window.innerWidth,document.documentElement.clientWidth)-10,d=0,f=$ms.$(this.id+"title-bar");f&&(d=parseInt(f.style.height));g=this.settings.filmstripImageHeight+this.filmstripImageBorderWidth+
23;this.settings.showFilmstrip&&"hidden"!==this.filmstripState||(g=0);t=25*this.settings.linesOfText;this.settings.showText||(t=0);z=41;this.settings.showButtons||(z=0);r=100+t+z+g+d+a;if(this.settings.container!==document.body&&this.settings.container.offsetParent)var h=this.settings.container.offsetParent.getBoundingClientRect();this.isFullScreen?(y=c,A=b):this.settings.resizeWithWindow?this.$resizable&&this.$resizable.resizing?(y=parseInt(this.settings.container.style.width),A=parseInt(this.settings.container.style.height)):
this.settings.container===document.body?(y=c,A=b):(this.settings.container.style.left="0",this.settings.container.style.top="0",this.divWrapper.style.margin="initial",f=this.settings.container.offsetParent.getBoundingClientRect(),this.settings.container.getBoundingClientRect(),y=Math.min(c,h.width-f.left),A=Math.min(b,h.height-f.top),this.settings.container.style.width=y+"px",this.settings.container.style.height=A+"px"):this.settings.container!==document.body?(this.$resizable&&this.$resizable.resizing?
(this.settings.slideshowHeight=parseInt(this.settings.container.style.height),this.settings.slideshowWidth=parseInt(this.settings.container.style.width)):(this.settings.slideshowHeight&&(this.settings.container.style.height=this.settings.slideshowHeight+"px"),this.settings.slideshowWidth&&(this.settings.container.style.width=this.settings.slideshowWidth+"px")),this.settings.center&&!this.dropped?(h=this.settings.container.getBoundingClientRect(),this.settings.container.style.left=(c-h.width)/2+"px",
this.settings.container.style.top=(b-h.height)/2+"px"):("undefined"===typeof this.settings.slideshowLeft||""===this.settings.slideshowLeft||isNaN(this.settings.slideshowTop)||(this.settings.container.style.top=this.settings.slideshowTop+"px"),isNaN(this.settings.slideshowLeft)||(this.settings.container.style.left=this.settings.slideshowLeft+"px")),h=this.settings.container.getBoundingClientRect(),y=Math.max(h.width,200),A=Math.max(h.height,r),h.height<r&&(this.settings.container.style.height=r+"px"),
200>h.width&&(this.settings.container.style.width="200px"),"relative"!==this.settings.container.style.position&&"absolute"!==this.settings.container.style.position&&"fixed"!==this.settings.container.style.position&&(this.settings.container.style.position="relative")):(y=this.settings.slideshowWidth?this.settings.slideshowWidth:c,A=this.settings.slideshowHeight?Math.max(this.settings.slideshowHeight,r):b);l=A-(t+z+g+d+a+10+4);l=Math.max(l,75);this.divWrapper.style.width=y+"px";this.divMiddle.style.height=
parseInt(l+t)+"px"};e.prototype.init=function(a,b){if("undefined"===typeof a)alert("No file variable passed to slideshow");else if(0===a.length)alert("No files passed to slideshow");else{b="undefined"===typeof b?0:parseInt(b);for(var c=0;c<a.length;c++)if(this.validExtension(a[c].filename)){this.files.push(new this.emptyFile);for(var d in a[c])a[c].hasOwnProperty(d)&&(this.files[this.files.length-1][d]=a[c][d])}else c<b&&--b;if(this.settings.container===document.body||"undefined"===typeof this.settings.container)this.settings.wrapperBorder=
"none";this.filmstripImageBorderWidth=this.borderWidth(this.settings.filmstripImageBorder);this.imageBorderWidth=this.borderWidth(this.settings.imageBorder);this.createForm(b);this.ssshow();this.position={top:window.pageYOffset,left:window.pageXOffset};window.scrollTo(0,0)}};e.prototype.borderWidth=function(a){var b=document.createElement("img");b.style.border=a;a=parseFloat(getComputedStyle(b).getPropertyValue("border-top-width"));return a=isNaN(a)?0:2*$ms.round(a,0)};e.prototype.emptyFile=function(){return{filename:void 0,
thumb:void 0,downloadLink:void 0,locateLink:void 0,otherLink:void 0,logPrintFn:void 0}};e.prototype.createForm=function(a){"undefined"===typeof this.settings.container?this.settings.container=document.body:("string"===typeof this.settings.container&&(this.settings.container=$ms.$(this.settings.container)),"undefined"!==typeof this.settings.zIndex&&(this.settings.container.style.zIndex=this.settings.zIndex));var b=$ms.$(this.id+"opaque");b&&b.parentNode.removeChild(b);b=document.createElement("div");
b.id=this.id+"opaque";b.className="ss-opaque";b.style.background=this.settings.opaqueBackground;b.style.position=this.settings.opaquePosition;this.settings.container.appendChild(b);this.divWrapper=document.createElement("div");this.divWrapper.className="ss-wrapper";this.divWrapper.id=this.id+"ss-wrapper";this.divWrapper.style.background=this.settings.wrapperBackground;this.divWrapper.style.border=this.settings.wrapperBorder;this.divWrapper.onclick=function(n){n.stopPropagation();return!1};this.settings.container.appendChild(this.divWrapper);
if(this.settings.draggable&&this.settings.container!==document.body){b=document.createElement("div");b.id=this.id+"title-bar";b.className="ms-title-bar ss-titlebar";b.style.height="20px";b.style.lineHeight="20px";b.style.textAlign="center";b.innerHTML=this.settings.title;this.divWrapper.appendChild(b);var c=$ms.createCloseButton(this.id,function(){this.close()}.bind(this));b.appendChild(c);0===this.settings.container.id.length&&(this.settings.container.id=this.id+"container");$ms.draggable(this.settings.container,
{scope:"default",handle:this.id+"title-bar",cbDrop:function(){this.dropped=!0;this.settings.container.style.removeProperty("bottom");this.settings.container.style.removeProperty("right");this.settings.container.style.removeProperty("margin");this.settings.container.style.top=Math.max(0,parseInt(this.settings.container.style.top));this.settings.container.style.left=Math.max(0,parseInt(this.settings.container.style.left))}.bind(this)})}this.resizeWindowListener=function(n){this.resizeWindow()}.bind(this);
window.addEventListener("resize",this.resizeWindowListener);window.addEventListener("orientationchange",this.resizeWindowListener);this.settings.resizable&&this.settings.container!==document.body&&(this.$resizable=$ms.resizable(this.settings.container,{handles:["se"],hovers:["s","e"],handleColor:"green",cbResize:this.resizeWindow.bind(this)}));"zoom"===this.settings.zoomMode&&this.capturemousewheel(!0);this.keypressListener=function(n){this.keypress(n)}.bind(this);document.body.addEventListener("keypress",
this.keypressListener,!1);document.body.addEventListener("keydown",this.keypressListener,!1);this.divTop=document.createElement("div");this.divTop.className="ss-top";this.divTop.id=this.id+"ss-top";this.divWrapper.appendChild(this.divTop);this.divMiddle=document.createElement("div");this.divMiddle.className="ss-middle";this.divMiddle.id=this.id+"ss-middle";this.divTop.appendChild(this.divMiddle);$ms.detectSwipe(this.divMiddle.id,function(n,w){switch(w){case "r":this.loadslide(this.slide-1,"swipe-right");
break;case "l":this.loadslide(this.slide+1,"swipe-left");case "u","d":}}.bind(this));this.count=this.files.length;b=document.createElement("div");b.style.position="relative";var d=document.createElement("div");d.id="img"+this.id+"filmstrip";d.innerHTML="&#9660";d.className="ss-filmstrip-shoh ss-shoh ss-shoh-less";d.title="Hide the filmstrip thumbnail images";this.settings.showFilmstripToggle?d.addEventListener("click",function(){if($ms.hasClass(d,"ss-shoh-less")){var n="hide";$ms.removeClass(d,"ss-shoh-less");
$ms.addClass(d,"ss-shoh-more");this.filmstripState="hidden";d.title="Show the filmstrip thumbnail images"}else n="show",$ms.removeClass(d,"ss-shoh-more"),$ms.addClass(d,"ss-shoh-less"),this.filmstripState="visible",d.title="Hide the filmstrip thumbnail images";$ms.shoh(this.id+"filmstrip",n,!0);this.resizeWindow()}.bind(this)):d.style.display="none";b.appendChild(d);this.divFilmstrip=document.createElement("div");this.divFilmstrip.className="ss-filmstrip";this.divFilmstrip.id=this.id+"filmstrip";
$ms.addClass(this.divFilmstrip,"display-none");this.divFilmstrip.style.background=this.settings.filmstripBackground;b.appendChild(this.divFilmstrip);c=document.createElement("div");c.className="ss-filmstrip-content";c.id=this.id+"filmstrip-content";this.divFilmstrip.appendChild(c);this.divWrapper.appendChild(b);this.filmstrip();for(b=0;b<this.count;b++){this.divLarge[b]=document.createElement("div");this.divLarge[b].className="printme ss-large ms-no-select";this.divLarge[b].id=this.id+"ss-large-"+
b;$ms.addClass(this.divLarge[b],"display-none");this.divMiddle.appendChild(this.divLarge[b]);this.divMiddle.onmouseenter=function(n){n.stopPropagation();this.showNavButtons("show")}.bind(this);this.divMiddle.onmouseleave=function(n){n.stopPropagation();this.showNavButtons("hide")}.bind(this);var f=this;!function(n,w){n.addEventListener("click",function(p){this.zoomImage(p)}.bind(f),!1);n.addEventListener("mousedown",function(p){this.mousedown(p,n,w)}.bind(f),!1);"undefined"!==typeof f.settings.cbContextMenu&&
n.addEventListener("contextmenu",function(p){f.settings.cbContextMenu(n,w)}.bind(f),!1)}(this.divLarge[b],b)}this.divSpanButtons=document.createElement("span");this.divSpanButtons.id=this.id+"buttons-large";this.divSpanButtons.className="ss-buttons-large";this.divSpanButtons.ondblclick=function(n){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()};this.divMiddle.appendChild(this.divSpanButtons);this.buttons(a);this.divTop.appendChild(this.divButtons);
this.settings.showButtons||$ms.addClass(this.divButtons,"display-none");for(b=0;b<this.files.length;b++)this.largeLoaded[b]=!1;b=document.createElement("div");b.className="ss-title";b.id=this.id+"title";b.style.height=t+"px";b.style.minHeight=t+"px";c=document.createElement("div");c.className="ss-title-line1";c.id=this.id+"title-line1";b.appendChild(c);var h=document.createElement("span");h.id=this.id+"title-line1-span";c.appendChild(h);h=document.createElement("div");h.className="ss-title-line2";
h.id=this.id+"title-line2";b.appendChild(h);var m=document.createElement("span");m.id=this.id+"title-line2-span";h.appendChild(m);h.style.display=2>parseInt(this.settings.linesOfText)?"none":"";c.style.display=1>parseInt(this.settings.linesOfText)?"none":"";this.settings.showText||$ms.addClass(b,"display-none");this.divMiddle.appendChild(b);this.loadslide(a,"init");this.isTouch&&(this.touch=new $msRoot.MSTouch({logElement:$ms.$(this.id+"ss-title-line1")}));this.resizeWindow(!0);this.settings.showFilmstrip&&
$ms.removeClass(this.divFilmstrip,"display-none")};e.prototype.ssshow=function(){this.divWrapper.style.visibility="visible";var a=$ms.$(this.id+"opaque");a.style.display="block";$ms.addClass(a,"ss-fade-in-opaque")};e.prototype.close=function(a){"undefined"!==typeof a&&a.stopPropagation&&a.stopPropagation();if("undefined"!==typeof a&&((a.shiftKey||a.altKey)&&a.ctrlKey||a.shiftKey&&a.altKey)){var b=this.settings.waitAnimation;a.altKey&&a.ctrlKey&&(b++,2<b&&(b=0));$ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+
"wait")&&$ms.$(this.id+"line1")&&!$ms.hasClass($ms.$(this.id+"line1"),"ss-wait-animation-paused")?a.altKey&&a.ctrlKey?this.wait(b):this.stopWait(a.altKey):(a.shiftKey&&a.ctrlKey&&($ms.$(this.id+"wait-gif")?$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif")):this.settings.waitAnimation=-1),this.wait(b))}else{this.closeMagnifier();this.slideShowRunning&&this.stopSlideshow();this.isFullScreen&&this.fullScreen();(a=$ms.$(this.id+"opaque"))&&a.parentNode.removeChild(a);this.divWrapper.parentNode&&
this.divWrapper.parentNode.removeChild(this.divWrapper);window.removeEventListener("resize",this.resizeWindowListener);window.removeEventListener("orientationchange",this.resizeWindowListener);"undefined"!==typeof this.wheelListener&&null!==this.wheelListener&&window.addEventListener&&window.removeEventListener("DOMMouseScroll",this.wheelListener);document.body.removeEventListener("keypress",this.keypressListener);window.scrollTo(this.position.left,this.position.top);this.$resizable&&this.$resizable.close();
for(a=0;a<u.length;a++)if(u[a].id===this.id){u.splice(a,1);break}this.settings.cbClose&&this.settings.cbClose(this);return!1}};e.prototype.filmstrip=function(){this.ssDivWidth="both"===this.orien?1.5*g:"portrait"===this.orien?g/1.5:1.5*g;for(var a=0;a<this.files.length;a++){var b=this.shortFilename(this.files[a].filename);var c="undefined"!==typeof this.files[a].thumb?this.files[a].thumb:this.files[a].filename;this.thumbLoaded[a]=!1;this.thumbSize[a]={};var d=document.createElement("div");d.className=
"ss-filmstrip-thumb display-none";d.id=this.id+"thumb-"+a;d.style.height=this.settings.filmstripImageHeight+this.filmstripImageBorderWidth+"px";var f=document.createElement("a"),h=this;!function(n,w){f.addEventListener("click",function(p){this.magZoom=this.settings.initMagZoom;this.zoom=1;this.loadslide(n,"filmstrip-click")}.bind(h),!1)}(a);var m=document.createElement("img");m.id=this.id+"imgthumb-"+a;m.alt=this.alt(b);m.title=this.title(b);m.height=this.settings.filmstripImageHeight;m.style.border=
this.settings.filmstripImageBorder;!function(n,w,p){n.addEventListener("load",function(x){this.imgloaded(w,"thumb",n,p)}.bind(h),!1)}(m,a,d);m.src=c;f.appendChild(m);d.appendChild(f);$ms.$(this.id+"filmstrip-content").appendChild(d)}};e.prototype.shohFilmStrip=function(){hasClass($ms.$("shoh-filmstrip"))};e.prototype.alt=function(a){return"undefined"===typeof a?"":a.replace(/-/g," ").replace(/_/g," ")};e.prototype.title=function(a){return a.replace(/-/g," ").replace("-thumb","").replace(/_/g," ")};
e.prototype.imgloaded=function(a,b,c,d){$msRoot.Slideshow.getInstance(this.id)&&("thumb"===b?this.sizethumbimage(a,c,d):"large"===b&&(this.sizelargeimage(a,c),this.stopWait()))};e.prototype.sizethumbimage=function(a,b,c){if(!this.thumbLoaded[a]){this.thumbLoaded[a]=!0;this.thumbSize[a].naturalWidth=b.naturalWidth;this.thumbSize[a].naturalHeight=b.naturalHeight;this.thumbSize[a].displayWidth=Math.max(this.thumbSize[a].naturalWidth,1);this.thumbSize[a].displayHeight=Math.max(this.thumbSize[a].naturalHeight,
1);var d=$ms.round(this.thumbSize[a].displayWidth/this.thumbSize[a].displayHeight,2);this.thumbSize[a].displayHeight=parseInt(Math.min(this.settings.filmstripImageHeight,this.thumbSize[a].displayHeight));this.thumbSize[a].displayWidth=parseInt(this.thumbSize[a].displayHeight*d);this.thumbSize[a].displayWidth>this.ssDivWidth&&(this.thumbSize[a].displayWidth=parseInt(this.ssDivWidth),this.thumbSize[a].displayHeight=parseInt(this.ssDivWidth/d));this.thumbSize[a].displayHeight>this.settings.filmstripImageHeight&&
(this.thumbSize[a].displayHeight=this.settings.filmstripImageHeight,this.thumbSize[a].displayWidth=parseInt(this.thumbSize[a].displayHeight*d));d=Math.max(this.settings.filmstripImageHeight-this.thumbSize[a].displayHeight,0);b.style.height=this.thumbSize[a].displayHeight+"px";b.style.width=this.thumbSize[a].displayWidth+"px";b.style.paddingTop=d+"px";$ms.removeClass(c,"display-none");this.adjustImageSizeForBorder(b)}for(b=a=0;b<this.count;b++)"undefined"!==typeof this.thumbSize[b]&&"undefined"!==
typeof this.thumbSize[b].displayWidth&&(a+=parseInt(this.thumbSize[b].displayWidth)+4+4),a+=4;$ms.$(this.id+"filmstrip-content").style.width=parseInt(Math.max(a,parseInt(this.divFilmstrip.offsetWidth)))+"px";0<=this.slide&&(a=$ms.$(this.id+"thumb-"+this.slide),"undefined"!==typeof a&&this.scrolldiv(a))};e.prototype.sizelargeimage=function(a,b){this.largeLoaded[a]||(this.largeLoaded[a]=!0,this.largeSize[a].naturalWidth=b.naturalWidth,this.largeSize[a].naturalHeight=b.naturalHeight);a===this.slide&&
(this.centerImage(a),this.transitionSlides(),this.showNavButtons("show"))};e.prototype.transitionSlides=function(){var a=0;"string"===typeof this.settings.ssTransitionEffect?a=G.indexOf(this.settings.ssTransitionEffect):"number"===typeof this.settings.ssTransitionEffect&&(a=this.settings.ssTransitionEffect);switch(a){case -1:case 0:this.transitionSlidesNone();break;case 1:this.transitionSlidesFade();break;case 2:this.transitionSlidesMoveHorizontal(!1);break;case 3:this.transitionSlidesMoveHorizontal(!0);
break;case 4:this.transitionSlidesSize(!1);break;case 5:this.transitionSlidesSize(!0);break;default:this.transitionSlidesNone()}};e.prototype.transitionSlidesNone=function(){var a=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=a;0<=this.oldSlide&&$ms.addClass(this.divLarge[this.oldSlide],"display-none");$ms.removeClass(this.divLarge[this.slide],"display-none")};e.prototype.transitionSlidesFade=function(){var a=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=
a;a=this.resetStyleSheet();this.findCSSRule(a.sheet,"ss-fade-slide","keyframes")||a.sheet.insertRule("@"+k+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}",0);if(0<=this.oldSlide){this.divLarge[this.oldSlide].style[k+"animation"]="";void 0;this.divLarge[this.oldSlide].style[k+"animation"]="ss-fade-slide "+this.settings.ssTransitionSeconds+"s forwards linear reverse";this.divLarge[this.oldSlide].style.zIndex="0";var b=this.oldSlide,c=setInterval(function(){clearInterval(c);$ms.addClass(this.divLarge[b],
"display-none")}.bind(this),1E3*this.settings.ssTransitionSeconds)}this.divLarge[this.slide].style[k+"animation"]="";void 0;this.divLarge[this.slide].style[k+"animation"]="ss-fade-slide "+this.settings.ssTransitionSeconds+"s forwards linear normal";$ms.removeClass(this.divLarge[this.slide],"display-none");this.divLarge[this.slide].style.zIndex="10"};e.prototype.transitionSlidesMoveHorizontal=function(a){var b=this.slide>this.oldSlide?1:-1;var c=this.resetStyleSheet(),d="move-next-old-"+this.oldSlide,
f="move-prev-old-"+this.oldSlide,h="move-next-"+this.slide;var m="move-prev-"+this.slide;var n=["move-next-old-"+this.oldSlide,"move-prev-old-"+this.oldSlide,"move-next-"+this.oldSlide,"move-prev-"+this.oldSlide],w=["move-next-old-"+this.slide,"move-prev-old-"+this.slide,"move-next-"+this.slide,"move-prev-"+this.slide];this.removeCSSRules(c.sheet,n,"keyframes");this.removeCSSRules(c.sheet,w,"keyframes");this.removeCSSRules(c.sheet,n,"style",".");this.removeCSSRules(c.sheet,w,"style",".");if(0<=this.oldSlide){$ms.removeClass(this.divLarge[this.oldSlide],
d);$ms.removeClass(this.divLarge[this.oldSlide],f);var p=this.calcMarginX(this.largeSize[this.oldSlide]);this.divLarge[this.oldSlide].style.left=p+"px";var x=0;if(1===b){var B=d;var C=parseInt(this.largeSize[this.oldSlide].displayWidth)+p}else B=f,C=-(parseInt(this.largeSize[this.oldSlide].displayWidth)+p);c.sheet.insertRule("@"+k+"keyframes "+B+" {0% {"+k+"transform: translate3d("+x+"px, 0, 0); }100% {"+k+"transform: translate3d("+C+"px, 0, 0); }}",0)}$ms.removeClass(this.divLarge[this.slide],h);
$ms.removeClass(this.divLarge[this.slide],m);d=this.calcMarginX(this.largeSize[this.slide]);-1===this.oldSlide?(this.divLarge[this.slide].style.left=d,b=h,m=0):1===b?(b=h,this.divLarge[this.slide].style.left=p-parseInt(this.largeSize[this.slide].displayWidth)+"px",m=-p+parseInt(this.largeSize[this.slide].displayWidth)+d):(b=m,this.divLarge[this.slide].style.left=p+parseInt(this.largeSize[this.oldSlide].displayWidth)+"px",m=p-(parseInt(this.largeSize[this.slide].displayWidth)+d));c.sheet.insertRule("@"+
k+"keyframes "+b+" {0% {"+k+"transform: translate3d(0px, 0, 0); }100% {"+k+"transform: translate3d("+m+"px, 0, 0); }}",0);a&&!this.findCSSRule(c.sheet,"ss-fade-slide","keyframes")&&c.sheet.insertRule("@"+k+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}",0);h=p=this.settings.ssTransitionSeconds;-1<this.oldSlide&&(x=Math.abs(C-x)/Math.abs(m-0),0<x?p/=x:h=p*x,x=k+"animation-name: "+B+(a?", ss-fade-slide; ":"; ")+k+"animation-duration: "+h+"s"+(a?","+h+"s; ":"; ")+k+"animation-timing-function: linear"+
(a?",linear; ":"; ")+k+"animation-fill-mode: forwards"+(a?",forwards; ":"; ")+k+"animation-direction: normal"+(a?",reverse; ":"; "),x="."+B+"{"+x+"}",void 0,c.sheet.insertRule(x,0),$ms.addClass(this.divLarge[this.oldSlide],B));a=k+"animation-name: "+b+(a?", ss-fade-slide; ":"; ")+k+"animation-duration: "+p+"s"+(a?","+p+"s; ":"; ")+k+"animation-timing-function: linear"+(a?",linear; ":"; ")+k+"animation-fill-mode: forwards"+(a?",forwards; ":"; ")+k+"animation-direction: normal"+(a?",normal; ":"; ");
a="."+b+"{"+a+"}";void 0;c.sheet.insertRule(a,0);$ms.addClass(this.divLarge[this.slide],b);this.cancelAnimationIntervals();var D=this.slide,E=this.oldSlide,F=setInterval(function(){clearInterval(F);this.endListener(D,E)}.bind(this),1E3*p);$ms.removeClass(this.divLarge[this.slide],"display-none");this.animations.push({slide:D,oldSlide:E,interval:F})};e.prototype.transitionSlidesSize=function(a){var b=this.slide>this.oldSlide?1:-1;var c=this.resetImage(this.oldSlide);var d="move-next-old-"+this.oldSlide;
var f="move-prev-old-"+this.oldSlide;var h="move-next-"+this.slide,m="move-prev-"+this.slide;var n=["move-next-old-"+this.oldSlide,"move-prev-old-"+this.oldSlide,"move-next-"+this.oldSlide,"move-prev-"+this.oldSlide,"ss-size-move-next-old-"+this.oldSlide,"ss-size-move-prev-old-"+this.oldSlide,"ss-size-move-next-"+this.oldSlide,"ss-size-move-prev-"+this.oldSlide];var w=["move-next-old-"+this.slide,"move-prev-old-"+this.slide,"move-next-"+this.slide,"move-prev-"+this.slide,"ss-size-move-next-old-"+
this.slide,"ss-size-move-prev-old-"+this.slide,"ss-size-move-next-"+this.slide,"ss-size-move-prev-"+this.slide];this.removeCSSRules(c.sheet,n,"keyframes");this.removeCSSRules(c.sheet,w,"keyframes");this.removeCSSRules(c.sheet,n,"style",".");this.removeCSSRules(c.sheet,w,"style",".");if(0<=this.oldSlide){$ms.removeClass(this.divLarge[this.oldSlide],d);$ms.removeClass(this.divLarge[this.oldSlide],f);var p=1===b?d:f}$ms.removeClass(this.divLarge[this.slide],h);$ms.removeClass(this.divLarge[this.slide],
m);var x=this.calcMarginX(this.largeSize[this.slide]);var B=this.calcMarginY(this.largeSize[this.slide]);var C=parseInt(this.divLarge[this.slide].style.height);var D=parseInt(this.divLarge[this.slide].style.width);if(-1<this.oldSlide){d=this.calcMarginX(this.largeSize[this.oldSlide]);f=this.calcMarginY(this.largeSize[this.oldSlide]);n=parseFloat(this.divLarge[this.oldSlide].style.height);w=parseFloat(this.divLarge[this.oldSlide].style.width);$ms.addClass(this.img[this.oldSlide],"ss-center-image");
var E=D-w,F=C-n,I=0<E-F;0<E&&I?(this.img[this.oldSlide].style.width="100%",this.img[this.oldSlide].style.height="auto"):0>F&&(this.img[this.oldSlide].style.height="100%",this.img[this.oldSlide].style.width="auto");0>E&&!I?(this.img[this.slide].style.width="100%",this.img[this.slide].style.height="auto"):0>F&&(this.img[this.slide].style.height="100%",this.img[this.slide].style.width="auto");this.divLarge[this.slide].style.left=d+"px";this.divLarge[this.slide].style.top=f+"px";this.divLarge[this.slide].style.width=
w+"px";this.divLarge[this.slide].style.height=n+"px"}else d=x,f=B,w=D,n=C;$ms.addClass(this.img[this.slide],"ss-center-image");b=1===b?h:m;h=x-d;B-=f;a&&!this.findCSSRule(c.sheet,"ss-fade-slide","keyframes")&&c.sheet.insertRule("@"+k+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}",0);m=this.settings.ssTransitionSeconds;-1<this.oldSlide&&(c.sheet.insertRule("@"+k+"keyframes "+p+" {0% {"+k+"transform: translate3d(0, 0, 0); }100% {"+k+"transform: translate3d("+h+"px, "+B+"px, 0); }}",
0),c.sheet.insertRule("@"+k+"keyframes ss-size-"+p+" {0% {width:"+w+"px;height:"+n+"px; }100% {width:"+D+"px;height:"+C+"px; }}",0),x=k+"animation-name: "+p+", ss-size-"+p+(a?", ss-fade-slide; ":"; ")+k+"animation-duration: "+m+"s,"+m+"s"+(a?","+m+"s; ":"; ")+k+"animation-timing-function: linear, linear"+(a?",linear; ":"; ")+k+"animation-fill-mode: forwards, forwards"+(a?",forwards; ":"; ")+k+"animation-direction: normal, normal"+(a?",reverse; ":"; "),x="."+p+"{"+x+"}",void 0,c.sheet.insertRule(x,
0),$ms.addClass(this.divLarge[this.oldSlide],p));c.sheet.insertRule("@"+k+"keyframes "+b+" {0% {"+k+"transform: translate3d(0, 0, 0); }100% {"+k+"transform: translate3d("+h+"px, "+B+"px, 0); }}",0);c.sheet.insertRule("@"+k+"keyframes ss-size-"+b+" {0% {width:"+w+"px;height:"+n+"px; }100% {width:"+D+"px;height:"+C+"px; }}",0);a=k+"animation-name: "+b+", ss-size-"+b+(a?", ss-fade-slide; ":"; ")+k+"animation-duration: "+m+"s,"+m+"s"+(a?","+m+"s; ":"; ")+k+"animation-timing-function: linear, linear"+
(a?",linear; ":"; ")+k+"animation-fill-mode: forwards, forwards"+(a?",forwards; ":"; ")+k+"animation-direction: normal, normal"+(a?",normal; ":"; ");a="."+b+"{"+a+"}";void 0;c.sheet.insertRule(a,0);$ms.addClass(this.divLarge[this.slide],b);this.cancelAnimationIntervals();this.divLarge[this.slide].style.left=d+"px";this.divLarge[this.slide].style.top=f+"px";var J=this.slide,K=this.oldSlide,L=setInterval(function(){clearInterval(L);this.endListener(J,K)}.bind(this),1E3*m);$ms.removeClass(this.divLarge[this.slide],
"display-none");this.animations.push({slide:J,oldSlide:K,interval:L})};e.prototype.endListener=function(a,b){this.animations.length=0;-1<b&&($ms.addClass(this.divLarge[b],"display-none"),this.resetImage(b));$ms.removeClass(this.divLarge[a],"display-none");this.resetImage(a)};e.prototype.cancelAnimationIntervals=function(){if(0<this.animations.length){for(var a=0;a<this.animations.length;a++)clearInterval(this.animations[a].interval),this.resetImage(this.animations[a].oldSlide),$ms.addClass(this.divLarge[this.animations[a].oldSlide],
"display-none"),$ms.addClass(this.divLarge[this.animations[a].slide],"display-none");this.animations.length=0}};e.prototype.resetImage=function(a){if(-1<a){$ms.addClass(this.divLarge[a],"visibility-hidden");$ms.removeClass(this.img[a],"ss-center-image");this.img[a].style.height=parseInt(this.largeSize[a].displayHeight-this.imageBorderWidth)+"px";this.img[a].style.width=parseInt(this.largeSize[a].displayWidth-this.imageBorderWidth)+"px";this.img[a].style.top="0";this.img[a].style.left="0";this.divLarge[a].style.height=
parseInt(this.largeSize[a].displayHeight)+"px";this.divLarge[a].style.width=parseInt(this.largeSize[a].displayWidth)+"px";this.divLarge[a].style.left=this.calcMarginX(this.largeSize[a])+"px";this.divLarge[a].style.top=this.calcMarginY(this.largeSize[a])+"px";var b=this.resetStyleSheet();$ms.removeClass(this.divLarge[a],"visibility-hidden")}else b=this.resetStyleSheet();return b};e.prototype.resetStyleSheet=function(){var a=$ms.$(this.id+"tempStyleSheet");0===this.animations.length&&a&&(a.parentNode.removeChild(a),
a=void 0);a||(a=document.createElement("style"),a.id=this.id+"tempStyleSheet",a.appendChild(document.createTextNode("")),document.head.appendChild(a));return a};e.prototype.removeCSSRules=function(a,b,c,d){"undefined"===typeof d&&(d="");for(var f=0;f<b.length;f++)this.removeCSSRule(a,d+b[f],c)};e.prototype.removeCSSRule=function(a,b,c){if(a.cssRules)for(var d=0;d<a.cssRules.length;d++)if("style"===c){if((a.cssRules[d].type===window.CSSRule.STYLE_RULE||a.cssRules[d].type===window.CSSRule.WEBKIT_STYLE_RULE)&&
a.cssRules[d].selectorText===b)return a.deleteRule(d),!0}else if("keyframes"===c&&(a.cssRules[d].type===window.CSSRule.KEYFRAMES_RULE||a.cssRules[d].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE)&&a.cssRules[d].name===b)return a.deleteRule(d),!0};e.prototype.findCSSRule=function(a,b,c){if(a.cssRules)for(var d=0;d<a.cssRules.length;d++)if("style"===typeof c){if(a.cssRules[d].selectorText===b)return d}else if("keyframes"===c&&(a.cssRules[d].type===window.CSSRule.KEYFRAMES_RULE||a.cssRules[d].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE)&&
a.cssRules[d].name===b)return d;return!1};e.prototype.centerImage=function(a){this.largeSize[a].displayWidth=parseInt(Math.max(1,this.largeSize[a].naturalWidth));this.largeSize[a].displayHeight=parseInt(Math.max(1,this.largeSize[a].naturalHeight));var b=this.largeSize[a].displayWidth/this.largeSize[a].displayHeight;b>y/l?(this.largeSize[a].displayWidth=y,this.largeSize[a].displayHeight=parseInt(this.largeSize[a].displayWidth/b)):(this.largeSize[a].displayHeight=l-this.settings.paddingTop,this.largeSize[a].displayWidth=
parseInt(this.largeSize[a].displayHeight*b));this.resetImage(a);a=l-parseInt(this.largeSize[a].displayHeight);this.divLarge[this.slide].style.top=a/2+"px";a=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=a+"px"};e.prototype.loadslide=function(a,b){if(0>a)if(this.settings.slideshowWrap)a=this.count-1;else return;else if(a>=this.count)if(this.settings.slideshowWrap)a=0;else return;if(a!==this.slide){var c=$ms.$(this.id+"thumb-"+a);if($ms.hasClass(c,"display-none")&&
"init"!==b){var d=!1;if(this.slide<a)for(var f=a+1;f<this.count;f++){if(c=$ms.$(this.id+"thumb-"+f),!$ms.hasClass(c,"display-none")){a=f;d=!0;break}}else for(f=a-1;0<=f;f--)if(c=$ms.$(this.id+"thumb-"+f),!$ms.hasClass(c,"display-none")){a=f;d=!0;break}if(!d)return}(this.slideShowRunning&&-1!==b.indexOf("click")||this.slideShowRunning&&-1!==b.indexOf("keypress"))&&this.playPause("reset");0<=this.slide&&(this.oldSlide=this.slide);this.slide=a;this.magZoom=this.settings.initMagZoom;this.zoom=1;"undefined"===
typeof this.anchor[a]?(this.wait("init"===b?this.settings.waitAnimation:void 0),this.createImage(a)):(this.resetZoom(this.divLarge[a],this.img[a]),this.centerImage(a),this.transitionSlides());this.buttons(a);this.fitButtons();$ms.$(this.id+"title-line1-span").innerHTML=this.slidePositionText(a)+"&nbsp;&nbsp;"+this.line1Text(a);$ms.$(this.id+"title-line2-span").innerHTML=this.line2Text(a);b=$ms.$(this.id+"imgthumb-"+a);$ms.addClass(b,"selected");0<=this.oldSlide&&(b=$ms.$(this.id+"imgthumb-"+this.oldSlide),
$ms.removeClass(b,"selected"));this.closeMagnifier();this.preloadImages(a);this.showNavButtons("show");this.settings.showDownloadButton&&this.downloadLinkdata()}a=$ms.$(this.id+"thumb-"+a);this.scrolldiv(a)};e.prototype.preloadImages=function(a){var b=0;if(!this.allLoaded&&0!==this.preloadCount){if(a<this.count-1&&"undefined"===typeof this.anchor[a+1]&&(this.createImage(a+1),b++,b>=this.preloadCount)||0<a&&"undefined"===typeof this.anchor[a-1]&&(this.createImage(a-1),b++,b>=this.preloadCount)||"undefined"===
typeof this.anchor[0]&&(this.createImage(0),b++,b>=this.preloadCount)||"undefined"===typeof this.anchor[this.count-1]&&(this.createImage(this.count-1),b++,b>=this.preloadCount))return;for(var c=a+1;c<this.count-1;c++)if("undefined"===typeof this.anchor[c]&&(this.createImage(c),b++,b>=this.preloadCount))return;for(c=0;c<a;c++)if("undefined"===typeof this.anchor[c]&&(this.createImage(c),b++,b>=this.preloadCount))return;this.allLoaded=!0}};e.prototype.createImage=function(a){this.largeLoaded[a]=!1;this.largeSize[a]=
{};var b=this.shortFilename(this.files[a].filename),c=document.createElement("a"),d=document.createElement("img");d.alt=this.alt(b);d.id=this.id+"imglarge-"+a;d.title=this.title(b);d.src=this.files[a].filename;d.style.position="absolute";d.style.top="0px";d.style.left="0px";d.addEventListener("load",function(){this.imgloaded(a,"large",d)}.bind(this));c.appendChild(d);this.divLarge[a].appendChild(c);this.divLarge[a].style.border=this.settings.imageBorder;this.anchor[a]=c;this.img[a]=d};e.prototype.downloadLinkdata=
function(){var a=$ms.$(this.id+"download-link");if(!a){var b=document.createElement("div");b.style.display="none";b.id=this.id+"download";a=document.createElement("input");a.type="hidden";a.id=this.id+"download-link";b.appendChild(a);this.divWrapper.appendChild(b)}a.value=this.files[this.slide].downloadLink};e.prototype.showNavButtons=function(a){if(!$ms.$(this.id+"magnifier")){if(!this.imgNextLarge){var b=this.nextLinklarge();this.imgNextLarge=b.img;$ms.addClass(this.imgNextLarge,"visibility-hidden");
this.divSpanButtons.appendChild(b.a);b=this.prevlinklarge();this.imgPrevLarge=b.img;$ms.addClass(this.imgPrevLarge,"visibility-hidden");this.divSpanButtons.appendChild(b.a);b=this.closeLinklarge();this.imgCloseLarge=b.img;$ms.addClass(this.imgCloseLarge,"visibility-hidden");this.divSpanButtons.appendChild(b.a)}"show"===a?(this.slide<this.count-1?$ms.removeClass(this.imgNextLarge,"visibility-hidden"):$ms.addClass(this.imgNextLarge,"visibility-hidden"),0<this.slide?$ms.removeClass(this.imgPrevLarge,
"visibility-hidden"):$ms.addClass(this.imgPrevLarge,"visibility-hidden"),$ms.removeClass(this.imgCloseLarge,"visibility-hidden")):"test"===a?(this.slide>=this.count-1&&$ms.addClass(this.imgNextLarge,"visibility-hidden"),0>=this.slide&&$ms.addClass(this.imgPrevLarge,"visibility-hidden")):($ms.addClass(this.imgNextLarge,"visibility-hidden"),$ms.addClass(this.imgPrevLarge,"visibility-hidden"),$ms.addClass(this.imgCloseLarge,"visibility-hidden"))}};e.prototype.buttons=function(a){var b=!1;"undefined"===
typeof this.divButtons&&(this.divButtons=document.createElement("div"),this.divButtons.className="ss-buttons",this.divButtons.id=this.id+"ss-buttons",b=!0);var c=this.nestedButtonsDiv("buttons-outer-left","buttons-inner-left");b&&this.divButtons.appendChild(c.outer);if(this.settings.showPrintButton){var d=this.printLink(a);b&&c.inner.appendChild(d)}this.settings.showDownloadButton&&(d=this.downloadLink(a),b&&c.inner.appendChild(d));this.settings.showOtherButton&&(d=this.otherLink(a),b&&c.inner.appendChild(d));
this.settings.showLocateButton&&(d=this.locateLink(a),b&&c.inner.appendChild(d));d=this.createSpace(10,0);b&&this.divButtons.appendChild(d);this.settings.showFirstLastButtons&&(d=this.firstLink(),b&&this.divButtons.appendChild(d));d=this.previousLink();b&&this.divButtons.appendChild(d);this.settings.showPlayPauseButton&&(d=this.playPauseLink(),b&&this.divButtons.appendChild(d));d=this.nextLink();b&&this.divButtons.appendChild(d);this.settings.showFirstLastButtons&&(d=this.lastLink(),b&&this.divButtons.appendChild(d));
d=this.createSpace(10,1);b&&this.divButtons.appendChild(d);this.settings.showExitButton&&(d=this.closeLink(),b&&this.divButtons.appendChild(d));a=this.nestedButtonsDiv("buttons-outer-right","buttons-inner-right");b&&this.divButtons.appendChild(a.outer);this.settings.showZoomButtons&&(d=this.magnifierLink(),b&&a.inner.appendChild(d),"zoom"===this.settings.zoomMode&&(d=this.zoomOutLink(),b&&a.inner.appendChild(d),d=this.zoomResetLink(),b&&a.inner.appendChild(d)));this.isTouch||(d=this.fullScreenLink(),
b&&a.inner.appendChild(d));return this.divButtons};e.prototype.fitButtons=function(){var a=$ms.$(this.id+"buttons-outer-right"),b=$ms.$(this.id+"buttons-inner-right"),c=$ms.$(this.id+"buttons-outer-left"),d=$ms.$(this.id+"buttons-inner-left");$ms.removeClass(c,"buttons-outer");$ms.removeClass(d,"buttons-inner");$ms.removeClass(d,"buttons-inner-2-buttons");$ms.removeClass(d,"buttons-inner-3-buttons");$ms.removeClass(d,"buttons-inner-4-buttons");$ms.addClass(d,"buttons-inner-initial");$ms.removeClass(a,
"buttons-outer");$ms.removeClass(b,"buttons-inner");$ms.removeClass(b,"buttons-inner-3-buttons");$ms.removeClass(b,"buttons-inner-4-buttons");$ms.addClass(b,"buttons-inner-initial");for(b=a=0;b<this.divButtons.childNodes.length;b++)if("a"===this.divButtons.childNodes[b].nodeName.toLowerCase())for(c=this.divButtons.childNodes[b],d=0;d<c.childNodes.length;d++)"img"===c.childNodes[d].nodeName.toLowerCase()&&(a+=parseFloat(getComputedStyle(c.childNodes[d]).width));else"div"===this.divButtons.childNodes[b].nodeName.toLowerCase()&&
(a+=parseFloat(this.divButtons.childNodes[b].getBoundingClientRect().width));isNaN(a)||(b=parseFloat(getComputedStyle($ms.$("img"+this.id+"filmstrip")).right)+parseFloat(getComputedStyle($ms.$("img"+this.id+"filmstrip")).width),a+=2*b,b=this.divMiddle.getBoundingClientRect().width,"zoom"===this.settings.zoomMode&&$ms.$(this.id+"buttons-inner-right")&&a>b&&($ms.addClass($ms.$(this.id+"buttons-outer-right"),"buttons-outer"),$ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner"),$ms.$(this.id+
"a-full")?($ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner-4-buttons"),a-=132):($ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner-3-buttons"),a-=88),$ms.removeClass(this.id+"buttons-inner-right","buttons-inner-initial")),c=Math.ceil((a-b)/32),d=0,this.settings.showPrintButton&&d++,this.settings.showDownloadButton&&d++,this.settings.showOtherButton&&d++,this.settings.showLocateButton&&d++,1<d&&0<c&&($ms.addClass($ms.$(this.id+"buttons-outer-left"),"buttons-outer"),$ms.addClass($ms.$(this.id+
"buttons-inner-left"),"buttons-inner"),$ms.addClass($ms.$(this.id+"buttons-inner-left"),"buttons-inner-4-buttons"),a-=44*(d-1),$ms.removeClass(this.id+"buttons-inner-left","buttons-inner-initial")),c=Math.ceil((a-b)/32),0<c?($ms.$(this.id+"a-first")&&($ms.$(this.id+"a-first").style.display="none"),$ms.$(this.id+"a-playpause")&&($ms.$(this.id+"a-playpause").style.display="none"),$ms.$(this.id+"a-last")&&($ms.$(this.id+"a-last").style.display="none")):($ms.$(this.id+"a-first")&&($ms.$(this.id+"a-first").style.display=
"inline-block"),$ms.$(this.id+"a-playpause")&&($ms.$(this.id+"a-playpause").style.display="inline-block"),$ms.$(this.id+"a-last")&&($ms.$(this.id+"a-last").style.display="inline-block")))};e.prototype.nestedButtonsDiv=function(a,b){var c=$ms.$(this.id+a),d=$ms.$(this.id+b);c||(c=document.createElement("div"),c.id=this.id+a,d=document.createElement("div"),d.id=this.id+b,c.appendChild(d));return{outer:c,inner:d}};e.prototype.firstLink=function(){var a=$ms.$(this.id+"a-first"),b=$ms.$(this.id+"img-first");
b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-first",b.id=this.id+"img-first",a.appendChild(b));0===this.slide?(b.className="ss-first-disabled sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="First Disabled",a.onclick=function(){return!1},a.removeAttribute("onclick")):(a.title="First Image",a.onclick=function(c){c.stopPropagation();this.loadslide(0,"button-first-click")}.bind(this),b.className="ss-first sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",
b.alt="First");return a};e.prototype.previousLink=function(){var a=$ms.$(this.id+"a-prev"),b=$ms.$(this.id+"img-prev");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-prev",b.id=this.id+"img-prev",a.appendChild(b));0!==this.slide||this.settings.slideshowWrap?(a.onclick=function(c){c.stopPropagation();this.loadslide(this.slide-1,"button-previous-click")}.bind(this),a.title="Previous Image",b.className="ss-prev sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt=
"Previous"):(b.className="ss-prev-disabled sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Goto Previous Disabled",a.onclick=function(){return!1},a.removeAttribute("onclick"));return a};e.prototype.playPauseLink=function(){var a=$ms.$(this.id+"a-playpause"),b=$ms.$(this.id+"img-playpause");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-playpause",this.settings.playOnEnter?this.playPause("play","init",a,b):this.playPause("pause","init",a,b),b.id=this.id+
"img-playpause",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",a.appendChild(b));return a};e.prototype.playPause=function(a,b,c,d){"undefined"===typeof c&&(c=$ms.$(this.id+"a-playpause"),d=$ms.$(this.id+"img-playpause"));if("play"===a){c.title="Pause Slideshow";c.onclick=function(f){f.stopPropagation();this.playPause("pause","click")}.bind(this);d.className="ss-pause sprite-32";d.alt="Pause";if("click"===b){a=0;if(this.slide<this.count-1||this.settings.slideshowWrap)a=this.slide+1;this.loadslide(a,"button-playpause-click")}this.startSlideshow()}else"pause"===
a?(c.title="Play Slideshow",c.onclick=function(f){f.stopPropagation();this.playPause("play","click")}.bind(this),d.className="ss-play sprite-32",d.alt="Play","click"===b&&this.stopSlideshow()):"reset"===a&&(this.stopSlideshow(),this.startSlideshow())};e.prototype.nextLink=function(){var a=$ms.$(this.id+"a-next"),b=$ms.$(this.id+"img-next");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-next",b.id=this.id+"img-next",a.appendChild(b));this.slide>=this.count-1&&!this.settings.slideshowWrap?
(b.className="ss-next-disabled sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Next Disabled",a.onclick=function(){return!1},a.removeAttribute("onclick")):(a.title="Next Image",a.onclick=function(c){c.stopPropagation();this.loadslide(this.slide+1,"button-next-click")}.bind(this),b.className="ss-next sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Next");return a};e.prototype.lastLink=function(){var a=$ms.$(this.id+"a-last"),b=$ms.$(this.id+"img-last");b||(a=document.createElement("a"),
b=document.createElement("img"),a.id=this.id+"a-last",b.id=this.id+"img-last",a.appendChild(b));this.slide>=this.count-1?(b.className="ss-last-disabled sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Last Disabled",a.onclick=function(){return!1},a.removeAttribute("onclick")):(a.title="Last Image",a.onclick=function(c){c.stopPropagation();this.loadslide(this.count-1,"button-last-click")}.bind(this),b.className="ss-last sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Last");return a};
e.prototype.closeLink=function(){var a=$ms.$(this.id+"a-close"),b=$ms.$(this.id+"img-close");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-close",b.id=this.id+"img-close",a.title="Exit Slideshow",a.onclick=function(c){this.close(c)}.bind(this),b.className="ss-close sprite-32",b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.style.width="44px",b.alt="Close",a.appendChild(b));return a};e.prototype.magnifierLink=function(){var a=$ms.$(this.id+"a-zoom"),b=$ms.$(this.id+"img-zoom");
b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-zoom",b.id=this.id+"img-zoom",a.title="Zoom In (CTRL + Mouse Wheel will also zoom in and out)",a.onclick="zoom"===this.settings.zoomMode?function(c){c.stopPropagation();this.zoomImageStart(!0)}.bind(this):function(c){c.stopPropagation();this.startMagnifier(c)}.bind(this),b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Zoom In",b.className="ss-zoom sprite-32",a.appendChild(b));return a};e.prototype.zoomOutLink=function(){var a=
$ms.$(this.id+"a-zoomOut"),b=$ms.$(this.id+"img-zoom-out");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-zoom-out",b.id=this.id+"img-zoom-out",a.title="Zoom Out (CTRL + Mouse Wheel will also zoom in and out)",a.onclick=function(c){c.stopPropagation();this.zoomImageStart(!1)}.bind(this),b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Zoom Out",b.className="ss-zoom-out sprite-32",a.appendChild(b));return a};e.prototype.zoomResetLink=function(){var a=$ms.$(this.id+
"a-zoom-reset"),b=$ms.$(this.id+"img-zoom-reset");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-zoom-reset",b.id=this.id+"img-zoom-reset",a.title="Zoom Reset",a.onclick=function(c){c.stopPropagation();this.resetZoom(this.divLarge[this.slide],this.img[this.slide])}.bind(this),b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Zoom Reset",b.className="ss-zoom-reset sprite-32",a.appendChild(b));return a};e.prototype.fullScreenLink=function(){var a=$ms.$(this.id+"a-full"),
b=$ms.$(this.id+"img-full");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-full",b.id=this.id+"img-full",a.title="Full Screen",a.onclick=function(c){c.stopPropagation();this.fullScreen()}.bind(this),b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.alt="Full Screen",b.className="ss-full-screen sprite-32",a.appendChild(b));return a};e.prototype.downloadLink=function(a){var b=$ms.$(this.id+"a-download"),c=$ms.$(this.id+"img-download");c||(b=document.createElement("a"),c=
document.createElement("img"),b.id=this.id+"a-download",c.id=this.id+"img-download",c.style.width="44px",c.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.appendChild(c));this.files[a].downloadLink?(b.title="Download Image",b.onclick=function(d){d.stopPropagation();$ms.downloadfile({divId:this.id+"download",inputLinkId:this.id+"download-link",iframeId:this.id+"-iframe"})}.bind(this),c.className="ss-download sprite-32",c.alt="Download"):(b.title="Download Disabled",b.onclick=function(){return!1},b.removeAttribute("onclick"),
c.className="ss-download-disabled sprite-32",c.alt="Download Disabled");return b};e.prototype.printLink=function(a){var b=$ms.$(this.id+"a-print"),c=$ms.$(this.id+"img-print");c||(b=document.createElement("a"),c=document.createElement("img"),b.id=this.id+"a-print",c.id=this.id+"img-print",b.title="Print Image",c.className="ss-print sprite-32",c.style.width="44px",c.src=$ms.STATIC_IMG_COMMON+"/blank.gif",c.alt="Print",b.appendChild(c));b.onclick=function(d){d.stopPropagation();$ms.printDiv(this.divLarge[a].id);
"undefined"!==typeof this.logPrintFn&&this.files[a].logPrintFn;return!1}.bind(this);return b};e.prototype.locateLink=function(a){var b=$ms.$(this.id+"a-locate"),c=$ms.$(this.id+"img-locate");b||(b=document.createElement("a"),c=document.createElement("img"),b.id=this.id+"a-locate",c.id=this.id+"img-locate",c.style.width="44px",c.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.appendChild(c));this.files[a].locateLink?(b.title="Locate Post for Image",b.href=this.files[a].locateLink,b.onclick=function(d){this.close(d)}.bind(this),
c.className="ss-locate sprite-32",c.alt="Locate Post"):(b.title="Locate Post Disabled",b.removeAttribute("href"),b.onclick=function(){return!1},b.removeAttribute("onclick"),c.className="ss-locate-disabled sprite-32",c.alt="Locate Post Disabled");return b};e.prototype.emptylink=function(a,b){var c=$ms.$(a);$ms.$(b);if(!c){c=document.createElement("a");var d=document.createElement("img");c.id=a;d.id=b;d.className="ss-empty sprite-32";d.style.width="44px";d.src=$ms.STATIC_IMG_COMMON+"/blank.gif";d.alt=
"Empty Button";c.appendChild(d)}return c};e.prototype.nextLinklarge=function(a){var b=$ms.$(this.id+"a-next-large");a=$ms.$(this.id+"img-next-large");a||(b=document.createElement("a"),a=document.createElement("img"),b.id=this.id+"a-next-large",b.className="ss-next-large",a.id=this.id+"img-next-large",b.appendChild(a));b.title="Next Image";b.onclick=function(c){c.stopPropagation();this.loadslide(this.slide+1,"button-next-click")}.bind(this);a.className="ss-next-large sprite-90";a.src=$ms.STATIC_IMG_COMMON+
"/blank.gif";a.alt="Next";return{img:a,a:b}};e.prototype.prevlinklarge=function(a){var b=$ms.$(this.id+"a-prev-large");a=$ms.$(this.id+"img-prev-large");a||(b=document.createElement("a"),a=document.createElement("img"),b.id=this.id+"a-prev-large",b.className="ss-prev-large",a.id=this.id+"img-prev-large",b.appendChild(a));b.title="Next Image";b.onclick=function(c){c.stopPropagation();this.loadslide(this.slide-1,"button-previous-click")}.bind(this);a.className="ss-prev-large sprite-90";a.src=$ms.STATIC_IMG_COMMON+
"/blank.gif";a.alt="Next";return{img:a,a:b}};e.prototype.closeLinklarge=function(){var a=$ms.$(this.id+"a-close-large"),b=$ms.$(this.id+"img-close-large");b||(a=document.createElement("a"),b=document.createElement("img"),a.id=this.id+"a-close-large",a.className="ss-close-large",b.id=this.id+"img-close-large",b.className="ss-close-large",a.title="Exit Slideshow",a.onclick=function(c){this.close(c)}.bind(this),b.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.style.width="22px",b.alt="Close",a.appendChild(b));
return{img:b,a}};e.prototype.createSpace=function(a,b){var c=$ms.$(this.id+"a-space"+b),d=$ms.$(this.id+"img-space"+b);d||(c=document.createElement("a"),d=document.createElement("img"),c.id=this.id+"a-space"+b,c.title="",d.id=this.id+"img-space"+b,d.style.width=a+"px",d.style.height="32px",d.src=$ms.STATIC_IMG_COMMON+"/blank.gif",c.appendChild(d));return c};e.prototype.otherLink=function(a){var b=$ms.$(this.id+"a-feedback"),c=$ms.$(this.id+"img-feedback");c||(b=document.createElement("a"),c=document.createElement("img"),
b.id=this.id+"a-feedback",c.id=this.id+"img-feedback",c.style.width="44px",c.src=$ms.STATIC_IMG_COMMON+"/blank.gif",b.appendChild(c));if(this.files[a].otherLink&&0<this.files[a].otherLink.length){var d=this.files[a].otherLink;b.title="Enter Feedback & Rating";b.onclick=function(f){window.location.href=d;this.close(f);return!1}.bind(this);c.className="ss-feedback sprite-32";c.alt="Enter Feeback"}else b.removeAttribute("href"),b.title="Feedback & Rating Disabled",b.onclick=function(){return!1},b.removeAttribute("onclick"),
c.className="ss-feedback-disabled sprite-32",c.alt="Enter Feeback Disabled";return b};e.prototype.slidePositionText=function(a){return"("+(a+1)+" / "+this.count+")"};e.prototype.line1Text=function(a){return"undefined"===typeof this.files[a].line1Text?"":this.files[a].line1Text};e.prototype.line2Text=function(a){return"undefined"===typeof this.files[a].line2Text?"":this.files[a].line2Text};e.prototype.scrolldiv=function(a){"object"!==typeof a&&(a=$ms.$(a));var b=this.divFilmstrip.scrollLeft+(this.divFilmstrip.offsetWidth-
5)-a.offsetWidth;a.offsetLeft<=this.divFilmstrip.scrollLeft+5?this.divFilmstrip.scrollLeft=a.offsetLeft-5:a.offsetLeft>=b&&(this.divFilmstrip.scrollLeft=a.offsetLeft-(this.divFilmstrip.offsetWidth-5-a.offsetWidth)+36)};e.prototype.fullScreen=function(){this.isFullScreen?($ms.cancelFullScreen(),this.isFullScreen=!1,$ms.removeClass($ms.$(this.id+"img-full"),"ss-exit-full-screen"),$ms.addClass($ms.$(this.id+"img-full"),"ss-full-screen")):($ms.requestFullScreen(this.divWrapper),this.isFullScreen=!0,$ms.removeClass($ms.$(this.id+
"img-full"),"ss-full-screen"),$ms.addClass($ms.$(this.id+"img-full"),"ss-exit-full-screen"));this.resetZoom();this.resize();this.fitButtons();this.centerImage(this.slide);this.resetCurrentSlidePosition()};e.prototype.startMagnifier=function(a){var b=$ms.$(this.id+"magnifier");if(b)this.closeMagnifier();else{var c=$ms.$(this.id+"buttons-large");this.divLarge[this.slide].style.cursor="pointer";b=document.createElement("div");b.id=this.id+"magnifier";b.className="ss-magnifier";this.divLarge[this.slide].appendChild(b);
$ms.addClass(c,"display-none");this.capturemousewheel(!0);this.settings.divExternalMagnifier&&(this.settings.divExternalMagnifier.style.zIndex=parseInt(getComputedStyle($ms.$(this.id+"opaque")).getPropertyValue("z-index"))+1);this.objMagnifier=new $msRoot.Slideshow.Magnifier({initMagZoom:this.settings.initMagZoom,magnifierStyles:this.settings.magnifierStyles,divMagnifier:b,container:this.divLarge[this.slide],img:this.img[this.slide],divExternalMagnifier:this.settings.divExternalMagnifier,magnifierSize:this.settings.magnifierSize});
this.objMagnifier.initmagnifier();this.objMagnifier.moveMagnifier(a)}};e.prototype.closeMagnifier=function(){var a=$ms.$(this.id+"magnifier"),b=$ms.$(this.id+"buttons-large");return a?($ms.removeClass(b,"display-none"),a.parentNode.removeChild(a),this.magZoom=this.settings.initMagZoom,this.objMagnifier.removelistener(),this.objMagnifier.close(),this.objMagnifier=null,this.capturemousewheel(!1),!0):!1};e.prototype.capturemousewheel=function(a){"undefined"===typeof this.wheelListener&&(this.wheelListener=
function(b){this.wheel(b)}.bind(this));void 0!==window.onmousewheel?a?window.addEventListener("mousewheel",this.wheelListener):window.removeEventListener("mousewheel",this.wheelListener):void 0!==window.onwheel&&(a?window.addEventListener("DOMMouseScroll",this.wheelListener,!1):window.removeEventListener("DOMMouseScroll",this.wheelListener))};e.prototype.wheel=function(a){if(a.ctrlKey){var b=0;a||(a=window.event);a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);b&&(b/=Math.abs(b),$ms.$(this.id+
"magnifier")?this.zoomMagnifier(a,b):this.zoomImageStart(1===b,{x:a.pageX,y:a.pageY}));a.preventDefault&&a.preventDefault();a.returnValue=!1}};e.prototype.zoomMagnifier=function(a,b){this.objMagnifier&&this.objMagnifier.zoomMagnifier(a,b)};e.prototype.resizeWindow=function(a){this.isFullScreen?(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.fullScreen(),this.resize(),this.fitButtons(),this.centerImage(this.slide),this.resetCurrentSlidePosition()):
this.isTouch&&0<this.touch.distance?this.fitButtons():(this.resize(),this.fitButtons(),this.centerImage(this.slide),this.resetCurrentSlidePosition());this.orientation=screen.orientation;1!==this.zoom&&(this.zoom=1,this.resetZoom());a||this.stopWait("remove")};e.prototype.keypress=function(a){a.stopPropagation&&a.stopPropagation();switch(a.keyCode){case 27:if(this.closeMagnifier())break;this.settings.escapeKeyCloses&&this.close(a);break;case 37:a.preventDefault();this.loadslide(this.slide-1,"keypress-previous");
break;case 39:a.preventDefault(),this.loadslide(this.slide+1,"keypress-next")}};e.prototype.zoomImage=function(a){if(this.movedImage)this.movedImage=!1;else if("magnifier"===this.settings.zoomMode)this.zoomMagnifier(a,a.ctrlKey?-1:1);else{if($ms.hasClass(this.divLarge[this.slide],"move-next-"+this.slide)||$ms.hasClass(this.divLarge[this.slide],"move-prev-"+this.slide))1!==this.zoom&&(v("zoom !== 1 with zoomImage: "),this.zoom=1),this.resetCurrentSlidePosition();this.slideShowRunning&&this.playPause("pause",
"click");var b=1;a.ctrlKey&&(b=-1);var c=this.zoom;this.zoom+=.2*b;this.zoom=$ms.round(Math.min(6,Math.max(1,this.zoom)),1);if(1===this.zoom)this.resetZoom(this.divLarge[this.slide],this.img[this.slide]);else{var d=$ms.getOffset(this.divLarge[this.slide]),f=getComputedStyle(this.img[this.slide]);b=parseInt(f.left);f=parseInt(f.top);var h=a.pageY-d.y;a=a.pageX-d.x;d=this.zoom/c;c=-((-b+a)*d-a);b=-((-f+h)*d-h);f=parseInt(this.largeSize[this.slide].displayWidth)*this.zoom;a=Math.min(parseInt(this.divWrapper.style.width),
f);h=a-parseInt(this.divLarge[this.slide].style.width);parseInt(this.img[this.slide].style.width);this.divLarge[this.slide].style.width=a+"px";a=(parseFloat(this.divWrapper.style.width)-parseFloat(this.divLarge[this.slide].style.width))/2;this.divLarge[this.slide].style.left=a+"px";c+=h/2;this.img[this.slide].style.height=parseInt(this.divLarge[this.slide].style.height)*this.zoom+"px";this.img[this.slide].style.width=f+"px";this.img[this.slide].style.top=b+"px";this.img[this.slide].style.left=c+"px";
this.img[this.slide].style.cursor="grab"}}};e.prototype.resetZoom=function(a,b){"undefined"===typeof a&&(a=this.divLarge[this.slide],b=this.img[this.slide]);for(var c=0;c<this.divLarge.length;c++)if(this.divLarge[c].id===a.id){this.divLarge[c].style.width=parseInt(this.largeSize[c].displayWidth)+"px";var d=(parseFloat(this.divWrapper.style.width)-parseFloat(this.divLarge[c].style.width))/2;this.divLarge[c].style.left=d+"px";break}b.style.top="0px";b.style.left="0px";b.style.height=a.style.height;
b.style.width=a.style.width;b.style.cursor="default";this.zoom=1};e.prototype.zoomImageStart=function(a,b){var c={};c.ctrlKey=!a;"undefined"!==typeof b?(c.pageX=b.x,c.pageY=b.y):(a=this.divLarge[this.slide].getBoundingClientRect(),b=$ms.getOffset(this.divLarge[this.slide]),c.pageX=b.x+a.width/2,c.pageY=b.y+a.height/2);this.zoomImage(c)};e.prototype.mousedown=function(a,b,c){1!==this.zoom&&(a.stopPropagation(),a.preventDefault(),this.moveInit={},this.moveInit.pageX=a.pageX,this.moveInit.pageY=a.pageY,
this.moveInit.div=b,this.moveInit.img=this.img[c],this.moveInit.imgOffset=$ms.getOffset(this.img[c]),a=getComputedStyle(this.img[c]),this.moveInit.left=a.left,this.moveInit.top=a.top,this.moveInit.i=c,this.moveInit.divOffset=$ms.getOffset(b),this.mousemoveListener=function(d){this.mousemove(d)}.bind(this),b.addEventListener("mousemove",this.mousemoveListener,!1),this.mouseupListener=function(d){this.mouseup(d,b,c)}.bind(this),b.addEventListener("mouseup",this.mouseupListener,!1))};e.prototype.mouseup=
function(a,b,c){1!==this.zoom&&(a.stopPropagation(),b.removeEventListener("mousemove",this.mousemoveListener),this.moveInit={},b.removeEventListener("mouseup",this.mouseupListener))};e.prototype.mousemove=function(a){if(1!==this.zoom&&"undefined"!==typeof this.moveInit.pageX){this.movedImage=!0;var b=a.pageY-this.moveInit.pageY;a=a.pageX-this.moveInit.pageX;this.moveInit.img.style.top=parseInt(this.moveInit.top)+b+"px";this.moveInit.img.style.left=parseInt(this.moveInit.left)+a+"px"}};e.prototype.adjustImageSizeForBorder=
function(a){var b=getComputedStyle(a);a.style.height=parseInt(a.style.height)-(Math.ceil(parseFloat(b.borderTopWidth))+Math.ceil(parseFloat(b.borderBottomWidth)))+"px";a.style.width=parseFloat(a.style.width)-(Math.ceil(parseFloat(b.borderLeftWidth))+Math.ceil(parseFloat(b.borderRightWidth)))+"px"};e.prototype.startSlideshow=function(){function a(f){c||=f;if(this.slideShowRunning){if(f-c>this.settings.slideshowInterval){if(this.slide<this.count-1||this.settings.slideshowWrap)b=this.slide+1,this.loadslide(b,
"button-playpause-auto");if(this.slide>=this.count-1&&!this.settings.slideshowWrap){this.playPause("pause","click");this.slideShowRunning=!1;return}c=f}var h=a.bind(this);this.ssRafId=requestAnimationFrame.bind(window)(function(){h(Date.now())})}}var b,c;this.slideShowRunning=!0;var d=a.bind(this);this.ssRafId=requestAnimationFrame.bind(window)(function(){d(Date.now())})};e.prototype.stopSlideshow=function(){this.slideShowRunning=!1;cancelAnimationFrame.bind(window)(this.ssRafId);this.ssRafId=void 0};
e.prototype.calcMarginX=function(a){return(parseFloat(this.divWrapper.style.width)-parseFloat(a.displayWidth))/2};e.prototype.calcMarginY=function(a){return(parseFloat(this.divMiddle.style.height)-t-parseFloat(a.displayHeight))/2};e.prototype.wait=function(a){if("undefined"!==typeof a)if(2===a){if(this.settings.waitAnimation!==a){this.stopWait("remove");this.settings.waitAnimation=a;var b=document.createElement("div");b.id=this.id+"wait-gif";b.className="ss-wait ss-loading";this.divMiddle.appendChild(b)}}else{$ms.$(this.id+
"wait-gif")&&$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif"));var c=[];c.push({});c.push({line:"rgb(36,16,203)",spanDot:"rgb(212,20,30)"});c.push({line:"rgb(133,45,244)",spanDot:"rgb(252,126,72)"});c.push({line:"rgb(244,45,241)",spanDot:"rgb(237,235,41)"});c.push({line:"rgb(249,19,150)",spanDot:"rgb(172,237,41)"});c.push({line:"rgb(212,20,30)",spanDot:"rgb(78,240,43)"});c.push({line:"rgb(252,126,72)",spanDot:"rgb(56,231,144)"});c.push({line:"rgb(237,235,41)",spanDot:"rgb(37,234,204)"});
c.push({line:"rgb(172,237,41)",spanDot:"rgb(48,156,223)"});c.push({line:"rgb(78,240,43)",spanDot:"rgb(37,68,231)"});c.push({line:"rgb(56,231,144)",spanDot:"rgb(133,45,244)"});c.push({line:"rgb(37,234,204)",spanDot:"rgb(244,45,241)"});"undefined"===typeof a?a=this.settings.waitAnimation:this.settings.waitAnimation!==a&&(this.stopWait("remove"),this.settings.waitAnimation=a);if($ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+"wait")){$ms.$(this.id+"wait").style.display="block";for(var d=1;11>=d;d++)$ms.removeClass($ms.$(this.id+
"line"+d),"ss-wait-animation-paused")}else{var f=document.createElement("style");f.id=this.id+"waitStyleSheet";f.appendChild(document.createTextNode(""));document.head.appendChild(f);f.sheet.insertRule(".ss-wait-animation-paused {animation-play-state: paused}",0);b=document.createElement("div");b.id=this.id+"wait";b.className="ss-wait";b.style.width="350px";b.style.height="350px";for(d=1;11>=d;d++){var h=document.createElement("div");h.className="ss-wait-line ss-wait-line"+d;h.id=this.id+"line"+d;
var m=document.createElement("span");m.className="ss-wait-circle ss-wait-circle-top";h.appendChild(m);m=document.createElement("span");m.className="ss-wait-circle ss-wait-circle-bottom";h.appendChild(m);b.appendChild(h);if(0===a)h=5;else if(1===a)h=20;else return;h=".ss-wait-line"+d+"{margin-left: "+35*d+"px;background-color: "+c[d].line+";"+k+"animation: ss-wait-line "+h+"s cubic-bezier(0.250, 0, 0.705, 1) "+.25*(d+1)+"s infinite;}";f.sheet.insertRule(h,0);h=".ss-wait-line"+d+"::before{content: '"+
"PLEASE WAIT".substr(d-1,1)+"'; line-height: 120px; font-size: 200%; color: "+c[d].spanDot+"; }";f.sheet.insertRule(h,0);h=".ss-wait-line"+d+" > span {background-color: "+c[d].spanDot+";}";f.sheet.insertRule(h,0);0===a?(h="@"+k+"keyframes ss-wait-line{0%{height: 4px; top: 0px; left: 0px; transform: rotate(-65deg)}10%{height: 220px; top: -110px; left: 15px;}45%{height: 200px; top: -100px; left: 25px;}70%{height: 8px; top: 0px; left: 25px; transform: rotate(0deg);}100%{height: 8px; top: 0px; left: 15px; transform: rotate(0deg);}}",
f.sheet.insertRule(h,0)):1===a&&(h="@"+k+"keyframes ss-wait-line{0%{height: 4px; top: 0px; left: 0px; transform: rotate(-65deg)}2.5%{height: 220px; top: -110px;}11.25%{height: 200px; top: -100px;}17.5%{height: 8px; top: 0px; left: 15px; transform: rotate(0deg); }24%{height: 8px; top: 0px; left: 25px; transform: rotate(0deg);}26%{height: 4px; top: 0px; left: 25px; transform: rotate(25deg)}27.5%{height: 220px; top: -110px; left: 15px;}36.25%{height: 200px; top: -100px;}42.5%{height: 8px; top: 0px; transform: rotate(90deg);}49%{height: 4px; top: 0px; left: 0px; transform: rotate(90deg);}51%{height: 4px; top: 0px; left: 0px; transform: rotate(115deg)}52.5%{height: 220px; top: -110px;}61.5%{height: 200px; top: -100px;}67.5%{height: 8px; top: 0px; left: 15px; transform: rotate(180deg); }74%{height: 8px; top: 0px; left: 25px; transform: rotate(180deg);}76%{height: 4px; top: 0px; left: 25px; transform: rotate(205deg)}77.5%{height: 220px; top: -110px; left: 15px; }86.25%{height: 200px; top: -100px;}92.5%{height: 8px; top: 0px; left: 0px; transform: rotate(270deg);}100%{height: 8px; top: 0px; left: 0px; transform: rotate(270deg);}}",
f.sheet.insertRule(h,0))}a=parseInt(b.style.height);c=parseInt(b.style.width);d=$ms.getOffset(this.settings.container);f=d.y-$ms.getScroll().y;h=d.x-$ms.getScroll().x;m=Math.min(window.innerHeight,d.height);b.style.marginLeft=(Math.min(window.innerWidth,d.width)-(h+c))/2-65+"px";b.style.marginTop=Math.max(100,(m-(f+a))/2+100)+"px";this.divMiddle.appendChild(b)}}};e.prototype.stopWait=function(a){if($ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+"wait"))if("remove"===a)$ms.$(this.id+"waitStyleSheet").parentNode.removeChild($ms.$(this.id+
"waitStyleSheet")),$ms.$(this.id+"wait").parentNode.removeChild($ms.$(this.id+"wait"));else{for(var b=1;11>=b;b++)$ms.addClass($ms.$(this.id+"line"+b),"ss-wait-animation-paused");a||($ms.$(this.id+"wait").style.display="none")}else $ms.$(this.id+"wait-gif")&&$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif"))};e.prototype.resetCurrentSlidePosition=function(a){this.divLarge[this.slide].style.left=this.calcMarginX(this.largeSize[this.slide])+"px";$ms.removeClass(this.divLarge[this.slide],
"move-next-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-prev-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-next-old"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-prev-old"+this.slide);$ms.removeClass(this.divLarge[this.slide],"ss-size-move-next-old-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"ss-size-move-prev-old-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"ss-size-move-next-"+this.slide);$ms.removeClass(this.divLarge[this.slide],
"ss-size-move-prev-"+this.slide)};e.prototype.shortFilename=function(a){if("undefined"!==typeof a)return a=a.substr(a.lastIndexOf("/")+1),-1!=a.lastIndexOf(".")&&(a=a.substring(0,a.lastIndexOf("."))),a};e.prototype.validExtension=function(a){var b=[".jpg",".jpeg",".bmp",".gif",".png"];if(0<a.length){for(var c=!1,d=0;d<b.length;d++)if(a.substr(a.length-b[d].length,b[d].length).toLowerCase()===b[d].toLowerCase()){c=!0;break}if(!c)return!1}return!0};return e}();
$msRoot.Slideshow.Magnifier=function(H){function e(g){this.settings=$ms.cloneSettings(r,g);this.magZoom=this.settings.initMagZoom;this.id="ms-magnifier"+q++ +"-";u.push(this)}var u=[],q=0,r={initMagZoom:4,magnifierStyles:void 0,magnifierSize:{height:100,width:100},divMagnifier:void 0,container:void 0,img:void 0,divExternalMagnifier:void 0};e.getInstance=function(g){if("undefined"!==typeof g)for(var l=0;l<u.length;l++){if(u[l].id===g)return u[l]}else return u};e.prototype.initmagnifier=function(){this.settings.divMagnifier.style.height=
parseInt(this.settings.magnifierSize.height)+"px";this.settings.divMagnifier.style.width=parseInt(this.settings.magnifierSize.width)+"px";this.imgCopy=document.createElement("img");this.imgCopy.id=this.id+"imagecopy";this.externalState={created:!1,visibilityHidden:!1,displayNone:!1,displayNoneClass:!1};if(this.settings.divExternalMagnifier){"object"!==typeof this.settings.divExternalMagnifier?(this.externalState.created=!0,this.settings.divExternalMagnifier=document.createElement("div"),this.settings.divExternalMagnifier.style.border=
"1px solid black",this.settings.divExternalMagnifier.style.position="absolute",this.settings.divExternalMagnifier.style.overflow="hidden",document.body.appendChild(this.settings.divExternalMagnifier)):("hidden"===getComputedStyle(this.settings.divExternalMagnifier).getPropertyValue("visibility")?(this.settings.divExternalMagnifier.style.visibility="visible",this.externalState.visibilityHidden=!0):"none"===getComputedStyle(this.settings.divExternalMagnifier).getPropertyValue("display")?(this.settings.divExternalMagnifier.style.display=
"block",this.externalState.displayNone=!0):$ms.hasClass(this.settings.divExternalMagnifier,"display-none")&&($ms.removeClass(this.settings.divExternalMagnifier,"display-none"),this.externalState.displayNoneClass=!0),this.settings.divExternalMagnifier.style.overflow="hidden");this.settings.divExternalMagnifier.appendChild(this.imgCopy);if(this.settings.magnifierStyles)for(var g in this.settings.magnifierStyles)"undefined"!==typeof this.settings.magnifierStyles[g]&&(this.settings.divExternalMagnifier.style[g]=
this.settings.magnifierStyles[g]);else this.settings.divExternalMagnifier.style.top="10px",this.settings.divExternalMagnifier.style.left="625px",this.settings.divExternalMagnifier.style.width="600px",this.settings.divExternalMagnifier.style.height="600px",this.settings.divExternalMagnifier.style.border="1px solid black";this.imgCopy.style.position="absolute"}else this.settings.divMagnifier.appendChild(this.imgCopy);this.moveMagnifierListener=function(l){this.moveMagnifier(l)}.bind(this);this.settings.container.addEventListener("mousemove",
this.moveMagnifierListener,!1);this.imgCopy.src=this.settings.img.src;this.imgCopy.height=this.settings.img.height*this.magZoom;this.imgCopy.width=this.settings.img.width*this.magZoom};e.prototype.zoomMagnifier=function(g,l){this.settings.divMagnifier&&(this.magZoom=+this.magZoom+.2*l,this.magZoom=Math.min(10,Math.max(1,this.magZoom)),this.imgCopy.height=this.settings.img.height*this.magZoom,this.imgCopy.width=this.settings.img.width*this.magZoom,this.moveMagnifier(g))};e.prototype.moveMagnifier=
function(g){var l=this.getPosition(this.settings.container),t=g.pageX-l.x-this.settings.divMagnifier.clientWidth/2,z=g.pageY-l.y-this.settings.divMagnifier.clientHeight/2;this.settings.divMagnifier.style.left=t+"px";this.settings.divMagnifier.style.top=z+"px";if(this.settings.divExternalMagnifier){var y=this.settings.divExternalMagnifier.getBoundingClientRect();l=this.settings.divMagnifier.getBoundingClientRect();var A=this.imgCopy.getBoundingClientRect(),G=this.settings.container.getBoundingClientRect();
g=A.width-y.width;y=A.height-y.height;A=G.height-l.height;l=G.width-l.width;this.settings.divMagnifier.style.top=Math.min(A,Math.max(0,z))+"px";this.settings.divMagnifier.style.left=Math.min(l,Math.max(0,t))+"px";0<y&&0<A&&(t=parseInt(this.settings.divMagnifier.style.top)/A,this.imgCopy.style.top=-t*y+"px");0<g&&0<l&&(t=parseInt(this.settings.divMagnifier.style.left)/l,this.imgCopy.style.left=-t*g+"px")}else this.imgCopy.style.top=-(z-this.settings.container.clientTop+(g.pageY-l.y)*(this.magZoom-
1))+"px",this.imgCopy.style.left=-(t+(g.pageX-l.x)*(this.magZoom-1))+"px"};e.prototype.getPosition=function(g){for(var l=0,t=0;g;){var z=this.gettranslate(g);l+=g.offsetLeft+z.x-g.scrollLeft;t+=g.offsetTop+z.y-g.scrollTop;g=g.offsetParent}return{x:l,y:t}};e.prototype.gettranslate=function(g){var l=0,t=0;g=window.getComputedStyle(g,null);g=g.getPropertyValue("transform")||g.getPropertyValue("-moz-transform")||g.getPropertyValue("-webkit-transform")||g.getPropertyValue("-ms-transform")||g.getPropertyValue("-o-transform");
try{if("undefined"!==typeof g&&"none"!==g){var z=g.split("(")[1].split(")")[0].split(",").map(parseFloat);6<=z.length&&(l=z[4],t=z[5])}}catch(y){console.log("Matrix invalid: "+g)}return{x:l,y:t}};e.prototype.removelistener=function(){this.settings.container.removeEventListener("mousemove",this.moveMagnifierListener)};e.prototype.close=function(){this.settings.divExternalMagnifier&&(this.externalState.created?(this.settings.divExternalMagnifier.parentNode.removeChild(this.settings.divExternalMagnifier),
this.settings.divExternalMagnifier=!0):this.externalState.visibilityHidden?this.settings.divExternalMagnifier.style.visibility="hidden":this.externalState.displayNone?this.settings.divExternalMagnifier.style.display="none":this.externalState.displayNoneClass&&$ms.addClass(this.settings.divExternalMagnifier,"display-none"));this.imgCopy.parentNode.removeChild(this.imgCopy);for(var g=0;g<u.length;g++)if(u[g].id===this.id){u.splice(g,1);break}};return e}();
$msRoot.MSTouch=function(H){function e(q){this.tpCache=[];this.scaling=!1;this.distance=0;this.settings=u;if("undefined"!==typeof q)for(var r in q)q.hasOwnProperty(r)&&(this.settings[r]=q[r]);"undefined"===typeof this.settings.captureNode&&(this.settings.captureNode=document.body);this.settings.captureNode.addEventListener("touchstart",function(g){2===g.touches.length&&(this.scaling=!0,this.pinchStart(g))}.bind(this));this.settings.captureNode.addEventListener("touchmove",function(g){this.scaling&&
this.pinchMove(g)}.bind(this));this.settings.captureNode.addEventListener("touchend",function(g){this.scaling&&(this.pinchEnd(g),this.scaling=!1)}.bind(this))}var u={captureNode:void 0,logElement:void 0};e.prototype.pinchStart=function(q){if(2===q.touches.length){this.distance=0;this.tpCache=[];for(var r=0;r<q.touches.length;r++)this.tpCache.push(q.touches[r])}};e.prototype.pinchMove=function(q){if(2===q.touches.length){for(var r=-1,g=-1,l=0;l<this.tpCache.length;l++)this.tpCache[l].identifier===
q.touches[0].identifier&&(r=l),this.tpCache[l].identifier===q.touches[1].identifier&&(g=l);0<=r&&0<=g?this.distance=Math.max(Math.abs(this.tpCache[r].pageX-q.touches[0].pageX),Math.abs(this.tpCache[g].pageX-q.touches[1].pageX),Math.abs(this.tpCache[r].pageY-q.touches[0].pageY),Math.abs(this.tpCache[g].pageY-q.touches[1].pageY)):this.tpCache=[]}};e.prototype.pinchEnd=function(q){this.tpCache=[]};e.prototype.log=function(q,r,g){if("undefined"!==typeof this.settings.logElement){q=v(q);if("undefined"!==
typeof r){q+=" ==>t="+r.touches.length+" ==>tT="+r.targetTouches.length+" ==>cT="+r.changedTouches.length;for(var l=0;l<r.targetTouches.length;l++);}this.settings.logElement.innerHTML=g?q:this.settings.logElement.innerHTML+q}};e.prototype.clearLog=function(){this.settings.logElement&&(this.settings.logElement.innerHTML="")};return e}();
