
$msRoot.createNS("Slideshow");$msRoot.Slideshow=(function(q){var r=[];var s=0;var e;var o;var j;var f;var p=1.5;var h;var m;var g=75;var l;var a;var b=44;var k;var u;var d=["none","fade","h-move","h-move-fade","size","size-fade"];var c={slideshowHeight:undefined,slideshowWidth:undefined,slideshowTop:undefined,slideshowLeft:undefined,center:true,slideshowInterval:4000,slideshowWrap:false,ssTransitionSeconds:1,ssTransitionEffect:1,paddingTop:5,container:undefined,zIndex:undefined,resizeWithWindow:false,playOnEnter:false,showFilmstrip:true,showFilmstripToggle:false,showButtons:true,showExitButton:true,showZoomButtons:true,showPlayPauseButton:true,showFullScreenButton:true,showDownloadButton:false,showPrintButton:false,showOtherButton:false,showLocateButton:false,showFirstLastButtons:true,showText:true,linesOfText:2,resizable:false,draggable:false,escapeKeyCloses:false,arrowKeysNavigate:false,zoomMode:"zoom",initMagZoom:4,magnifierSize:{height:200,width:200},divExternalMagnifier:undefined,magnifierStyles:undefined,cbCreate:undefined,cbClose:undefined,wrapperBackground:"rgb(70,70,70)",wrapperBorder:"1px solid grey",opaquePosition:"absolute",opaqueBackground:"rgb(70,70,70,1)",imageBorder:"2px solid white",filmstripBackground:"rgb(170,170,170)",filmstripImageBorder:"2px solid white",filmstripImageHeight:90,waitAnimation:0};var t=[{file:"dragdrop.min.js",ns:"DragDrop"},{file:"resizable.min.js",ns:"Resize"},];$ms.sourceFiles.add(t);$ms.sourceFiles.load();i.getDefaultSettings=function(){var x=w(c);return x;function w(A){if(A==null||typeof(A)!=="object"){return A}var z=Object.assign({},A);for(var y in z){z[y]=w(z[y])}return z}};if(CSSRule.KEYFRAMES_RULE){var n=""}else{if(CSSRule.WEBKIT_KEYFRAMES_RULE){var n="-webkit-"}}i.getInstance=function(x){if(typeof x!=="undefined"){for(var w=0;w<r.length;w++){if(r[w].id==x){return r[w]}}}else{return r}};function i(w){this.id;this.divWrapper;this.divTop;this.divMiddle;this.divLarge=[];this.divSpanButtons;this.divButtons;this.divFilmstrip;this.divSettings;this.imgNextLarge;this.imgPrevLarge;this.imgCloseLarge;this.objMagnifier;this.keypressListener;this.wheelListener;this.mouseupListener;this.slide=-1;this.oldSlide=-1;this.files=[];this.img=[];this.exif=[];this.anchor=[];this.thumbSize=[];this.largeSize=[];this.thumbLoaded=[];this.largeLoaded=[];this.count;this.buttonDivHeight;this.orien="both";this.ssDivWidth=0;this.allLoaded=false;this.preloadCount=3;this.slideShowRunning=false;this.ssRafId;this.transitionRafId;this.animations=[];this.position={top:0,left:0};this.isFullScreen=false;this.isTouch=$ms.isTouchDevice();this.touch;this.filmstripState="visible";this.$resizable;this.filmstripImageBorderWidth=0;this.dropped=false;this.settings=$ms.cloneSettings(i.getDefaultSettings(),w);this.settings.filmstripImageHeight=parseInt(this.settings.filmstripImageHeight);this.magZoom=this.settings.initMagZoom;this.zoom=1;this.id="ms-ss"+s+++"-";r.push(this);if(this.settings.cbCreate){this.settings.cbCreate(this)}}i.prototype.resize=function(){e=10;o=10;var C=this.settings.resizable?6:0;var w=Math.max(window.innerHeight,document.documentElement.clientHeight)-e;var y=Math.max(window.innerWidth,document.documentElement.clientWidth)-o;var E=0;var B=$ms.$(this.id+"title-bar");if(B){E=parseInt(B.style.height)}h=this.settings.filmstripImageHeight+this.filmstripImageBorderWidth+23;if(!this.settings.showFilmstrip||this.filmstripState=="hidden"){h=0}l=this.settings.linesOfText*25;if(!this.settings.showText){l=0}j=200;a=41;if(!this.settings.showButtons){a=0}f=100+l+a+h+E+C;if(this.settings.container!==document.body&&this.settings.container.offsetParent){var z=this.settings.container.offsetParent.getBoundingClientRect()}if(this.isFullScreen){k=y;u=w}else{if(this.settings.resizeWithWindow){if(this.$resizable&&this.$resizable.resizing){k=parseInt(this.settings.container.style.width);u=parseInt(this.settings.container.style.height)}else{if(this.settings.container==document.body){k=y;u=w}else{this.settings.container.style.left="0";this.settings.container.style.top="0";this.divWrapper.style.margin="initial";var x=this.settings.container.offsetParent.getBoundingClientRect();var D=this.settings.container.getBoundingClientRect();k=Math.min(y,z.width-x.left);u=Math.min(w,z.height-x.top);this.settings.container.style.width=k+"px";this.settings.container.style.height=u+"px"}}}else{if(this.settings.container!==document.body){if(this.$resizable&&this.$resizable.resizing){this.settings.slideshowHeight=parseInt(this.settings.container.style.height);this.settings.slideshowWidth=parseInt(this.settings.container.style.width)}else{if(this.settings.slideshowHeight){this.settings.container.style.height=this.settings.slideshowHeight+"px"}if(this.settings.slideshowWidth){this.settings.container.style.width=this.settings.slideshowWidth+"px"}}if(this.settings.center&&!this.dropped){var A=this.settings.container.getBoundingClientRect();this.settings.container.style.left=(y-A.width)/2+"px";this.settings.container.style.top=(w-A.height)/2+"px"}else{if(typeof this.settings.slideshowLeft!=="undefined"&&this.settings.slideshowLeft!==""&&!isNaN(this.settings.slideshowTop)){this.settings.container.style.top=this.settings.slideshowTop+"px"}if(!isNaN(this.settings.slideshowLeft)){this.settings.container.style.left=this.settings.slideshowLeft+"px"}}var A=this.settings.container.getBoundingClientRect();k=Math.max(A.width,j);u=Math.max(A.height,f);if(A.height<f){this.settings.container.style.height=f+"px"}if(A.width<j){this.settings.container.style.width=j+"px"}if(this.settings.container.style.position!=="relative"&&this.settings.container.style.position!=="absolute"&&this.settings.container.style.position!=="fixed"){this.settings.container.style.position="relative"}}else{if(this.settings.slideshowWidth){k=this.settings.slideshowWidth}else{k=y}if(this.settings.slideshowHeight){u=Math.max(this.settings.slideshowHeight,f)}else{u=w}}}}m=u-(l+a+h+E+C+e+4);m=Math.max(m,g);this.divWrapper.style.width=k+"px";this.divMiddle.style.height=parseInt(m+l)+"px"};i.prototype.init=function(y,w){if(typeof y=="undefined"){alert("No file variable passed to slideshow");return}else{if(y.length==0){alert("No files passed to slideshow");return}}if(typeof w=="undefined"){w=0}else{w=parseInt(w)}for(var x=0;x<y.length;x++){this.files.push(new this.emptyFile);for(var z in y[x]){if(y[x].hasOwnProperty(z)){this.files[this.files.length-1][z]=y[x][z]}}}if(this.settings.container==document.body||typeof this.settings.container=="undefined"){this.settings.wrapperBorder="none"}this.filmstripImageBorderWidth=this.borderWidth(this.settings.filmstripImageBorder);this.imageBorderWidth=this.borderWidth(this.settings.imageBorder);this.createForm(w);this.ssshow();this.position={top:window.pageYOffset,left:window.pageXOffset};window.scrollTo(0,0)},i.prototype.borderWidth=function(x){var y=document.createElement("img");y.style.border=x;var w=parseFloat(getComputedStyle(y).getPropertyValue("border-top-width"));if(isNaN(w)){w=0}else{w=($ms.round(w,0))*2}return w};i.prototype.emptyFile=function(){return{filename:undefined,thumb:undefined,downloadLink:undefined,locateLink:undefined,otherLink:undefined,logPrintFn:undefined}},i.prototype.createForm=function(D){if(typeof this.settings.container=="undefined"){this.settings.container=document.body}else{if(typeof this.settings.container=="string"){this.settings.container=$ms.$(this.settings.container)}else{this.settings.container=this.settings.container}if(typeof this.settings.zIndex!=="undefined"){this.settings.container.style.zIndex=this.settings.zIndex}}var C=$ms.$(this.id+"opaque");if(C){C.parentNode.removeChild(C)}C=document.createElement("div");C.id=this.id+"opaque";C.className="ss-opaque";C.style.background=this.settings.opaqueBackground;C.style.position=this.settings.opaquePosition;this.settings.container.appendChild(C);this.divWrapper=document.createElement("div");this.divWrapper.className="ss-wrapper";this.divWrapper.id=this.id+"ss-wrapper";this.divWrapper.style.background=this.settings.wrapperBackground;this.divWrapper.style.border=this.settings.wrapperBorder;this.divWrapper.onclick=function(K){K.stopPropagation();return false};this.settings.container.appendChild(this.divWrapper);if(this.settings.draggable&&this.settings.container!==document.body){var z=document.createElement("div");z.id=this.id+"title-bar";z.className="ms-title-bar ss-titlebar";z.style.height="20px";z.style.lineHeight="20px";z.style.textAlign="center";this.divWrapper.appendChild(z);var x=$ms.createCloseButton(this.id,function(){this.close()}.bind(this));z.appendChild(x);if(this.settings.container.id.length==0){this.settings.container.id=this.id+"container"}$ms.draggable(this.settings.container,{scope:"default",handle:this.id+"title-bar",cbDrop:function(){this.dropped=true;this.settings.container.style.removeProperty("bottom");this.settings.container.style.removeProperty("right");this.settings.container.style.removeProperty("margin");this.settings.container.style.top=Math.max(0,parseInt(this.settings.container.style.top));this.settings.container.style.left=Math.max(0,parseInt(this.settings.container.style.left))}.bind(this)})}this.resizeWindowListener=function(K){this.resizeWindow()}.bind(this);window.addEventListener("resize",this.resizeWindowListener);window.addEventListener("orientationchange",this.resizeWindowListener);if(this.settings.resizable&&this.settings.container!==document.body){this.$resizable=$ms.resizable(this.settings.container,{handles:["se"],hovers:["s","e"],handleColor:"green",cbResize:this.resizeWindow.bind(this)})}if(this.settings.zoomMode=="zoom"){this.capturemousewheel(true)}this.keypressListener=function(K){this.keypress(K)}.bind(this);document.body.addEventListener("keypress",this.keypressListener,false);this.divTop=document.createElement("div");this.divTop.className="ss-top";this.divTop.id=this.id+"ss-top";this.divWrapper.appendChild(this.divTop);this.divMiddle=document.createElement("div");this.divMiddle.className="ss-middle";this.divMiddle.id=this.id+"ss-middle";this.divTop.appendChild(this.divMiddle);this.count=this.files.length;var A=document.createElement("div");A.style.position="relative";var F=document.createElement("div");F.id="img"+this.id+"filmstrip";F.innerHTML="&#9660";F.className="ss-filmstrip-shoh ss-shoh ss-shoh-less";F.title="Hide the filmstrip thumbnail images";if(this.settings.showFilmstripToggle){F.addEventListener("click",function(){var K;if($ms.hasClass(F,"ss-shoh-less")){K="hide";$ms.removeClass(F,"ss-shoh-less");$ms.addClass(F,"ss-shoh-more");this.filmstripState="hidden";F.title="Show the filmstrip thumbnail images"}else{K="show";$ms.removeClass(F,"ss-shoh-more");$ms.addClass(F,"ss-shoh-less");this.filmstripState="visible";F.title="Hide the filmstrip thumbnail images"}$ms.shoh(this.id+"filmstrip",K,true);this.resizeWindow()}.bind(this))}else{F.style.display="none"}A.appendChild(F);this.divFilmstrip=document.createElement("div");this.divFilmstrip.className="ss-filmstrip";this.divFilmstrip.id=this.id+"filmstrip";$ms.addClass(this.divFilmstrip,"display-none");this.divFilmstrip.style.background=this.settings.filmstripBackground;A.appendChild(this.divFilmstrip);var y=document.createElement("div");y.className="ss-filmstrip-content";y.id=this.id+"filmstrip-content";this.divFilmstrip.appendChild(y);this.divWrapper.appendChild(A);this.filmstrip();for(var B=0;B<this.count;B++){this.divLarge[B]=document.createElement("div");this.divLarge[B].className="printme ss-large ms-no-select";this.divLarge[B].id=this.id+"ss-large-"+B;$ms.addClass(this.divLarge[B],"display-none");this.divMiddle.appendChild(this.divLarge[B]);this.divMiddle.onmouseenter=function(K){K.stopPropagation();this.showNavButtons("show")}.bind(this);this.divMiddle.onmouseleave=function(K){K.stopPropagation();this.showNavButtons("hide")}.bind(this);var E=this;!function(L,K){L.addEventListener("click",function(M){this.zoomImage(M)}.bind(E),false);L.addEventListener("mousedown",function(M){this.mousedown(M,L,K)}.bind(E),false)}(this.divLarge[B],B)}this.divSpanButtons=document.createElement("span");this.divSpanButtons.id=this.id+"buttons-large";this.divSpanButtons.className="ss-buttons-large";this.divSpanButtons.ondblclick=function(K){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.selection){document.selection.empty()}}};this.divMiddle.appendChild(this.divSpanButtons);this.buttons(D);this.divTop.appendChild(this.divButtons);if(!this.settings.showButtons){$ms.addClass(this.divButtons,"display-none")}for(var B=0;B<this.files.length;B++){this.largeLoaded[B]=false}var I=document.createElement("div");I.className="ss-title";I.id=this.id+"title";I.style.height=l+"px";I.style.minHeight=l+"px";var H=document.createElement("div");H.className="ss-title-line1";H.id=this.id+"title-line1";I.appendChild(H);var w=document.createElement("span");w.id=this.id+"title-line1-span";H.appendChild(w);var G=document.createElement("div");G.className="ss-title-line2";G.id=this.id+"title-line2";I.appendChild(G);var J=document.createElement("span");J.id=this.id+"title-line2-span";G.appendChild(J);G.style.display=parseInt(this.settings.linesOfText)<2?"none":"";H.style.display=parseInt(this.settings.linesOfText)<1?"none":"";if(!this.settings.showText){$ms.addClass(I,"display-none")}this.divMiddle.appendChild(I);this.loadslide(D,"init");if(this.isTouch){this.touch=new $msRoot.MSTouch({logElement:$ms.$(this.id+"ss-title-line1")})}this.resizeWindow(true);if(this.settings.showFilmstrip){$ms.removeClass(this.divFilmstrip,"display-none")}};i.prototype.ssshow=function(){this.divWrapper.style.visibility="visible";var w=$ms.$(this.id+"opaque");w.style.display="block";$ms.addClass(w,"ss-fade-in-opaque")};i.prototype.close=function(z){if(typeof z!=="undefined"&&z.stopPropagation){z.stopPropagation()}if(typeof z!=="undefined"&&(((z.shiftKey||z.altKey)&&z.ctrlKey)||(z.shiftKey&&z.altKey))){var w=this.settings.waitAnimation;if(z.altKey&&z.ctrlKey){w++;if(w>2){w=0}}if($ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+"wait")&&$ms.$(this.id+"line1")&&!$ms.hasClass($ms.$(this.id+"line1"),"ss-wait-animation-paused")){if(z.altKey&&z.ctrlKey){this.wait(w);return}this.stopWait(z.altKey)}else{if(z.shiftKey&&z.ctrlKey){if($ms.$(this.id+"wait-gif")){$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif"))}else{this.settings.waitAnimation=-1}}this.wait(w)}return}this.closeMagnifier();if(this.slideShowRunning){this.stopSlideshow()}if(this.isFullScreen){this.fullScreen()}var y=$ms.$(this.id+"opaque");if(y){y.parentNode.removeChild(y)}this.divWrapper.parentNode.removeChild(this.divWrapper);window.removeEventListener("resize",this.resizeWindowListener);window.removeEventListener("orientationchange",this.resizeWindowListener);if(!(typeof this.wheelListener=="undefined"||this.wheelListener==null)){if(window.addEventListener){window.removeEventListener("DOMMouseScroll",this.wheelListener)}}document.body.removeEventListener("keypress",this.keypressListener);window.scrollTo(this.position.left,this.position.top);if(this.$resizable){this.$resizable.close()}for(var x=0;x<r.length;x++){if(r[x].id==this.id){r.splice(x,1);break}}if(this.settings.cbClose){this.settings.cbClose(this)}return false};i.prototype.filmstrip=function(){var w;if(this.orien=="both"){this.ssDivWidth=h*p}else{if(this.orien=="portrait"){this.ssDivWidth=h/p}else{this.ssDivWidth=h*p}}for(var y=0;y<this.files.length;y++){var B=this.files[y].filename;var C=this.shortFilename(this.files[y].filename);if(typeof this.files[y].thumb!=="undefined"){w=this.files[y].thumb}else{w=this.files[y].filename}this.thumbLoaded[y]=false;this.thumbSize[y]={};var x=document.createElement("div");x.className="ss-filmstrip-thumb display-none";x.id=this.id+"thumb-"+y;x.style.height=this.settings.filmstripImageHeight+this.filmstripImageBorderWidth+"px";var D=document.createElement("a");var A=this;!function(G,F){D.addEventListener("click",function(H){this.magZoom=this.settings.initMagZoom;this.zoom=1;this.loadslide(G,"filmstrip-click")}.bind(A),false)}(y);var z=document.createElement("img");z.id=this.id+"imgthumb-"+y;z.alt=this.alt(C);z.title=this.title(C);z.height=this.settings.filmstripImageHeight;z.style.border=this.settings.filmstripImageBorder;!function E(G,I,H){G.addEventListener("load",function F(J){this.imgloaded(I,"thumb",G,H)}.bind(A),false)}(z,y,x);z.src=w;D.appendChild(z);x.appendChild(D);$ms.$(this.id+"filmstrip-content").appendChild(x)}};i.prototype.shohFilmStrip=function(){if(hasClass($ms.$("shoh-filmstrip")),"shoh"){}};i.prototype.alt=function(w){if(typeof w=="undefined"){return""}return w.replace(/-/g," ").replace(/_/g," ")};i.prototype.title=function(w){return w.replace(/-/g," ").replace("-thumb","").replace(/_/g," ")};i.prototype.imgloaded=function(y,z,w,x){if(!$msRoot.Slideshow.getInstance(this.id)){return}if(z=="thumb"){this.sizethumbimage(y,w,x)}else{if(z=="large"){this.sizelargeimage(y,w);this.stopWait()}}};i.prototype.sizethumbimage=function(B,C,A){if(!this.thumbLoaded[B]){this.thumbLoaded[B]=true;this.thumbSize[B].naturalWidth=C.naturalWidth;this.thumbSize[B].naturalHeight=C.naturalHeight;this.thumbSize[B].displayWidth=Math.max(this.thumbSize[B].naturalWidth,1);this.thumbSize[B].displayHeight=Math.max(this.thumbSize[B].naturalHeight,1);var E=$ms.round(this.thumbSize[B].displayWidth/this.thumbSize[B].displayHeight,2);this.thumbSize[B].displayHeight=parseInt(Math.min(this.settings.filmstripImageHeight,this.thumbSize[B].displayHeight));this.thumbSize[B].displayWidth=parseInt(this.thumbSize[B].displayHeight*E);if((this.thumbSize[B].displayWidth)>this.ssDivWidth){this.thumbSize[B].displayWidth=parseInt(this.ssDivWidth);this.thumbSize[B].displayHeight=parseInt(this.ssDivWidth/E)}if((this.thumbSize[B].displayHeight)>this.settings.filmstripImageHeight){this.thumbSize[B].displayHeight=this.settings.filmstripImageHeight;this.thumbSize[B].displayWidth=parseInt(this.thumbSize[B].displayHeight*E)}var D=Math.max(this.settings.filmstripImageHeight-this.thumbSize[B].displayHeight,0);C.style.height=this.thumbSize[B].displayHeight+"px";C.style.width=this.thumbSize[B].displayWidth+"px";C.style.paddingTop=D+"px";$ms.removeClass(A,"display-none");this.adjustImageSizeForBorder(C)}var F=0;var x=4;var y=2;for(var z=0;z<this.count;z++){if(typeof this.thumbSize[z]!=="undefined"&&typeof this.thumbSize[z].displayWidth!=="undefined"){F+=parseInt(this.thumbSize[z].displayWidth)+x+y*2}F+=x}$ms.$(this.id+"filmstrip-content").style.width=parseInt(Math.max(F,parseInt(this.divFilmstrip.offsetWidth)))+"px";if(this.slide>=0){var w=$ms.$(this.id+"thumb-"+this.slide);if(typeof w!=="undefined"){this.scrolldiv(w)}}};i.prototype.sizelargeimage=function(x,w){if(!this.largeLoaded[x]){this.largeLoaded[x]=true;this.largeSize[x].naturalWidth=w.naturalWidth;this.largeSize[x].naturalHeight=w.naturalHeight}if(x==this.slide){this.centerImage(x);this.transitionSlides();this.showNavButtons("show")}};i.prototype.transitionSlides=function(){var w=0;if(typeof this.settings.ssTransitionEffect=="string"){w=d.indexOf(this.settings.ssTransitionEffect)}else{if(typeof this.settings.ssTransitionEffect=="number"){w=this.settings.ssTransitionEffect}}switch(w){case -1:case 0:this.transitionSlidesNone();break;case 1:this.transitionSlidesFade();break;case 2:this.transitionSlidesMoveHorizontal(false);break;case 3:this.transitionSlidesMoveHorizontal(true);break;case 4:this.transitionSlidesSize(false);break;case 5:this.transitionSlidesSize(true);break;default:this.transitionSlidesNone();break}};i.prototype.transitionSlidesNone=function(){var w=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=w;if(this.oldSlide>=0){$ms.addClass(this.divLarge[this.oldSlide],"display-none")}$ms.removeClass(this.divLarge[this.slide],"display-none")};i.prototype.transitionSlidesFade=function(){var A=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=A;var y=this.resetStyleSheet();if(!this.findCSSRule(y.sheet,"ss-fade-slide","keyframes")){var x="@"+n+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}";y.sheet.insertRule(x,0)}if(this.oldSlide>=0){this.divLarge[this.oldSlide].style[n+"animation"]="";void this.divLarge[this.oldSlide].offsetWidth;this.divLarge[this.oldSlide].style[n+"animation"]="ss-fade-slide "+this.settings.ssTransitionSeconds+"s forwards linear reverse";this.divLarge[this.oldSlide].style.zIndex="0";var z=this.oldSlide;var w=setInterval(function(){clearInterval(w);$ms.addClass(this.divLarge[z],"display-none")}.bind(this),this.settings.ssTransitionSeconds*1000)}this.divLarge[this.slide].style[n+"animation"]="";void this.divLarge[this.slide].offsetWidth;this.divLarge[this.slide].style[n+"animation"]="ss-fade-slide "+this.settings.ssTransitionSeconds+"s forwards linear normal";$ms.removeClass(this.divLarge[this.slide],"display-none");this.divLarge[this.slide].style.zIndex="10"};i.prototype.transitionSlidesMoveHorizontal=function(Q){var W,V,C,y,J;if(this.slide>this.oldSlide){W=1}else{W=-1}var R=this.resetStyleSheet();var x="move-next-old-"+this.oldSlide;var N="move-prev-old-"+this.oldSlide;var L="move-next-"+this.slide;var K="move-prev-"+this.slide;var U=["move-next-old-"+this.oldSlide,"move-prev-old-"+this.oldSlide,"move-next-"+this.oldSlide,"move-prev-"+this.oldSlide];var I=["move-next-old-"+this.slide,"move-prev-old-"+this.slide,"move-next-"+this.slide,"move-prev-"+this.slide];this.removeCSSRules(R.sheet,U,"keyframes");this.removeCSSRules(R.sheet,I,"keyframes");this.removeCSSRules(R.sheet,U,"style",".");this.removeCSSRules(R.sheet,I,"style",".");if(this.oldSlide>=0){$ms.removeClass(this.divLarge[this.oldSlide],x);$ms.removeClass(this.divLarge[this.oldSlide],N);var G=this.calcMarginX(this.largeSize[this.oldSlide]);this.divLarge[this.oldSlide].style.left=G+"px";y=0;var D;if(W==1){D=x;J=(parseInt(this.largeSize[this.oldSlide].displayWidth)+G)}else{D=N;J=-(parseInt(this.largeSize[this.oldSlide].displayWidth)+G)}var B="@"+n+"keyframes "+D+" {0% {"+n+"transform: translate3d("+y+"px, 0, 0); }100% {"+n+"transform: translate3d("+J+"px, 0, 0); }}";R.sheet.insertRule(B,0)}$ms.removeClass(this.divLarge[this.slide],L);$ms.removeClass(this.divLarge[this.slide],K);var M=this.calcMarginX(this.largeSize[this.slide]);V=0;var P;if(this.oldSlide==-1){this.divLarge[this.slide].style.left=M;P=L;C=0}else{if(W==1){P=L;this.divLarge[this.slide].style.left=(G-parseInt(this.largeSize[this.slide].displayWidth))+"px";C=(-G+parseInt(this.largeSize[this.slide].displayWidth)+M)}else{P=K;this.divLarge[this.slide].style.left=(G+parseInt(this.largeSize[this.oldSlide].displayWidth))+"px";C=G-(parseInt(this.largeSize[this.slide].displayWidth)+M)}}var H="@"+n+"keyframes "+P+" {0% {"+n+"transform: translate3d("+V+"px, 0, 0); }100% {"+n+"transform: translate3d("+C+"px, 0, 0); }}";R.sheet.insertRule(H,0);if(Q&&!this.findCSSRule(R.sheet,"ss-fade-slide","keyframes")){var A="@"+n+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}";R.sheet.insertRule(A,0)}var F=1;var z;var E=this.settings.ssTransitionSeconds;var Y=this.settings.ssTransitionSeconds;if(this.oldSlide>-1){z=Math.abs(J-y)/Math.abs(C-V);if(z>0){E=E/z}else{Y=E*z}var O=n+"animation-name: "+D+(Q?", ss-fade-slide; ":"; ")+n+"animation-duration: "+Y+"s"+(Q?","+Y+"s; ":"; ")+n+"animation-timing-function: linear"+(Q?",linear; ":"; ")+n+"animation-fill-mode: forwards"+(Q?",forwards; ":"; ")+n+"animation-direction: normal"+(Q?",reverse; ":"; ");O="."+D+"{"+O+"}";void this.divLarge[this.slide].offsetWidth;R.sheet.insertRule(O,0);$ms.addClass(this.divLarge[this.oldSlide],D)}var T=n+"animation-name: "+P+(Q?", ss-fade-slide; ":"; ")+n+"animation-duration: "+E+"s"+(Q?","+E+"s; ":"; ")+n+"animation-timing-function: linear"+(Q?",linear; ":"; ")+n+"animation-fill-mode: forwards"+(Q?",forwards; ":"; ")+n+"animation-direction: normal"+(Q?",normal; ":"; ");T="."+P+"{"+T+"}";void this.divLarge[this.slide].offsetWidth;R.sheet.insertRule(T,0);$ms.addClass(this.divLarge[this.slide],P);this.cancelAnimationIntervals();var w=this.slide;var X=this.oldSlide;var S=setInterval(function(){clearInterval(S);this.endListener(w,X)}.bind(this),E*1000);$ms.removeClass(this.divLarge[this.slide],"display-none");this.animations.push({slide:w,oldSlide:X,interval:S})};i.prototype.transitionSlidesSize=function(T){var ac,aa,Y,J,I;var H,O,U,M;if(this.slide>this.oldSlide){ac=1}else{ac=-1}var V=this.resetImage(this.oldSlide);var x="move-next-old-"+this.oldSlide;var R="move-prev-old-"+this.oldSlide;var N="move-next-"+this.slide;var L="move-prev-"+this.slide;var Z=["move-next-old-"+this.oldSlide,"move-prev-old-"+this.oldSlide,"move-next-"+this.oldSlide,"move-prev-"+this.oldSlide,"ss-size-move-next-old-"+this.oldSlide,"ss-size-move-prev-old-"+this.oldSlide,"ss-size-move-next-"+this.oldSlide,"ss-size-move-prev-"+this.oldSlide];var K=["move-next-old-"+this.slide,"move-prev-old-"+this.slide,"move-next-"+this.slide,"move-prev-"+this.slide,"ss-size-move-next-old-"+this.slide,"ss-size-move-prev-old-"+this.slide,"ss-size-move-next-"+this.slide,"ss-size-move-prev-"+this.slide];this.removeCSSRules(V.sheet,Z,"keyframes");this.removeCSSRules(V.sheet,K,"keyframes");this.removeCSSRules(V.sheet,Z,"style",".");this.removeCSSRules(V.sheet,K,"style",".");if(this.oldSlide>=0){$ms.removeClass(this.divLarge[this.oldSlide],x);$ms.removeClass(this.divLarge[this.oldSlide],R);var C;if(ac==1){C=x}else{C=R}}$ms.removeClass(this.divLarge[this.slide],N);$ms.removeClass(this.divLarge[this.slide],L);aa=this.calcMarginX(this.largeSize[this.slide]);Y=this.calcMarginY(this.largeSize[this.slide]);U=parseInt(this.divLarge[this.slide].style.height);M=parseInt(this.divLarge[this.slide].style.width);if(this.oldSlide>-1){J=this.calcMarginX(this.largeSize[this.oldSlide]);I=this.calcMarginY(this.largeSize[this.oldSlide]);H=parseFloat(this.divLarge[this.oldSlide].style.height);O=parseFloat(this.divLarge[this.oldSlide].style.width);$ms.addClass(this.img[this.oldSlide],"ss-center-image");var G=M-O;var D=U-H;var A=(G-D)>0;if(G>0&&A){this.img[this.oldSlide].style.width="100%";this.img[this.oldSlide].style.height="auto"}else{if(D<0){this.img[this.oldSlide].style.height="100%";this.img[this.oldSlide].style.width="auto"}}if(G<0&&!A){this.img[this.slide].style.width="100%";this.img[this.slide].style.height="auto"}else{if(D<0){this.img[this.slide].style.height="100%";this.img[this.slide].style.width="auto"}}this.divLarge[this.slide].style.left=J+"px";this.divLarge[this.slide].style.top=I+"px";this.divLarge[this.slide].style.width=O+"px";this.divLarge[this.slide].style.height=H+"px"}else{J=aa;I=Y;O=M;H=U}$ms.addClass(this.img[this.slide],"ss-center-image");var ae;if(ac==1){ae=N}else{ae=L}var Q=aa-J;var P=Y-I;if(T&&!this.findCSSRule(V.sheet,"ss-fade-slide","keyframes")){var y="@"+n+"keyframes ss-fade-slide {0% {opacity: 0;}100% {opacity: 1;}}";V.sheet.insertRule(y,0)}var F=this.settings.ssTransitionSeconds;if(this.oldSlide>-1){var z="@"+n+"keyframes "+C+" {0% {"+n+"transform: translate3d(0, 0, 0); }100% {"+n+"transform: translate3d("+Q+"px, "+P+"px, 0); }}";V.sheet.insertRule(z,0);var B="@"+n+"keyframes ss-size-"+C+" {0% {width:"+O+"px;height:"+H+"px; }100% {width:"+M+"px;height:"+U+"px; }}";V.sheet.insertRule(B,0);var S=n+"animation-name: "+C+", ss-size-"+C+(T?", ss-fade-slide; ":"; ")+n+"animation-duration: "+F+"s,"+F+"s"+(T?","+F+"s; ":"; ")+n+"animation-timing-function: linear, linear"+(T?",linear; ":"; ")+n+"animation-fill-mode: forwards, forwards"+(T?",forwards; ":"; ")+n+"animation-direction: normal, normal"+(T?",reverse; ":"; ");S="."+C+"{"+S+"}";void this.divLarge[this.oldSlide].offsetWidth;V.sheet.insertRule(S,0);$ms.addClass(this.divLarge[this.oldSlide],C)}var W="@"+n+"keyframes "+ae+" {0% {"+n+"transform: translate3d(0, 0, 0); }100% {"+n+"transform: translate3d("+Q+"px, "+P+"px, 0); }}";V.sheet.insertRule(W,0);var ab="@"+n+"keyframes ss-size-"+ae+" {0% {width:"+O+"px;height:"+H+"px; }100% {width:"+M+"px;height:"+U+"px; }}";V.sheet.insertRule(ab,0);var E=n+"animation-name: "+ae+", ss-size-"+ae+(T?", ss-fade-slide; ":"; ")+n+"animation-duration: "+F+"s,"+F+"s"+(T?","+F+"s; ":"; ")+n+"animation-timing-function: linear, linear"+(T?",linear; ":"; ")+n+"animation-fill-mode: forwards, forwards"+(T?",forwards; ":"; ")+n+"animation-direction: normal, normal"+(T?",normal; ":"; ");E="."+ae+"{"+E+"}";void this.divLarge[this.slide].offsetWidth;V.sheet.insertRule(E,0);$ms.addClass(this.divLarge[this.slide],ae);this.cancelAnimationIntervals();this.divLarge[this.slide].style.left=J+"px";this.divLarge[this.slide].style.top=I+"px";var w=this.slide;var ad=this.oldSlide;var X=setInterval(function(){clearInterval(X);this.endListener(w,ad)}.bind(this),F*1000);$ms.removeClass(this.divLarge[this.slide],"display-none");this.animations.push({slide:w,oldSlide:ad,interval:X})};i.prototype.endListener=function(w,x){this.animations.length=0;if(x>-1){$ms.addClass(this.divLarge[x],"display-none");this.resetImage(x)}$ms.removeClass(this.divLarge[w],"display-none");this.resetImage(w)};i.prototype.cancelAnimationIntervals=function(){if(this.animations.length>0){for(var w=0;w<this.animations.length;w++){clearInterval(this.animations[w].interval);this.resetImage(this.animations[w].oldSlide);$ms.addClass(this.divLarge[this.animations[w].oldSlide],"display-none");$ms.addClass(this.divLarge[this.animations[w].slide],"display-none")}this.animations.length=0}};i.prototype.resetImage=function(w){if(w>-1){$ms.addClass(this.divLarge[w],"visibility-hidden");$ms.removeClass(this.img[w],"ss-center-image");this.img[w].style.height=parseInt(this.largeSize[w].displayHeight-this.imageBorderWidth)+"px";this.img[w].style.width=parseInt(this.largeSize[w].displayWidth-this.imageBorderWidth)+"px";this.img[w].style.top="0";this.img[w].style.left="0";this.divLarge[w].style.height=parseInt(this.largeSize[w].displayHeight)+"px";this.divLarge[w].style.width=parseInt(this.largeSize[w].displayWidth)+"px";this.divLarge[w].style.left=this.calcMarginX(this.largeSize[w])+"px";this.divLarge[w].style.top=this.calcMarginY(this.largeSize[w])+"px";var x=this.resetStyleSheet();$ms.removeClass(this.divLarge[w],"visibility-hidden")}else{var x=this.resetStyleSheet()}return x};i.prototype.resetStyleSheet=function(){var w=$ms.$(this.id+"tempStyleSheet");if(this.animations.length==0&&w){w.parentNode.removeChild(w);w=undefined}if(!w){var w=document.createElement("style");w.id=this.id+"tempStyleSheet";w.appendChild(document.createTextNode(""));document.head.appendChild(w)}return w};i.prototype.removeCSSRules=function(y,B,z,w){if(typeof w=="undefined"){w=""}for(var x=0;x<B.length;x++){var A=this.removeCSSRule(y,w+B[x],z)}};i.prototype.removeCSSRule=function(x,A,y){var z;if(x.cssRules){for(var w=0;w<x.cssRules.length;w++){if(y=="style"){if((x.cssRules[w].type===window.CSSRule.STYLE_RULE||x.cssRules[w].type===window.CSSRule.WEBKIT_STYLE_RULE)&&x.cssRules[w].selectorText===A){x.deleteRule(w);return true}}else{if(y=="keyframes"){if((x.cssRules[w].type===window.CSSRule.KEYFRAMES_RULE||x.cssRules[w].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE)&&x.cssRules[w].name===A){x.deleteRule(w);return true}}}}}};i.prototype.findCSSRule=function(x,z,y){if(x.cssRules){for(var w=0;w<x.cssRules.length;w++){if(typeof y=="style"){if(x.cssRules[w].selectorText===z){return w}}else{if(y=="keyframes"){if((x.cssRules[w].type===window.CSSRule.KEYFRAMES_RULE||x.cssRules[w].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE)&&x.cssRules[w].name===z){return w}}}}}return false};i.prototype.centerImage=function(w){this.largeSize[w].displayWidth=parseInt(Math.max(1,this.largeSize[w].naturalWidth));this.largeSize[w].displayHeight=parseInt(Math.max(1,this.largeSize[w].naturalHeight));var x=k/m;var z=this.largeSize[w].displayWidth/this.largeSize[w].displayHeight;if(z>x){this.largeSize[w].displayWidth=k;this.largeSize[w].displayHeight=parseInt(this.largeSize[w].displayWidth/z)}else{this.largeSize[w].displayHeight=m-this.settings.paddingTop;this.largeSize[w].displayWidth=parseInt(this.largeSize[w].displayHeight*z)}this.resetImage(w);var y=m-parseInt(this.largeSize[w].displayHeight);this.divLarge[this.slide].style.top=y/2+"px";var y=this.calcMarginX(this.largeSize[this.slide]);this.divLarge[this.slide].style.left=y+"px"};i.prototype.loadslide=function(z,B){var A,C;if(z<0){if(this.settings.slideshowWrap){z=this.count-1}else{return}}else{if(z>=this.count){if(this.settings.slideshowWrap){z=0}else{return}}}if(z!==this.slide){var x=$ms.$(this.id+"thumb-"+z);if($ms.hasClass(x,"display-none")&&B!=="init"){var E=false;if(this.slide<z){for(var y=z+1;y<this.count;y++){x=$ms.$(this.id+"thumb-"+(y));if(!$ms.hasClass(x,"display-none")){z=y;E=true;break}}}else{for(var y=z-1;y>=0;y--){x=$ms.$(this.id+"thumb-"+(y));if(!$ms.hasClass(x,"display-none")){z=y;E=true;break}}}if(!E){return}}if(this.slideShowRunning&&B.indexOf("click")!==-1||this.slideShowRunning&&B.indexOf("keypress")!==-1){this.playPause("reset")}if(this.slide>=0){this.oldSlide=this.slide}this.slide=z;this.magZoom=this.settings.initMagZoom;this.zoom=1;if(typeof this.anchor[z]=="undefined"){this.wait(B=="init"?this.settings.waitAnimation:undefined);this.createImage(z)}else{this.resetZoom(this.divLarge[z],this.img[z]);this.centerImage(z);this.transitionSlides()}this.buttons(z);this.fitButtons();$ms.$(this.id+"title-line1-span").innerHTML=this.slidePositionText(z)+"&nbsp;&nbsp;"+this.line1Text(z);$ms.$(this.id+"title-line2-span").innerHTML=this.line2Text(z);var D=$ms.$(this.id+"imgthumb-"+z);$ms.addClass(D,"selected");if(this.oldSlide>=0){D=$ms.$(this.id+"imgthumb-"+this.oldSlide);$ms.removeClass(D,"selected")}this.closeMagnifier();this.preloadImages(z);this.showNavButtons("show");if(this.settings.showDownloadButton){this.downloadLinkdata()}}var w=$ms.$(this.id+"thumb-"+z);this.scrolldiv(w)};i.prototype.preloadImages=function(y){var x=0;if(this.allLoaded||this.preloadCount==0){return}if(y<this.count-1){if(typeof this.anchor[y+1]=="undefined"){this.createImage(y+1);x++;if(x>=this.preloadCount){return}}}if(y>0){if(typeof this.anchor[y-1]=="undefined"){this.createImage(y-1);x++;if(x>=this.preloadCount){return}}}if(typeof this.anchor[0]=="undefined"){this.createImage(0);x++;if(x>=this.preloadCount){return}}if(typeof this.anchor[this.count-1]=="undefined"){this.createImage(this.count-1);x++;if(x>=this.preloadCount){return}}for(var w=y+1;w<this.count-1;w++){if(typeof this.anchor[w]=="undefined"){this.createImage(w);x++;if(x>=this.preloadCount){return}}}for(var w=0;w<y;w++){if(typeof this.anchor[w]=="undefined"){this.createImage(w);x++;if(x>=this.preloadCount){return}}}this.allLoaded=true};i.prototype.createImage=function(z){this.largeLoaded[z]=false;this.largeSize[z]={};var y=this.shortFilename(this.files[z].filename);var w=document.createElement("a");var x=document.createElement("img");x.alt=this.alt(y);x.id=this.id+"imglarge-"+z;x.title=this.title(y);x.src=this.files[z].filename;x.style.position="absolute";x.style.top="0px";x.style.left="0px";x.addEventListener("load",function(){this.imgloaded(z,"large",x)}.bind(this));w.appendChild(x);this.divLarge[z].appendChild(w);this.divLarge[z].style.border=this.settings.imageBorder;this.anchor[z]=w;this.img[z]=x};i.prototype.downloadLinkdata=function(){var x=$ms.$(this.id+"download-link");if(!x){var w=document.createElement("div");w.style.display="none";w.id=this.id+"download";var x=document.createElement("input");x.type="hidden";x.id=this.id+"download-link";w.appendChild(x);this.divWrapper.appendChild(w)}x.value=this.files[this.slide].downloadLink};i.prototype.showNavButtons=function(z){if($ms.$(this.id+"magnifier")){return}if(!this.imgNextLarge){var w=this.nextLinklarge();this.imgNextLarge=w.img;$ms.addClass(this.imgNextLarge,"visibility-hidden");this.divSpanButtons.appendChild(w.a);var y=this.prevlinklarge();this.imgPrevLarge=y.img;$ms.addClass(this.imgPrevLarge,"visibility-hidden");this.divSpanButtons.appendChild(y.a);var x=this.closeLinklarge();this.imgCloseLarge=x.img;$ms.addClass(this.imgCloseLarge,"visibility-hidden");this.divSpanButtons.appendChild(x.a)}if(z=="show"){if(this.slide<this.count-1){$ms.removeClass(this.imgNextLarge,"visibility-hidden")}else{$ms.addClass(this.imgNextLarge,"visibility-hidden")}if(this.slide>0){$ms.removeClass(this.imgPrevLarge,"visibility-hidden")}else{$ms.addClass(this.imgPrevLarge,"visibility-hidden")}$ms.removeClass(this.imgCloseLarge,"visibility-hidden")}else{if(z=="test"){if(this.slide>=this.count-1){$ms.addClass(this.imgNextLarge,"visibility-hidden")}if(this.slide<=0){$ms.addClass(this.imgPrevLarge,"visibility-hidden")}}else{$ms.addClass(this.imgNextLarge,"visibility-hidden");$ms.addClass(this.imgPrevLarge,"visibility-hidden");$ms.addClass(this.imgCloseLarge,"visibility-hidden")}}};i.prototype.buttons=function(x){var A=false;if(typeof this.divButtons=="undefined"){this.divButtons=document.createElement("div");this.divButtons.className="ss-buttons";this.divButtons.id=this.id+"ss-buttons";A=true}var z=this.nestedButtonsDiv("buttons-outer-left","buttons-inner-left");if(A){this.divButtons.appendChild(z.outer)}if(this.settings.showPrintButton){var y=this.printLink(x);if(A){z.inner.appendChild(y)}}if(this.settings.showDownloadButton){var y=this.downloadLink(x);if(A){z.inner.appendChild(y)}}if(this.settings.showOtherButton){var y=this.otherLink(x);if(A){z.inner.appendChild(y)}}if(this.settings.showLocateButton){var y=this.locateLink(x);if(A){z.inner.appendChild(y)}}var y=this.createSpace(10,0);if(A){this.divButtons.appendChild(y)}if(this.settings.showFirstLastButtons){var y=this.firstLink();if(A){this.divButtons.appendChild(y)}}var y=this.previousLink();if(A){this.divButtons.appendChild(y)}if(this.settings.showPlayPauseButton){var y=this.playPauseLink();if(A){this.divButtons.appendChild(y)}}var y=this.nextLink();if(A){this.divButtons.appendChild(y)}if(this.settings.showFirstLastButtons){var y=this.lastLink();if(A){this.divButtons.appendChild(y)}}var y=this.createSpace(10,1);if(A){this.divButtons.appendChild(y)}if(this.settings.showExitButton){var y=this.closeLink();if(A){this.divButtons.appendChild(y)}}var w=this.nestedButtonsDiv("buttons-outer-right","buttons-inner-right");if(A){this.divButtons.appendChild(w.outer)}if(this.settings.showZoomButtons){var y=this.magnifierLink();if(A){w.inner.appendChild(y)}if(this.settings.zoomMode=="zoom"){var y=this.zoomOutLink();if(A){w.inner.appendChild(y)}var y=this.zoomResetLink();if(A){w.inner.appendChild(y)}}}if(!this.isTouch){var y=this.fullScreenLink();if(A){w.inner.appendChild(y)}}return this.divButtons};i.prototype.fitButtons=function(){var D=$ms.$(this.id+"buttons-outer-right");var F=$ms.$(this.id+"buttons-inner-right");var w=$ms.$(this.id+"buttons-outer-left");var x=$ms.$(this.id+"buttons-inner-left");$ms.removeClass(w,"buttons-outer");$ms.removeClass(x,"buttons-inner");$ms.removeClass(x,"buttons-inner-2-buttons");$ms.removeClass(x,"buttons-inner-3-buttons");$ms.removeClass(x,"buttons-inner-4-buttons");$ms.addClass(x,"buttons-inner-initial");$ms.removeClass(D,"buttons-outer");$ms.removeClass(F,"buttons-inner");$ms.removeClass(F,"buttons-inner-3-buttons");$ms.removeClass(F,"buttons-inner-4-buttons");$ms.addClass(F,"buttons-inner-initial");var y=0;for(var B=0;B<this.divButtons.childNodes.length;B++){if(this.divButtons.childNodes[B].nodeName.toLowerCase()=="a"){var E=this.divButtons.childNodes[B];for(var A=0;A<E.childNodes.length;A++){if(E.childNodes[A].nodeName.toLowerCase()=="img"){y+=parseFloat(getComputedStyle(E.childNodes[A]).width)}}}else{if(this.divButtons.childNodes[B].nodeName.toLowerCase()=="div"){y+=parseFloat(this.divButtons.childNodes[B].getBoundingClientRect().width)}}}if(isNaN(y)){return}var H=parseFloat(getComputedStyle($ms.$("img"+this.id+"filmstrip")).right)+parseFloat(getComputedStyle($ms.$("img"+this.id+"filmstrip")).width);y+=H*2;var G=this.divMiddle.getBoundingClientRect().width;if(this.settings.zoomMode=="zoom"&&$ms.$(this.id+"buttons-inner-right")){if(y>G){$ms.addClass($ms.$(this.id+"buttons-outer-right"),"buttons-outer");$ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner");if($ms.$(this.id+"a-full")){$ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner-4-buttons");y-=(3*b)}else{$ms.addClass($ms.$(this.id+"buttons-inner-right"),"buttons-inner-3-buttons");y-=(2*b)}$ms.removeClass(this.id+"buttons-inner-right","buttons-inner-initial")}}var z=Math.ceil((y-G)/32);var C=0;if(this.settings.showPrintButton){C++}if(this.settings.showDownloadButton){C++}if(this.settings.showOtherButton){C++}if(this.settings.showLocateButton){C++}if(C>1){if(z>0){$ms.addClass($ms.$(this.id+"buttons-outer-left"),"buttons-outer");$ms.addClass($ms.$(this.id+"buttons-inner-left"),"buttons-inner");$ms.addClass($ms.$(this.id+"buttons-inner-left"),"buttons-inner-4-buttons");y-=((C-1)*b);$ms.removeClass(this.id+"buttons-inner-left","buttons-inner-initial")}}z=Math.ceil((y-G)/32);if(z>0){if($ms.$(this.id+"a-first")){$ms.$(this.id+"a-first").style.display="none"}if($ms.$(this.id+"a-playpause")){$ms.$(this.id+"a-playpause").style.display="none"}if($ms.$(this.id+"a-last")){$ms.$(this.id+"a-last").style.display="none"}}else{if($ms.$(this.id+"a-first")){$ms.$(this.id+"a-first").style.display="inline-block"}if($ms.$(this.id+"a-playpause")){$ms.$(this.id+"a-playpause").style.display="inline-block"}if($ms.$(this.id+"a-last")){$ms.$(this.id+"a-last").style.display="inline-block"}}};i.prototype.nestedButtonsDiv=function(z,x){var w=$ms.$(this.id+z);var y=$ms.$(this.id+x);if(!w){w=document.createElement("div");w.id=this.id+z;y=document.createElement("div");y.id=this.id+x;w.appendChild(y)}return{outer:w,inner:y}};i.prototype.firstLink=function(){var w=$ms.$(this.id+"a-first");var x=$ms.$(this.id+"img-first");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-first";x.id=this.id+"img-first";w.appendChild(x)}if(this.slide==0){x.className="ss-first-disabled sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="First Disabled";w.onclick=function(){return false};w.removeAttribute("onclick")}else{w.title="First Image";w.onclick=function(y){y.stopPropagation();this.loadslide(0,"button-first-click")}.bind(this);x.className="ss-first sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="First"}return w};i.prototype.previousLink=function(){var w=$ms.$(this.id+"a-prev");var x=$ms.$(this.id+"img-prev");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-prev";x.id=this.id+"img-prev";w.appendChild(x)}if(this.slide==0&&!this.settings.slideshowWrap){x.className="ss-prev-disabled sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Goto Previous Disabled";w.onclick=function(){return false};w.removeAttribute("onclick")}else{w.onclick=function(y){y.stopPropagation();this.loadslide(this.slide-1,"button-previous-click")}.bind(this);w.title="Previous Image";x.className="ss-prev sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Previous"}return w};i.prototype.playPauseLink=function(){var w=$ms.$(this.id+"a-playpause");var x=$ms.$(this.id+"img-playpause");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-playpause";if(this.settings.playOnEnter){this.playPause("play","init",w,x)}else{this.playPause("pause","init",w,x)}x.id=this.id+"img-playpause";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";w.appendChild(x)}return w};i.prototype.playPause=function(A,z,x,y){if(typeof x=="undefined"){x=$ms.$(this.id+"a-playpause");y=$ms.$(this.id+"img-playpause")}if(A=="play"){x.title="Pause Slideshow";x.onclick=function(B){B.stopPropagation();this.playPause("pause","click")}.bind(this);y.className="ss-pause sprite-32";y.alt="Pause";if(z=="click"){var w=0;if(this.slide<this.count-1||this.settings.slideshowWrap){w=this.slide+1}this.loadslide(w,"button-playpause-click")}this.startSlideshow()}else{if(A=="pause"){x.title="Play Slideshow";x.onclick=function(B){B.stopPropagation();this.playPause("play","click")}.bind(this);y.className="ss-play sprite-32";y.alt="Play";if(z=="click"){this.stopSlideshow()}}else{if(A=="reset"){this.stopSlideshow();this.startSlideshow()}}}};i.prototype.nextLink=function(){var w=$ms.$(this.id+"a-next");var x=$ms.$(this.id+"img-next");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-next";x.id=this.id+"img-next";w.appendChild(x)}if(this.slide>=this.count-1&&!this.settings.slideshowWrap){x.className="ss-next-disabled sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Next Disabled";w.onclick=function(){return false};w.removeAttribute("onclick")}else{w.title="Next Image";w.onclick=function(y){y.stopPropagation();this.loadslide(this.slide+1,"button-next-click")}.bind(this);x.className="ss-next sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Next"}return w};i.prototype.lastLink=function(){var w=$ms.$(this.id+"a-last");var x=$ms.$(this.id+"img-last");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-last";x.id=this.id+"img-last";w.appendChild(x)}if(this.slide>=this.count-1){x.className="ss-last-disabled sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Last Disabled";w.onclick=function(){return false};w.removeAttribute("onclick")}else{w.title="Last Image";w.onclick=function(y){y.stopPropagation();this.loadslide(this.count-1,"button-last-click")}.bind(this);x.className="ss-last sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Last"}return w};i.prototype.closeLink=function(){var w=$ms.$(this.id+"a-close");var x=$ms.$(this.id+"img-close");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-close";x.id=this.id+"img-close";w.title="Exit Slideshow";w.onclick=function(y){this.close(y)}.bind(this);x.className="ss-close sprite-32";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.style.width="44px";x.alt="Close";w.appendChild(x)}return w};i.prototype.magnifierLink=function(){var w=$ms.$(this.id+"a-zoom");var x=$ms.$(this.id+"img-zoom");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-zoom";x.id=this.id+"img-zoom";w.title="Zoom In (CTRL + Mouse Wheel will also zoom in and out)";if(this.settings.zoomMode=="zoom"){w.onclick=function(y){y.stopPropagation();this.zoomImageStart(true)}.bind(this)}else{w.onclick=function(y){y.stopPropagation();this.startMagnifier(y)}.bind(this)}x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Zoom In";x.className="ss-zoom sprite-32";w.appendChild(x)}return w};i.prototype.zoomOutLink=function(){var w=$ms.$(this.id+"a-zoomOut");var x=$ms.$(this.id+"img-zoom-out");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-zoom-out";x.id=this.id+"img-zoom-out";w.title="Zoom Out (CTRL + Mouse Wheel will also zoom in and out)";w.onclick=function(y){y.stopPropagation();this.zoomImageStart(false)}.bind(this);x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Zoom Out";x.className="ss-zoom-out sprite-32";w.appendChild(x)}return w};i.prototype.zoomResetLink=function(){var w=$ms.$(this.id+"a-zoom-reset");var x=$ms.$(this.id+"img-zoom-reset");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-zoom-reset";x.id=this.id+"img-zoom-reset";w.title="Zoom Reset";w.onclick=function(y){y.stopPropagation();this.resetZoom(this.divLarge[this.slide],this.img[this.slide])}.bind(this);x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Zoom Reset";x.className="ss-zoom-reset sprite-32";w.appendChild(x)}return w};i.prototype.fullScreenLink=function(){var w=$ms.$(this.id+"a-full");var x=$ms.$(this.id+"img-full");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-full";x.id=this.id+"img-full";w.title="Full Screen";w.onclick=function(y){y.stopPropagation();this.fullScreen()}.bind(this);x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Full Screen";x.className="ss-full-screen sprite-32";w.appendChild(x)}return w};i.prototype.downloadLink=function(w){var x=$ms.$(this.id+"a-download");var y=$ms.$(this.id+"img-download");if(!y){x=document.createElement("a");y=document.createElement("img");x.id=this.id+"a-download";y.id=this.id+"img-download";y.style.width="44px";y.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.appendChild(y)}if(this.files[w].downloadLink){x.title="Download Image";x.onclick=function(A){A.stopPropagation();var z={divId:this.id+"download",inputLinkId:this.id+"download-link",iframeId:this.id+"-iframe"};$ms.downloadfile(z)}.bind(this);y.className="ss-download sprite-32";y.alt="Download"}else{x.title="Download Disabled";x.onclick=function(){return false};x.removeAttribute("onclick");y.className="ss-download-disabled sprite-32";y.alt="Download Disabled"}return x};i.prototype.printLink=function(w){var x=$ms.$(this.id+"a-print");var y=$ms.$(this.id+"img-print");if(!y){x=document.createElement("a");y=document.createElement("img");x.id=this.id+"a-print";y.id=this.id+"img-print";x.title="Print Image";y.className="ss-print sprite-32";y.style.width="44px";y.src=$ms.STATIC_IMG_COMMON+"/blank.gif";y.alt="Print";x.appendChild(y)}x.onclick=function(z){z.stopPropagation();$ms.printDiv(this.divLarge[w].id);if(typeof this.logPrintFn!=="undefined"){this.files[w].logPrintFn}return false}.bind(this);return x};i.prototype.locateLink=function(w){var x=$ms.$(this.id+"a-locate");var y=$ms.$(this.id+"img-locate");if(!x){x=document.createElement("a");y=document.createElement("img");x.id=this.id+"a-locate";y.id=this.id+"img-locate";y.style.width="44px";y.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.appendChild(y)}if(this.files[w].locateLink){x.title="Locate Post for Image";x.href=this.files[w].locateLink;x.onclick=function(z){this.close(z)}.bind(this);y.className="ss-locate sprite-32";y.alt="Locate Post"}else{x.title="Locate Post Disabled";x.removeAttribute("href");x.onclick=function(){return false};x.removeAttribute("onclick");y.className="ss-locate-disabled sprite-32";y.alt="Locate Post Disabled"}return x};i.prototype.emptylink=function(z,w){var x=$ms.$(z);var y=$ms.$(w);if(!x){var x=document.createElement("a");var y=document.createElement("img");x.id=z;y.id=w;y.className="ss-empty sprite-32";y.style.width="44px";y.src=$ms.STATIC_IMG_COMMON+"/blank.gif";y.alt="Empty Button";x.appendChild(y)}return x};i.prototype.nextLinklarge=function(x){var w=$ms.$(this.id+"a-next-large");x=$ms.$(this.id+"img-next-large");if(!x){var w=document.createElement("a");x=document.createElement("img");w.id=this.id+"a-next-large";w.className="ss-next-large";x.id=this.id+"img-next-large";w.appendChild(x)}w.title="Next Image";w.onclick=function(y){y.stopPropagation();this.loadslide(this.slide+1,"button-next-click")}.bind(this);x.className="ss-next-large sprite-90";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Next";return{img:x,a:w}};i.prototype.prevlinklarge=function(x){var w=$ms.$(this.id+"a-prev-large");x=$ms.$(this.id+"img-prev-large");if(!x){var w=document.createElement("a");x=document.createElement("img");w.id=this.id+"a-prev-large";w.className="ss-prev-large";x.id=this.id+"img-prev-large";w.appendChild(x)}w.title="Next Image";w.onclick=function(y){y.stopPropagation();this.loadslide(this.slide-1,"button-previous-click")}.bind(this);x.className="ss-prev-large sprite-90";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.alt="Next";return{img:x,a:w}};i.prototype.closeLinklarge=function(){var w=$ms.$(this.id+"a-close-large");var x=$ms.$(this.id+"img-close-large");if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-close-large";w.className="ss-close-large";x.id=this.id+"img-close-large";x.className="ss-close-large";w.title="Exit Slideshow";w.onclick=function(y){this.close(y)}.bind(this);x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.style.width="22px";x.alt="Close";w.appendChild(x)}return{img:x,a:w}};i.prototype.createSpace=function(y,z){var w=$ms.$(this.id+"a-space"+z);var x=$ms.$(this.id+"img-space"+z);if(!x){var w=document.createElement("a");var x=document.createElement("img");w.id=this.id+"a-space"+z;w.title="";x.id=this.id+"img-space"+z;x.style.width=y+"px";x.style.height="32px";x.src=$ms.STATIC_IMG_COMMON+"/blank.gif";w.appendChild(x)}return w};i.prototype.otherLink=function(w){var x=$ms.$(this.id+"a-feedback");var z=$ms.$(this.id+"img-feedback");if(!z){var x=document.createElement("a");var z=document.createElement("img");x.id=this.id+"a-feedback";z.id=this.id+"img-feedback";z.style.width="44px";z.src=$ms.STATIC_IMG_COMMON+"/blank.gif";x.appendChild(z)}if(this.files[w].otherLink&&this.files[w].otherLink.length>0){var y=this.files[w].otherLink;x.title="Enter Feedback & Rating";x.onclick=function(A){window.location.href=y;this.close(A);return false}.bind(this);z.className="ss-feedback sprite-32";z.alt="Enter Feeback"}else{x.removeAttribute("href");x.title="Feedback & Rating Disabled";x.onclick=function(){return false};x.removeAttribute("onclick");z.className="ss-feedback-disabled sprite-32";z.alt="Enter Feeback Disabled"}return x};i.prototype.slidePositionText=function(w){return"("+(w+1)+" / "+this.count+")"};i.prototype.line1Text=function(w){return(typeof this.files[w].line1Text=="undefined"?"":this.files[w].line1Text)};i.prototype.line2Text=function(w){return(typeof this.files[w].line2Text=="undefined"?"":this.files[w].line2Text)};i.prototype.scrolldiv=function(z){if(typeof z!=="object"){z=$ms.$(z)}var y=5;var w=(this.divFilmstrip.scrollLeft+(this.divFilmstrip.offsetWidth-y)-z.offsetWidth);var x=this.divFilmstrip.scrollLeft+y;if(z.offsetLeft<=x){this.divFilmstrip.scrollLeft=z.offsetLeft-y}else{if(z.offsetLeft>=w){this.divFilmstrip.scrollLeft=z.offsetLeft-((this.divFilmstrip.offsetWidth-y)-z.offsetWidth)+36}}};i.prototype.fullScreen=function(){if(this.isFullScreen){$ms.cancelFullScreen();this.isFullScreen=false;$ms.removeClass($ms.$(this.id+"img-full"),"ss-exit-full-screen");$ms.addClass($ms.$(this.id+"img-full"),"ss-full-screen")}else{$ms.requestFullScreen(this.divWrapper);this.isFullScreen=true;$ms.removeClass($ms.$(this.id+"img-full"),"ss-full-screen");$ms.addClass($ms.$(this.id+"img-full"),"ss-exit-full-screen")}this.resetZoom();this.resize();this.fitButtons();this.centerImage(this.slide);this.resetCurrentSlidePosition()};i.prototype.startMagnifier=function(z){var y=$ms.$(this.id+"magnifier");if(y){this.closeMagnifier()}else{var x=$ms.$(this.id+"buttons-large");this.divLarge[this.slide].style.cursor="pointer";y=document.createElement("div");y.id=this.id+"magnifier";y.className="ss-magnifier";this.divLarge[this.slide].appendChild(y);$ms.addClass(x,"display-none");this.capturemousewheel(true);if(this.settings.divExternalMagnifier){this.settings.divExternalMagnifier.style.zIndex=parseInt(getComputedStyle($ms.$(this.id+"opaque")).getPropertyValue("z-index"))+1}var w={initMagZoom:this.settings.initMagZoom,magnifierStyles:this.settings.magnifierStyles,divMagnifier:y,container:this.divLarge[this.slide],img:this.img[this.slide],divExternalMagnifier:this.settings.divExternalMagnifier,magnifierSize:this.settings.magnifierSize};this.objMagnifier=new $msRoot.Slideshow.Magnifier(w);this.objMagnifier.initmagnifier();this.objMagnifier.moveMagnifier(z)}};i.prototype.closeMagnifier=function(){var x=$ms.$(this.id+"magnifier");var w=$ms.$(this.id+"buttons-large");if(x){$ms.removeClass(w,"display-none");x.parentNode.removeChild(x);this.magZoom=this.settings.initMagZoom;this.objMagnifier.removelistener();this.objMagnifier.close();this.objMagnifier=null;this.capturemousewheel(false);return true}return false};i.prototype.capturemousewheel=function(w){if(typeof this.wheelListener=="undefined"){this.wheelListener=function(x){this.wheel(x)}.bind(this)}if(window.onmousewheel!==undefined){if(w){window.addEventListener("mousewheel",this.wheelListener)}else{window.removeEventListener("mousewheel",this.wheelListener)}}else{if(window.onwheel!==undefined){if(w){window.addEventListener("DOMMouseScroll",this.wheelListener,false)}else{window.removeEventListener("DOMMouseScroll",this.wheelListener)}}else{}}};i.prototype.wheel=function(w){if(!w.ctrlKey){return}var x=0;if(!w){w=window.event}if(w.wheelDelta){x=w.wheelDelta/120}else{if(w.detail){x=-w.detail/3}}if(x){x=x/Math.abs(x);if($ms.$(this.id+"magnifier")){this.zoomMagnifier(w,x)}else{this.zoomImageStart(x==1)}}if(w.preventDefault){w.preventDefault()}w.returnValue=false};i.prototype.zoomMagnifier=function(x,w){if(this.objMagnifier){this.objMagnifier.zoomMagnifier(x,w)}};i.prototype.resizeWindow=function(w){if(this.isFullScreen){if(!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.fullScreen()}this.resize();this.fitButtons();this.centerImage(this.slide);this.resetCurrentSlidePosition()}else{if(this.isTouch&&this.touch.distance>0){this.fitButtons()}else{this.resize();this.fitButtons();this.centerImage(this.slide);this.resetCurrentSlidePosition()}}this.orientation==screen.orientation;if(this.zoom!==1){this.zoom=1;this.resetZoom()}if(!w){this.stopWait("remove")}};i.prototype.keypress=function(w){if(w.stopPropagation){w.stopPropagation()}switch(w.keyCode){case 13:break;case 27:if(this.closeMagnifier()){return}if(this.settings.escapeKeyCloses){this.close(w)}break;case 37:w.preventDefault();this.loadslide(this.slide-1,"keypress-previous");break;case 38:break;case 39:w.preventDefault();this.loadslide(this.slide+1,"keypress-next");break;case 40:break}};i.prototype.zoomImage=function(C){if(this.movedImage){this.movedImage=false;return}if(this.settings.zoomMode=="magnifier"){this.zoomMagnifier(C,C.ctrlKey?-1:1);return}if($ms.hasClass(this.divLarge[this.slide],"move-next-"+this.slide)||$ms.hasClass(this.divLarge[this.slide],"move-prev-"+this.slide)){if(this.zoom!==1){v("zoom !== 1 with zoomImage: ");this.zoom=1}this.resetCurrentSlidePosition()}if(this.slideShowRunning){this.playPause("pause","click")}var F=1;if(C.ctrlKey){F=-1}var K=this.zoom;this.zoom+=F*0.2;this.zoom=$ms.round(Math.min(6,Math.max(1,this.zoom)),1);if(this.zoom==1){this.resetZoom(this.divLarge[this.slide],this.img[this.slide]);return}var H=$ms.getOffset(this.divLarge[this.slide]);var G=getComputedStyle(this.img[this.slide]);var x={x:parseInt(G.left),y:parseInt(G.top)};var w=C.pageY-H.y;var A=C.pageX-H.x;var y=-x.x+A;var I=-x.y+w;var D=this.zoom/K;var B=y*D;var z=I*D;var E=-(B-A);var J=-(z-w);this.img[this.slide].style.height=parseInt(this.divLarge[this.slide].style.height)*(this.zoom)+"px";this.img[this.slide].style.width=parseInt(this.divLarge[this.slide].style.width)*(this.zoom)+"px";this.img[this.slide].style.top=J+"px";this.img[this.slide].style.left=E+"px";this.img[this.slide].style.cursor="grab"};i.prototype.resetZoom=function(w,x){if(typeof w=="undefined"){w=this.divLarge[this.slide];x=this.img[this.slide]}x.style.top="0px";x.style.left="0px";x.style.height=w.style.height;x.style.width=w.style.width;x.style.cursor="default";this.zoom=1};i.prototype.zoomImageStart=function(z){var x={};x.ctrlKey=!z;var y=this.divLarge[this.slide].getBoundingClientRect();var w=$ms.getOffset(this.divLarge[this.slide]);x.pageX=w.x+y.width/2;x.pageY=w.y+y.height/2;this.zoomImage(x)};i.prototype.mousedown=function(y,z,w){if(this.zoom==1){return}y.stopPropagation();y.preventDefault();this.moveInit={};this.moveInit.pageX=y.pageX;this.moveInit.pageY=y.pageY;this.moveInit.div=z;this.moveInit.img=this.img[w];this.moveInit.imgOffset=$ms.getOffset(this.img[w]);var x=getComputedStyle(this.img[w]);this.moveInit.left=x.left;this.moveInit.top=x.top;this.moveInit.i=w;this.moveInit.divOffset=$ms.getOffset(z);this.mousemoveListener=function(A){this.mousemove(A)}.bind(this);z.addEventListener("mousemove",this.mousemoveListener,false);this.mouseupListener=function(A){this.mouseup(A,z,w)}.bind(this);z.addEventListener("mouseup",this.mouseupListener,false)};i.prototype.mouseup=function(x,y,w){if(this.zoom==1){return}x.stopPropagation();y.removeEventListener("mousemove",this.mousemoveListener);this.moveInit={};y.removeEventListener("mouseup",this.mouseupListener)};i.prototype.mousemove=function(x){if(this.zoom==1){return}if(typeof this.moveInit.pageX=="undefined"){return}this.movedImage=true;var y=(x.pageY-this.moveInit.pageY);var w=(x.pageX-this.moveInit.pageX);this.moveInit.img.style.top=(parseInt(this.moveInit.top)+y)+"px";this.moveInit.img.style.left=(parseInt(this.moveInit.left)+w)+"px"};i.prototype.adjustImageSizeForBorder=function(w){var x=getComputedStyle(w);w.style.height=parseInt(w.style.height)-(Math.ceil(parseFloat(x.borderTopWidth))+Math.ceil(parseFloat(x.borderBottomWidth)))+"px";w.style.width=parseFloat(w.style.width)-(Math.ceil(parseFloat(x.borderLeftWidth))+Math.ceil(parseFloat(x.borderRightWidth)))+"px"};i.prototype.startSlideshow=function(){var x;var y;this.slideShowRunning=true;function w(B){if(!y){y=B}if(this.slideShowRunning){var C=B-y;if(C>this.settings.slideshowInterval){if(this.slide<this.count-1||this.settings.slideshowWrap){x=this.slide+1;this.loadslide(x,"button-playpause-auto")}if(this.slide>=this.count-1&&!this.settings.slideshowWrap){this.playPause("pause","click");this.slideShowRunning=false;return}y=B}var D=w.bind(this);var E=requestAnimationFrame.bind(window);this.ssRafId=E(function(){D(Date.now())})}}var z=w.bind(this);var A=requestAnimationFrame.bind(window);this.ssRafId=A(function(){z(Date.now())})};i.prototype.stopSlideshow=function(){this.slideShowRunning=false;var w=cancelAnimationFrame.bind(window);w(this.ssRafId);this.ssRafId=undefined};i.prototype.calcMarginX=function(w){return(parseFloat(this.divWrapper.style.width)-parseFloat(w.displayWidth))/2};i.prototype.calcMarginY=function(w){return(parseFloat(this.divMiddle.style.height)-l-parseFloat(w.displayHeight))/2};i.prototype.wait=function(S){if(typeof S=="undefined"){return}else{if(S==2){if(this.settings.waitAnimation!==S){this.stopWait("remove");this.settings.waitAnimation=S;N=document.createElement("div");N.id=this.id+"wait-gif";N.className="ss-wait ss-loading";this.divMiddle.appendChild(N)}return}else{if($ms.$(this.id+"wait-gif")){$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif"))}}}var E,A,F,I,N;var G=[];G.push({});G.push({line:"rgb(36,16,203)",spanDot:"rgb(212,20,30)"});G.push({line:"rgb(133,45,244)",spanDot:"rgb(252,126,72)"});G.push({line:"rgb(244,45,241)",spanDot:"rgb(237,235,41)"});G.push({line:"rgb(249,19,150)",spanDot:"rgb(172,237,41)"});G.push({line:"rgb(212,20,30)",spanDot:"rgb(78,240,43)"});G.push({line:"rgb(252,126,72)",spanDot:"rgb(56,231,144)"});G.push({line:"rgb(237,235,41)",spanDot:"rgb(37,234,204)"});G.push({line:"rgb(172,237,41)",spanDot:"rgb(48,156,223)"});G.push({line:"rgb(78,240,43)",spanDot:"rgb(37,68,231)"});G.push({line:"rgb(56,231,144)",spanDot:"rgb(133,45,244)"});G.push({line:"rgb(37,234,204)",spanDot:"rgb(244,45,241)"});if(typeof S=="undefined"){S=this.settings.waitAnimation}else{if(this.settings.waitAnimation!==S){this.stopWait("remove");this.settings.waitAnimation=S}}if($ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+"wait")){$ms.$(this.id+"wait").style.display="block";for(var P=1;P<=11;P++){$ms.removeClass($ms.$(this.id+"line"+P),"ss-wait-animation-paused")}return}else{var Q=document.createElement("style");Q.id=this.id+"waitStyleSheet";Q.appendChild(document.createTextNode(""));document.head.appendChild(Q);var D=".ss-wait-animation-paused {animation-play-state: paused}";Q.sheet.insertRule(D,0)}N=document.createElement("div");N.id=this.id+"wait";N.className="ss-wait";N.style.width="350px";N.style.height="350px";for(var P=1;P<=11;P++){E=document.createElement("div");E.className="ss-wait-line ss-wait-line"+P;E.id=this.id+"line"+P;F=document.createElement("span");F.className="ss-wait-circle ss-wait-circle-top";E.appendChild(F);F=document.createElement("span");F.className="ss-wait-circle ss-wait-circle-bottom";E.appendChild(F);N.appendChild(E);var T=0;var B;if(S==0){B=5}else{if(S==1){B=20}else{return}}var D=".ss-wait-line"+P+"{margin-left: "+P*35+"px;background-color: "+G[P].line+";"+n+"animation: ss-wait-line "+B+"s cubic-bezier(0.250, 0, 0.705, 1) "+(((P+1)*0.25)+T)+"s infinite;}";Q.sheet.insertRule(D,0);var D=".ss-wait-line"+P+"::before{content: '"+"PLEASE WAIT".substr(P-1,1)+"'; line-height: 120px; font-size: 200%; color: "+G[P].spanDot+"; }";Q.sheet.insertRule(D,0);D=".ss-wait-line"+P+" > span {background-color: "+G[P].spanDot+";}";Q.sheet.insertRule(D,0);if(S==0){var K="@"+n+"keyframes ss-wait-line{0%{height: 4px; top: 0px; left: 0px; transform: rotate(-65deg)}10%{height: 220px; top: -110px; left: 15px;}45%{height: 200px; top: -100px; left: 25px;}70%{height: 8px; top: 0px; left: 25px; transform: rotate(0deg);}100%{height: 8px; top: 0px; left: 15px; transform: rotate(0deg);}}";Q.sheet.insertRule(K,0)}else{if(S==1){var K="@"+n+"keyframes ss-wait-line{0%{height: 4px; top: 0px; left: 0px; transform: rotate(-65deg)}2.5%{height: 220px; top: -110px;}11.25%{height: 200px; top: -100px;}17.5%{height: 8px; top: 0px; left: 15px; transform: rotate(0deg); }24%{height: 8px; top: 0px; left: 25px; transform: rotate(0deg);}26%{height: 4px; top: 0px; left: 25px; transform: rotate(25deg)}27.5%{height: 220px; top: -110px; left: 15px;}36.25%{height: 200px; top: -100px;}42.5%{height: 8px; top: 0px; transform: rotate(90deg);}49%{height: 4px; top: 0px; left: 0px; transform: rotate(90deg);}51%{height: 4px; top: 0px; left: 0px; transform: rotate(115deg)}52.5%{height: 220px; top: -110px;}61.5%{height: 200px; top: -100px;}67.5%{height: 8px; top: 0px; left: 15px; transform: rotate(180deg); }74%{height: 8px; top: 0px; left: 25px; transform: rotate(180deg);}76%{height: 4px; top: 0px; left: 25px; transform: rotate(205deg)}77.5%{height: 220px; top: -110px; left: 15px; }86.25%{height: 200px; top: -100px;}92.5%{height: 8px; top: 0px; left: 0px; transform: rotate(270deg);}100%{height: 8px; top: 0px; left: 0px; transform: rotate(270deg);}}";Q.sheet.insertRule(K,0)}}}var J,L;var R=parseInt(N.style.height);var x=parseInt(N.style.width);var z=$ms.getOffset(this.settings.container);var H=z.y-$ms.getScroll().y;var C=z.x-$ms.getScroll().x;var y=Math.min(window.innerHeight,z.height);var O=Math.min(window.innerWidth,z.width);var M=(y-(H+R))/2;var w=(O-(C+x))/2;N.style.marginLeft=(w-65)+"px";N.style.marginTop=Math.max(100,M+100)+"px";this.divMiddle.appendChild(N)};i.prototype.stopWait=function(w){if($ms.$(this.id+"waitStyleSheet")&&$ms.$(this.id+"wait")){if(w==="remove"){$ms.$(this.id+"waitStyleSheet").parentNode.removeChild($ms.$(this.id+"waitStyleSheet"));$ms.$(this.id+"wait").parentNode.removeChild($ms.$(this.id+"wait"));return}for(var x=1;x<=11;x++){$ms.addClass($ms.$(this.id+"line"+x),"ss-wait-animation-paused")}if(!w){$ms.$(this.id+"wait").style.display="none"}}else{if($ms.$(this.id+"wait-gif")){$ms.$(this.id+"wait-gif").parentNode.removeChild($ms.$(this.id+"wait-gif"))}}};i.prototype.resetCurrentSlidePosition=function(w){this.divLarge[this.slide].style.left=this.calcMarginX(this.largeSize[this.slide])+"px";$ms.removeClass(this.divLarge[this.slide],"move-next-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-prev-"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-next-old"+this.slide);$ms.removeClass(this.divLarge[this.slide],"move-prev-old"+this.slide);$ms.removeClass(this.divLarge[this.slide],"ss-size-move-next-old-"+this.slide),$ms.removeClass(this.divLarge[this.slide],"ss-size-move-prev-old-"+this.slide),$ms.removeClass(this.divLarge[this.slide],"ss-size-move-next-"+this.slide),$ms.removeClass(this.divLarge[this.slide],"ss-size-move-prev-"+this.slide)};i.prototype.shortFilename=function(x){if(typeof x=="undefined"){return}var w=x.substr(x.lastIndexOf("/")+1);if(w.lastIndexOf(".")!=-1){w=w.substring(0,w.lastIndexOf("."))}return w};return i})();$msRoot.Slideshow.Magnifier=(function(d){var a=[];var c=0;var b={initMagZoom:4,magnifierStyles:undefined,magnifierSize:{height:100,width:100},divMagnifier:undefined,container:undefined,img:undefined,divExternalMagnifier:undefined};e.getInstance=function(g){if(typeof g!=="undefined"){for(var f=0;f<a.length;f++){if(a[f].id==g){return a[f]}}}else{return a}};function e(f){this.settings=$ms.cloneSettings(b,f);this.magZoom=this.settings.initMagZoom;this.id="ms-magnifier"+c+++"-";a.push(this)}e.prototype.initmagnifier=function(){this.settings.divMagnifier.style.height=parseInt(this.settings.magnifierSize.height)+"px";this.settings.divMagnifier.style.width=parseInt(this.settings.magnifierSize.width)+"px";this.imgCopy=document.createElement("img");this.imgCopy.id=this.id+"imagecopy";this.externalState={created:false,visibilityHidden:false,displayNone:false,displayNoneClass:false};if(this.settings.divExternalMagnifier){if(typeof this.settings.divExternalMagnifier!=="object"){this.externalState.created=true;this.settings.divExternalMagnifier=document.createElement("div");this.settings.divExternalMagnifier.style.border="1px solid black";this.settings.divExternalMagnifier.style.position="absolute";this.settings.divExternalMagnifier.style.overflow="hidden";document.body.appendChild(this.settings.divExternalMagnifier)}else{if(getComputedStyle(this.settings.divExternalMagnifier).getPropertyValue("visibility")=="hidden"){this.settings.divExternalMagnifier.style.visibility="visible";this.externalState.visibilityHidden=true}else{if(getComputedStyle(this.settings.divExternalMagnifier).getPropertyValue("display")=="none"){this.settings.divExternalMagnifier.style.display="block";this.externalState.displayNone=true}else{if($ms.hasClass(this.settings.divExternalMagnifier,"display-none")){$ms.removeClass(this.settings.divExternalMagnifier,"display-none");this.externalState.displayNoneClass=true}}}this.settings.divExternalMagnifier.style.overflow="hidden"}this.settings.divExternalMagnifier.appendChild(this.imgCopy);if(this.settings.magnifierStyles){for(var f in this.settings.magnifierStyles){if(typeof this.settings.magnifierStyles[f]!=="undefined"){this.settings.divExternalMagnifier.style[f]=this.settings.magnifierStyles[f]}}}this.imgCopy.style.position="absolute"}else{this.settings.divMagnifier.appendChild(this.imgCopy)}this.moveMagnifierListener=function(i){this.moveMagnifier(i)}.bind(this);this.settings.container.addEventListener("mousemove",this.moveMagnifierListener,false);var h=this.settings.img.src;this.imgCopy.src=h;var g=this.imgCopy.src;this.imgCopy.height=this.settings.img.height*this.magZoom;this.imgCopy.width=this.settings.img.width*this.magZoom};e.prototype.zoomMagnifier=function(g,f){if(this.settings.divMagnifier){this.magZoom=+this.magZoom+f*0.2;this.magZoom=Math.min(10,Math.max(1,this.magZoom));this.imgCopy.height=this.settings.img.height*this.magZoom;this.imgCopy.width=this.settings.img.width*this.magZoom;this.moveMagnifier(g)}};e.prototype.moveMagnifier=function(w){var i=this.getPosition(this.settings.container);var n=w.pageX-i.x-(this.settings.divMagnifier.clientWidth/2);var s=w.pageY-i.y-(this.settings.divMagnifier.clientHeight/2);this.settings.divMagnifier.style.left=n+"px";this.settings.divMagnifier.style.top=s+"px";if(!this.settings.divExternalMagnifier){var r=(w.pageY-i.y)*(this.magZoom-1);var m=-(s-this.settings.container.clientTop+r);this.imgCopy.style.top=m+"px";var j=(w.pageX-i.x)*(this.magZoom-1);var f=-(n+j);this.imgCopy.style.left=f+"px"}else{var q=this.settings.divExternalMagnifier.getBoundingClientRect();var h=this.settings.divMagnifier.getBoundingClientRect();var u=this.imgCopy.getBoundingClientRect();var l=this.settings.container.getBoundingClientRect();var x=u.width-q.width;var k=u.height-q.height;var p=l.height-h.height;var o=l.width-h.width;this.settings.divMagnifier.style.top=Math.min(p,(Math.max(0,s)))+"px";this.settings.divMagnifier.style.left=Math.min(o,(Math.max(0,n)))+"px";if(k>0&&p>0){var t=parseInt(this.settings.divMagnifier.style.top)/p;this.imgCopy.style.top=-t*k+"px"}if(x>0&&o>0){var g=parseInt(this.settings.divMagnifier.style.left)/o;this.imgCopy.style.left=-g*x+"px"}}};e.prototype.getPosition=function(f){var h=0;var g=0;while(f){var i=this.gettranslate(f);h+=((f.offsetLeft+i.x)-f.scrollLeft);g+=((f.offsetTop+i.y)-f.scrollTop);f=f.offsetParent}return{x:h,y:g}};e.prototype.gettranslate=function(k){var j=0;var l=0;var h=window.getComputedStyle(k,null);var f=h.getPropertyValue("transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform");try{if(typeof f!=="undefined"&&f!=="none"){var g=f.split("(")[1].split(")")[0].split(",").map(parseFloat);if(g.length>=6){j=g[4];l=g[5]}}}catch(i){console.log("Matrix invalid: "+f)}return({x:j,y:l})};e.prototype.removelistener=function(){this.settings.container.removeEventListener("mousemove",this.moveMagnifierListener)};e.prototype.close=function(){if(this.settings.divExternalMagnifier){if(this.externalState.created){this.settings.divExternalMagnifier.parentNode.removeChild(this.settings.divExternalMagnifier);this.settings.divExternalMagnifier=true}else{if(this.externalState.visibilityHidden){this.settings.divExternalMagnifier.style.visibility="hidden"}else{if(this.externalState.displayNone){this.settings.divExternalMagnifier.style.display="none"}else{if(this.externalState.displayNoneClass){$ms.addClass(this.settings.divExternalMagnifier,"display-none")}}}}}this.imgCopy.parentNode.removeChild(this.imgCopy);for(var f=0;f<a.length;f++){if(a[f].id==this.id){a.splice(f,1);break}}};return e})();$msRoot.MSTouch=(function(a){var b={captureNode:undefined,logElement:undefined};function c(e){this.tpCache=[];this.scaling=false;this.distance=0;this.settings=b;if(typeof e!=="undefined"){for(var d in e){if(e.hasOwnProperty(d)){this.settings[d]=e[d]}}}if(typeof this.settings.captureNode=="undefined"){this.settings.captureNode=document.body}this.settings.captureNode.addEventListener("touchstart",function(f){if(f.touches.length==2){this.scaling=true;this.pinchStart(f)}}.bind(this));this.settings.captureNode.addEventListener("touchmove",function(f){if(this.scaling){this.pinchMove(f)}}.bind(this));this.settings.captureNode.addEventListener("touchend",function(f){if(this.scaling){this.pinchEnd(f);this.scaling=false}}.bind(this))}c.prototype.pinchStart=function(f){if(f.touches.length==2){this.distance=0;this.tpCache=[];for(var d=0;d<f.touches.length;d++){this.tpCache.push(f.touches[d])}}};c.prototype.pinchMove=function(m){if(m.touches.length==2){var l=-1,j=-1;for(var h=0;h<this.tpCache.length;h++){if(this.tpCache[h].identifier==m.touches[0].identifier){l=h}if(this.tpCache[h].identifier==m.touches[1].identifier){j=h}}if(l>=0&&j>=0){var f=Math.abs(this.tpCache[l].pageX-m.touches[0].pageX);var k=Math.abs(this.tpCache[j].pageX-m.touches[1].pageX);var d=Math.abs(this.tpCache[l].pageY-m.touches[0].pageY);var g=Math.abs(this.tpCache[j].pageY-m.touches[1].pageY);this.distance=Math.max(f,k,d,g)}else{this.tpCache=[]}}};c.prototype.pinchEnd=function(d){this.tpCache=[]};c.prototype.log=function(d,h,g){if(typeof this.settings.logElement!=="undefined"){var j=v(d);if(typeof h!=="undefined"){j+=" ==>t="+h.touches.length+" ==>tT="+h.targetTouches.length+" ==>cT="+h.changedTouches.length;for(var f=0;f<h.targetTouches.length;f++){}}if(g){this.settings.logElement.innerHTML=j}else{this.settings.logElement.innerHTML+=j}}};c.prototype.clearLog=function(){if(this.settings.logElement){this.settings.logElement.innerHTML=""}};return c})();